% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{book}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
\usepackage{booktabs}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{array}
\usepackage{multirow}
\usepackage{wrapfig}
\usepackage{float}
\usepackage{colortbl}
\usepackage{pdflscape}
\usepackage{tabu}
\usepackage{threeparttable}
\usepackage{threeparttablex}
\usepackage[normalem]{ulem}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage{fontspec}
\usepackage{multicol}
\usepackage{hhline}
\newlength\Oldarrayrulewidth
\newlength\Oldtabcolsep
\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{caption}
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage[]{natbib}
\bibliographystyle{apalike}
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Stat 120},
  pdfauthor={Deepak Bastola},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Stat 120}
\author{Deepak Bastola}
\date{2023-04-23}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{introduction-to-statistics}{%
\chapter*{Introduction to Statistics}\label{introduction-to-statistics}}
\addcontentsline{toc}{chapter}{Introduction to Statistics}

Welcome to the captivating world of statistics! This course will provide you with a solid foundation in statistical theory while taking you on a journey through the practical aspects of the subject. Along the way, you'll gain experience with statistical software, learn to interpret and effectively communicate statistical findings, and explore a range of topics in data analysis, statistical inference, and randomness. Some of the areas we'll delve into include linear regression, experimental design, normal distribution, sampling distributions, confidence intervals, and the bootstrap method.

Although statistics is a field that relies on mathematics, it stands apart as a distinct discipline. At the heart of this course is the ability to interpret results and grasp underlying concepts, rather than merely obtaining numerical outcomes. By engaging with a diverse set of problems, you'll become well-versed in statistical methodologies. However, it's crucial to remember that a deep understanding of the concepts is the key to drawing meaningful conclusions.

\hypertarget{learning-objectives}{%
\section{Learning Objectives}\label{learning-objectives}}

\begin{itemize}
\item
  Learn basic principles of data analysis, and how data is produced and used in studies and experiments.
\item
  Understand role of variation and randomness. Understand principles of inference: confidence intervals and hypothesis tests.
\item
  Develop ability to examine statistical arguments critically.
\item
  Learn how to use software (R/RStudio) to analyze data, create graphs, perform basic statistical tests
\end{itemize}

\hypertarget{part-basics-r}{%
\part*{Basics R}\label{part-basics-r}}
\addcontentsline{toc}{part}{Basics R}

\hypertarget{what-is-r}{%
\chapter{What is R?}\label{what-is-r}}

R is a free and open source statistical programming language that facilitates statistical computation. There are a myriad of application that can be done in R, thanks to a huge online support community and dedicated packages. However, R has no graphical user interface and it has to be run by typing commands into a text interface.

\hypertarget{what-is-rstudio}{%
\section{What is RStudio?}\label{what-is-rstudio}}

RStudio provides graphical interface to R! You can think of RStudio as a graphical front-end to R that that provides extra functionality. The use of the R programming language with the RStudio interface is an essential component of this course.

\hypertarget{r-studio-server}{%
\section{R Studio Server}\label{r-studio-server}}

The quickest way to get started is to go to \url{https://maize.mathcs.carleton.edu}, which opens an R Studio window in your web browser. Once logged in, I recommend that you do the following:

\begin{itemize}
\tightlist
\item
  Step 1: Create a folder for this course where you can save all of your work. In the Files window, click on New Folder.
\item
  Step 2: Click on Tools -\textgreater{} Global Options -\textgreater{} R Markdown. Then uncheck the box that says ``Show output inline\ldots{}''
\end{itemize}

(It is also possible to download RStudio on your own laptop. Instructions may be found at the end of this document.)

\hypertarget{rrstudio}{%
\section{R/RStudio}\label{rrstudio}}

The use of the R programming language with the RStudio interface is an
essential component of this course. You have two options for using
RStudio:

\begin{itemize}
\item
  The \textbf{server version} of RStudio on the web at
  (\url{https://maize.mathcs.carleton.edu}). The advantage of using the
  server version is that all of your work will be stored in the cloud,
  where it is automatically saved and backed up. This means that you
  can access your work from any computer on campus using a web
  browser. This server may run slow during peak days/hours. I also recommend
  you to download a local version of R server in your computer in case of rare outages.
\item
  A \textbf{local version} of RStudio installed on your machine. This
  option is highly recommended due to the computational resources this
  course demands. Using this version you can only store your files in your local machine. Additionally, we can save our work on GitHub. We will learn how to use GitHub in the beginning of the course. Both R and RStudio are free and open-source. Please make sure that you have recently updated both R and RStudio.
\end{itemize}

\hypertarget{installing-rrstudio-not-needed-if-you-are-using-the-maize-server}{%
\section{\texorpdfstring{\textbf{Installing R/RStudio (not needed if you are using the maize server)}}{Installing R/RStudio (not needed if you are using the maize server)}}\label{installing-rrstudio-not-needed-if-you-are-using-the-maize-server}}

\begin{quote}
Download the latest version of R: \url{https://cran.r-project.org/}
\end{quote}

\begin{quote}
Download the free Rstudio desktop version: \url{https://www.rstudio.com/products/rstudio/download/}
\end{quote}

Use the default download and install options for each. For R, download the ``precompiled binary'' distribution rather than the source code

\textbf{Updating R/RStudio (not needed if you are using the maize server)}

If you have used a local version of R/RStudio before and it is still installed on your machine, then you should make sure that you have the most recent versions of each program.

\begin{itemize}
\item
  To check your version of R, run the command \texttt{getRversion()} and compare your version to the newest version posted on \url{https://cran.r-project.org/}. If you need an update, then install the newer version using the installation directions above.
\item
  In RStudio, check for updates with the menu option \texttt{Help\ \textgreater{}\ Check\ for\ updates}. Follow directions if an update is needed.
\end{itemize}

\textbf{Did it work? (A sanity check after your install/update)}

Do whatever is appropriate for your operating system to launch
RStudio. You should get a window similar to the screenshot you see
\href{https://www.rstudio.com/wp-content/uploads/2014/04/rstudio-workbench.png}{here},
but yours will be more boring because you haven't written any code
or made any figures yet!

Put your cursor in the pane labeled \emph{Console}, which is where you
interact with the live R process. Create a simple object with code
like \texttt{x\ \textless{}-\ 2\ *\ 4} (followed by enter or return). Then inspect the
\texttt{x} object by typing \texttt{x} followed by enter or return. You should see
the value \texttt{8} printed. If this happened, you've succeeded in
installing R and RStudio!

\hypertarget{install-latex-for-knitting-r-markdown-documents-to-pdf}{%
\section{Install LaTeX (for knitting R Markdown documents to PDF):}\label{install-latex-for-knitting-r-markdown-documents-to-pdf}}

You need a Latex compiler to create a pdf document from a R Markdown file. If you use the maize server, you don't need to install anything. If you are using a local RStudio, you should install a Latex compiler. Below are the recommended installers for Windows and Mac:

\begin{itemize}
\item
  \href{https://www.tug.org/mactex/}{MacTeX} for Mac (3.2GB)
\item
  \href{https://miktex.org/download}{MiKTeX} for Windows (190MB)
\item
  Alternatively, you can install the \texttt{tinytex} R package by running
  \texttt{install.packages("tinytex")} in the console.
\end{itemize}

\hypertarget{updating-rrstudio-not-needed-if-you-are-using-the-maize2-server}{%
\section{Updating R/RStudio (not needed if you are using the maize2 server)}\label{updating-rrstudio-not-needed-if-you-are-using-the-maize2-server}}

If you have used a local version of R/RStudio before and it is still installed on your machine, then you should make sure that you have the most recent versions of each program.

\begin{itemize}
\item
  To check your version of R, run the command \texttt{getRversion()} and compare your version to the newest version posted on \url{https://cran.r-project.org/}. If you need an update, then install the newer version using the installation directions above.
\item
  In RStudio, check for updates with the menu option \texttt{Help\ \textgreater{}\ Check\ for\ updates}. Follow directions if an update is needed.
\end{itemize}

\hypertarget{opening-a-new-file}{%
\section{Opening a new file}\label{opening-a-new-file}}

If using Rstudio on your computer, using the \textbf{File\textgreater Open File} menu to find and open this .Rmd file.

If using Maize Rstudio from your browser:

\begin{itemize}
\item
  In the Files tab, select \textbf{Upload} and \textbf{Choose File} to find the .Rmd that you downloaded. Click \emph{OK} to upload to your course folder/location in the maize server account.
\item
  Click on the .Rmd file in the appropriate folder to open the file.
\end{itemize}

\hypertarget{running-codes-and-knitting-.rmd-files}{%
\section{Running codes and knitting .Rmd files:}\label{running-codes-and-knitting-.rmd-files}}

\begin{itemize}
\item
  You can run a line of code by placing your cursor in the line of code and clicking \textbf{Run Selected Line(s)}
\item
  You can run an entire chunk by clicking the green triangle on the right side of the code chunk.
\item
  After each small edit or code addition, \textbf{Knit} your Markdown. If you wait until the end to Knit, it will be harder to find errors in your work.
\item
  Format output type: You can use any of pdf\_document, html\_document type, or word\_document type.
\item
  \textbf{Maize users}: You may also need to allow for ``pop-up'' in your web browser when knitting documents.
\end{itemize}

\hypertarget{few-more-instructions}{%
\section{Few More Instructions}\label{few-more-instructions}}

The default setting in Rstudio when you are running chunks is that the ``output'' (numbers, graphs) are
shown \textbf{inline} within the Markdown Rmd. If you prefer to have your plots appear on the right of the console and not below the chunk, then change the settings as follows:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Select Tools \textgreater{} Global Options.
\item
  Click the R Markdown section and uncheck (if needed) the option Show output inline for all
  R Markdown documents.
\item
  Click OK.
\end{enumerate}

Now try running R chunks in the .Rmd file to see the difference. You can recheck this box if you prefer
the default setting.

\hypertarget{vpn}{%
\section{VPN}\label{vpn}}

If you plan to do any work off campus this term, you need to install Carleton's VPN. This will allow you to access the \textbf{maize} server (if needed).

\textbf{Installing the GlobalProtect VPN}

Follow the directions \href{https://wiki.carleton.edu/display/itskb/GlobalProtect+VPN}{here} to install VPN.

\hypertarget{r-markdown-basics}{%
\chapter{R Markdown Basics}\label{r-markdown-basics}}

An R Markdown file (.Rmd file) combines R commands and written analyses, which are `knit' together into an HTML, PDF, or Microsoft Word document.

An R Markdown file contains three essential elements:

\begin{itemize}
\item
  Header: The header (top) of the file contains information like the document title, author, date and your preferred output format (pdf\_document, word\_document, or html\_document).
\item
  Written analysis: You write up your analysis after the header and embed R code where needed. The online help below shows ways to add formatting details like bold words, lists, section labels, etc to your final pdf/word/html document. For example, adding ** before and after a word will bold that word in your compiled document.
\item
  R chunks: R chunks contain the R commands that you want evaluated. You embed these chunks within your written analysis and they are evaluated when you compile the document.
\end{itemize}

Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see \url{http://rmarkdown.rstudio.com}.

\hypertarget{r-markdown-syntax}{%
\section{R Markdown Syntax}\label{r-markdown-syntax}}

\hypertarget{lists-in-r-markdown}{%
\subsection{Lists in R Markdown:}\label{lists-in-r-markdown}}

You can use asterisk mark to provide emphasis, such as \texttt{*italics*\ or\ **bold**}. You can create lists with a dash:

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{1}
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{2}
\SpecialCharTok{{-}}\NormalTok{ Item }\DecValTok{3}
  \SpecialCharTok{+}\NormalTok{ Subitem }\DecValTok{1}
\SpecialCharTok{*}\NormalTok{ Item }\DecValTok{4}
\end{Highlighting}
\end{Shaded}

to produce

\begin{itemize}
\tightlist
\item
  Item 1
\item
  Item 2
\item
  Item 3

  \begin{itemize}
  \tightlist
  \item
    Subitem 1
  \end{itemize}
\item
  Item 4
\end{itemize}

You can embed Latex equations in-line, \texttt{\$\textbackslash{}frac\{1\}\{n\}\ \textbackslash{}sum\_\{i=1\}\^{}\{n\}\ x\_\{i\}\$} to produce \(\frac{1}{n} \sum_{i=1}^{n} x_{i}\) or in a new line as \texttt{\$\$\textbackslash{}text\{Var\}(X)\ =\ \textbackslash{}frac\{1\}\{n-1\}\textbackslash{}sum\_\{i-1\}\^{}\{n\}\ (x\_\{i\}\ -\ \textbackslash{}bar\{x\})\^{}2\$\$} to produce \[\text{Var}(X) = \frac{1}{n-1}\sum_{i-1}^{n} (x_{i} - \bar{x})^2\]

\hypertarget{embed-an-r-code-chunk}{%
\subsection{Embed an R code chunk:}\label{embed-an-r-code-chunk}}

Use the following

\begin{verbatim}
```r
Use back ticks to 
create a block of code
```
\end{verbatim}

to produce:

\begin{verbatim}
Use back ticks to 
create a block of code
\end{verbatim}

You can also evaluate and display the results of R code. Each tasks can be accomplished in a suitably labeled chunk like the following:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(cars)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
     speed           dist       
 Min.   : 4.0   Min.   :  2.00  
 1st Qu.:12.0   1st Qu.: 26.00  
 Median :15.0   Median : 36.00  
 Mean   :15.4   Mean   : 42.98  
 3rd Qu.:19.0   3rd Qu.: 56.00  
 Max.   :25.0   Max.   :120.00  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fit }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(dist }\SpecialCharTok{\textasciitilde{}}\NormalTok{ speed, }\AttributeTok{data =}\NormalTok{ cars)}
\NormalTok{fit}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = dist ~ speed, data = cars)

Coefficients:
(Intercept)        speed  
    -17.579        3.932  
\end{verbatim}

\hypertarget{including-plots}{%
\subsection{Including Plots:}\label{including-plots}}

You can also embed plots. See Figure \ref{fig:pie} for example:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{par}\NormalTok{(}\AttributeTok{mar =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}
\FunctionTok{pie}\NormalTok{(}
  \FunctionTok{c}\NormalTok{(}\DecValTok{280}\NormalTok{, }\DecValTok{60}\NormalTok{, }\DecValTok{20}\NormalTok{),}
  \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}Sky\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Sunny side of pyramid\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Shady side of pyramid\textquotesingle{}}\NormalTok{),}
  \AttributeTok{col =} \FunctionTok{c}\NormalTok{(}\StringTok{\textquotesingle{}\#0292D8\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}\#F7EA39\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}\#C4B632\textquotesingle{}}\NormalTok{),}
  \AttributeTok{init.angle =} \SpecialCharTok{{-}}\DecValTok{50}\NormalTok{, }\AttributeTok{border =} \ConstantTok{NA}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{Rmarkdown_files/figure-latex/pie-1} \caption{A fancy pie chart.}\label{fig:pie}
\end{figure}

(Credit: Yihui Xie)

\hypertarget{read-in-data-files}{%
\subsection{Read in data files:}\label{read-in-data-files}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{simple\_data }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://deepbas.io/data/simple{-}1.dat"}\NormalTok{, )}
\FunctionTok{summary}\NormalTok{(simple\_data) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   initials            state                age      
 Length:3           Length:3           Min.   :45.0  
 Class :character   Class :character   1st Qu.:47.5  
 Mode  :character   Mode  :character   Median :50.0  
                                       Mean   :52.0  
                                       3rd Qu.:55.5  
                                       Max.   :61.0  
     time          
 Length:3          
 Class :character  
 Mode  :character  
                   
                   
                   
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{(simple\_data)}
\end{Highlighting}
\end{Shaded}

\begin{tabular}{l|l|r|l}
\hline
initials & state & age & time\\
\hline
vib & MA & 61 & 6:01\\
\hline
adc & TX & 45 & 5:45\\
\hline
kme & CT & 50 & 4:19\\
\hline
\end{tabular}

\hypertarget{hide-the-code}{%
\subsection{Hide the code:}\label{hide-the-code}}

If we enter the \texttt{echo\ =\ FALSE} option in the R chunk (see the .Rmd file). This prevents the R code from being printed to your document; you just see the results.

\begin{tabular}{l|l|r|l}
\hline
initials & state & age & time\\
\hline
vib & MA & 61 & 6:01\\
\hline
adc & TX & 45 & 5:45\\
\hline
kme & CT & 50 & 4:19\\
\hline
\end{tabular}

\hypertarget{helpful-r-codes}{%
\chapter{Helpful R codes}\label{helpful-r-codes}}

\hypertarget{residual-plots-in-ggplot2}{%
\section{\texorpdfstring{Residual Plots in \texttt{ggplot2}}{Residual Plots in ggplot2}}\label{residual-plots-in-ggplot2}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# residual size plot}
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{bac }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/BAC.csv"}\NormalTok{)}

\NormalTok{fit }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac) }\CommentTok{\# fit the model}
\NormalTok{bac}\SpecialCharTok{$}\NormalTok{predicted }\OtherTok{\textless{}{-}} \FunctionTok{predict}\NormalTok{(fit)   }\CommentTok{\# Save the predicted values}
\NormalTok{bac}\SpecialCharTok{$}\NormalTok{residuals }\OtherTok{\textless{}{-}} \FunctionTok{residuals}\NormalTok{(fit) }\CommentTok{\# Save the residual values}

\FunctionTok{ggplot}\NormalTok{(bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ BAC)) }\SpecialCharTok{+}
  \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{, }\AttributeTok{se =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{color =} \StringTok{"lightgrey"}\NormalTok{) }\SpecialCharTok{+}     \CommentTok{\# regression line  }
  \FunctionTok{geom\_segment}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{xend =}\NormalTok{ Beers, }\AttributeTok{yend =}\NormalTok{ predicted), }\AttributeTok{alpha =}\NormalTok{ .}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+}      \CommentTok{\# draw line from point to line}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =} \FunctionTok{abs}\NormalTok{(residuals), }\AttributeTok{size =} \FunctionTok{abs}\NormalTok{(residuals))) }\SpecialCharTok{+}  \CommentTok{\# size of the points}
  \FunctionTok{scale\_color\_continuous}\NormalTok{(}\AttributeTok{low =} \StringTok{"green"}\NormalTok{, }\AttributeTok{high =} \StringTok{"red"}\NormalTok{) }\SpecialCharTok{+}   
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"BAC Vs. Beers"}\NormalTok{) }\SpecialCharTok{+}\CommentTok{\# color of the points mapped to residual size {-} green smaller, red larger}
  \FunctionTok{guides}\NormalTok{(}\AttributeTok{color =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{size =} \ConstantTok{FALSE}\NormalTok{) }\SpecialCharTok{+}                             \CommentTok{\# Size legend removed}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{y =}\NormalTok{ predicted), }\AttributeTok{shape =} \DecValTok{1}\NormalTok{, }\AttributeTok{size =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{breaks=}\DecValTok{1}\SpecialCharTok{:}\DecValTok{9}\NormalTok{)}\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text=}\FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size=}\DecValTok{10}\NormalTok{),}
        \AttributeTok{axis.title=}\FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size=}\DecValTok{10}\NormalTok{,}\AttributeTok{face=}\StringTok{"bold"}\NormalTok{),}
        \AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{10}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Cool_R_codes_files/figure-latex/unnamed-chunk-1-1}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ residuals)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.position =} \StringTok{"none"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_segment}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{xend =}\NormalTok{ Beers, }\AttributeTok{yend =} \DecValTok{0}\NormalTok{), }\AttributeTok{alpha =}\NormalTok{ .}\DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_continuous}\NormalTok{(}\AttributeTok{low =} \StringTok{"green"}\NormalTok{, }\AttributeTok{high =} \StringTok{"red"}\NormalTok{) }\SpecialCharTok{+}   
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =} \FunctionTok{abs}\NormalTok{(residuals), }\AttributeTok{size =} \FunctionTok{abs}\NormalTok{(residuals))) }\SpecialCharTok{+}  \CommentTok{\# size of the points}
  \FunctionTok{geom\_hline}\NormalTok{(}\AttributeTok{yintercept =} \DecValTok{0}\NormalTok{, }\AttributeTok{col =} \StringTok{"blue"}\NormalTok{, }\AttributeTok{size =} \FloatTok{0.5}\NormalTok{, }\AttributeTok{linetype =} \StringTok{"dashed"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"BAC Vs. Beers"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Beers"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Residuals"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust=}\FloatTok{0.5}\NormalTok{, }\AttributeTok{size=}\DecValTok{7}\NormalTok{, }\AttributeTok{face=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Cool_R_codes_files/figure-latex/unnamed-chunk-2-1}

\hypertarget{plotly-codes}{%
\section{Plotly codes}\label{plotly-codes}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(plotly)}

\NormalTok{cell\_phone\_data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Type =} \FunctionTok{c}\NormalTok{(}\StringTok{"Android"}\NormalTok{, }\StringTok{"iPhone"}\NormalTok{, }\StringTok{"Blackberry"}\NormalTok{, }\StringTok{"Non Smartphone"}\NormalTok{, }\StringTok{"No Cell Phone"}\NormalTok{),}
  \AttributeTok{Frequency =} \FunctionTok{c}\NormalTok{(}\DecValTok{458}\NormalTok{, }\DecValTok{437}\NormalTok{, }\DecValTok{141}\NormalTok{, }\DecValTok{924}\NormalTok{, }\DecValTok{293}\NormalTok{)}
\NormalTok{)}

\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}
  \AttributeTok{Gender =} \FunctionTok{c}\NormalTok{(}\StringTok{"Female"}\NormalTok{, }\StringTok{"Male"}\NormalTok{),}
  \AttributeTok{In\_a\_relationship =} \FunctionTok{c}\NormalTok{(}\DecValTok{32}\NormalTok{, }\DecValTok{10}\NormalTok{),}
  \AttributeTok{Its\_complicated =} \FunctionTok{c}\NormalTok{(}\DecValTok{12}\NormalTok{, }\DecValTok{7}\NormalTok{),}
  \AttributeTok{Single =} \FunctionTok{c}\NormalTok{(}\DecValTok{63}\NormalTok{, }\DecValTok{45}\NormalTok{)}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot\_ly}\NormalTok{(cell\_phone\_data, }\AttributeTok{labels =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Type, }\AttributeTok{values =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Frequency, }\AttributeTok{type =} \StringTok{\textquotesingle{}pie\textquotesingle{}}\NormalTok{,}
        \AttributeTok{textposition =} \StringTok{\textquotesingle{}inside\textquotesingle{}}\NormalTok{, }\AttributeTok{hoverinfo =} \StringTok{\textquotesingle{}label+value+percent\textquotesingle{}}\NormalTok{,}
        \AttributeTok{textinfo =} \StringTok{\textquotesingle{}label\textquotesingle{}}\NormalTok{, }\AttributeTok{insidetextfont =} \FunctionTok{list}\NormalTok{(}\AttributeTok{color =} \StringTok{\textquotesingle{}\#FFFFFF\textquotesingle{}}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{layout}\NormalTok{(}\AttributeTok{title =} \StringTok{\textquotesingle{}Cell Phone Usage\textquotesingle{}}\NormalTok{,}
         \AttributeTok{xaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{showgrid =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{zeroline =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{showticklabels =} \ConstantTok{FALSE}\NormalTok{),}
         \AttributeTok{yaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{showgrid =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{zeroline =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{showticklabels =} \ConstantTok{FALSE}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{plot\_ly}\NormalTok{(data, }\AttributeTok{x =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Gender, }\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{In\_a\_relationship, }\AttributeTok{type =} \StringTok{\textquotesingle{}bar\textquotesingle{}}\NormalTok{, }\AttributeTok{name =} \StringTok{\textquotesingle{}In a relationship\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{add\_trace}\NormalTok{(}\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Its\_complicated, }\AttributeTok{name =} \StringTok{\textquotesingle{}It}\SpecialCharTok{\textbackslash{}\textquotesingle{}}\StringTok{s complicated\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{add\_trace}\NormalTok{(}\AttributeTok{y =} \SpecialCharTok{\textasciitilde{}}\NormalTok{Single, }\AttributeTok{name =} \StringTok{\textquotesingle{}Single\textquotesingle{}}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{layout}\NormalTok{(}\AttributeTok{yaxis =} \FunctionTok{list}\NormalTok{(}\AttributeTok{title =} \StringTok{\textquotesingle{}Number of People\textquotesingle{}}\NormalTok{), }\AttributeTok{barmode =} \StringTok{\textquotesingle{}group\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{homework-guidelines}{%
\chapter{Homework Guidelines}\label{homework-guidelines}}

\begin{itemize}
\tightlist
\item
  You \textbf{can} discuss homework problems with classmates, but you must write up \textbf{your own} homework solutions and \textbf{do your own work in R (no sharing commands or output) unless explicitly told otherwise}.
\item
  \textbf{Getting help}: You \textbf{can} use the following resources to complete your homework:

  \begin{itemize}
  \tightlist
  \item
    Carleton faculty (myself, other stat faculty, etc)
  \item
    Discussions with classmates (see above) or knowledgeable friends
  \item
    The math skills center
  \item
    Lab assistants (in CMC 304)
  \item
    Prefects
  \item
    Student solutions provided in the back of your student textbook or in the student solution manual
  \item
    It is okay to get coding help from prefects, tutors, classmates, online resources, but extra care should be done to write your own versions of the codes.
  \end{itemize}
\item
  You \textbf{cannot} use any resources other than the ones listed above to complete assignments (homework, reports, etc) for this class. E.g. you cannot use a friend's old assignments or reports, answers found on the internet, textbook (instructor) solutions manual, etc.
\end{itemize}

\hypertarget{format}{%
\section{Format}\label{format}}

\begin{itemize}
\tightlist
\item
  At the top of each assignment, provide the following details:

  \begin{itemize}
  \tightlist
  \item
    Class name (e.g., Stat xxx)
  \item
    Homework number (e.g., ``homework 1'')
  \item
    Your name
  \item
    The names of classmates that you worked with on all or part of the assignment
  \end{itemize}
\item
  Turn in a neat, \textbf{correctly ordered}, and \textbf{legible} assignment with no ragged edges. If it can't be read, it will not be graded.
\item
  \textbf{Staple} - no folded corners accepted!
\end{itemize}

\hypertarget{content}{%
\section{Content}\label{content}}

\begin{itemize}
\tightlist
\item
  You must \textbf{show all work} and formulas used to answer any question which requires a numerical answer. Be sure to show the natural sequence of work needed to answer the problem.
\item
  Use \textbf{complete sentences} when answering any problem that requires an explanation or overall problem summary.
\end{itemize}

\hypertarget{problems-using-r}{%
\section{Problems using R}\label{problems-using-r}}

\begin{itemize}
\tightlist
\item
  These problems must be written up as Word or pdf document using R Markdown.
\item
  \textbf{Label} all output with the problem number.
\item
  First \textbf{give your answer to a problem in written form}, never just give R output as your answer. Follow your written answer with your ``work'' which contains \textbf{all relevant R commands and output} (numeric output or graphs) that are needed to answer a homework problem. Do not include typos or unnecessary commands/output.
\end{itemize}

\hypertarget{graph-formatting}{%
\chapter{Graph Formatting}\label{graph-formatting}}

This worksheet provides a comprehensive guide on graph formatting in R using the ggplot2 package. We will explore various aspects of formatting, such as adding figure numbers, captions, titles, axes labels, customizing themes, and using different color scales.

\hypertarget{load-the-required-packages-and-datasets}{%
\section{Load the required packages and datasets}\label{load-the-required-packages-and-datasets}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{Cereals }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"http://people.carleton.edu/\textasciitilde{}kstclair/data/Cereals.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{graph-theme-and-colors}{%
\section{Graph theme and colors}\label{graph-theme-and-colors}}

\hypertarget{adding-figure-numbers-and-captions}{%
\subsection{Adding figure numbers and captions}\label{adding-figure-numbers-and-captions}}

To automatically add figure numbers and captions, include the option fig\_caption: true in the output options at the top of your markdown file. To add captions to the figures, use the fig.cap argument in the R code chunk that creates the figure.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(Cereals, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ calgram)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \FloatTok{0.3}\NormalTok{, }\AttributeTok{fill =} \StringTok{"skyblue"}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Histogram of Calorie Content in Cereals"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Calorie Content (g)"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-2-1} \caption{A nice figure}\label{fig:unnamed-chunk-2}
\end{figure}

\hypertarget{customizing-titles-axis-labels-and-legends}{%
\subsection{Customizing titles, axis labels, and legends}\label{customizing-titles-axis-labels-and-legends}}

You can customize titles, axis labels, and legends using the labs() function.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ diamonds, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ carat, }\AttributeTok{y =}\NormalTok{ price, }\AttributeTok{color =}\NormalTok{ cut)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{alpha =} \FloatTok{0.5}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Price vs. Carat of Diamonds"}\NormalTok{,}
       \AttributeTok{subtitle =} \StringTok{"Color represents the cut of the diamond"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Carat"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Price (USD)"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Diamond Cut"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-3-1}

\hypertarget{customizing-themes}{%
\subsection{Customizing themes}\label{customizing-themes}}

You can customize themes using the \texttt{theme()} function and various \texttt{element\_*()} functions.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(mtcars, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ hp, }\AttributeTok{y =}\NormalTok{ mpg)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Miles per Gallon vs. Horsepower"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Horsepower"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Miles per Gallon"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{16}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{color =} \StringTok{"darkblue"}\NormalTok{),}
        \AttributeTok{axis.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{12}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{, }\AttributeTok{color =} \StringTok{"darkblue"}\NormalTok{),}
        \AttributeTok{axis.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{10}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{),}
        \AttributeTok{panel.grid.major =} \FunctionTok{element\_line}\NormalTok{(}\AttributeTok{color =} \StringTok{"gray"}\NormalTok{, }\AttributeTok{size =} \FloatTok{0.5}\NormalTok{),}
        \AttributeTok{panel.grid.minor =} \FunctionTok{element\_line}\NormalTok{(}\AttributeTok{color =} \StringTok{"gray"}\NormalTok{, }\AttributeTok{size =} \FloatTok{0.25}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-4-1}

\hypertarget{using-different-color-scales}{%
\subsection{Using different color scales}\label{using-different-color-scales}}

You can use different color scales for both continuous and discrete variables using the \texttt{scale\_color\_*()} and \texttt{scale\_fill\_*()} functions.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ diamonds, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ carat, }\AttributeTok{y =}\NormalTok{ price, }\AttributeTok{color =}\NormalTok{ cut)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{alpha =} \FloatTok{0.5}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Price vs. Carat of Diamonds"}\NormalTok{,}
       \AttributeTok{subtitle =} \StringTok{"Color represents the cut of the diamond"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Carat"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Price (USD)"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Diamond Cut"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_brewer}\NormalTok{(}\AttributeTok{palette =} \StringTok{"Set1"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/fig4-1} \caption{Figure 4: Scatterplot of price vs. carat of diamonds with color representing the cut and custom color scale.}\label{fig:fig4}
\end{figure}

\hypertarget{customizing-plot-elements}{%
\subsection{Customizing plot elements}\label{customizing-plot-elements}}

You can customize plot elements such as points, lines, and bars using the corresponding geom\_*() functions and their arguments.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(mtcars, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ hp, }\AttributeTok{y =}\NormalTok{ mpg, }\AttributeTok{shape =} \FunctionTok{factor}\NormalTok{(gear), }\AttributeTok{size =}\NormalTok{ gear)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =} \FunctionTok{factor}\NormalTok{(gear))) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Miles per Gallon vs. Horsepower"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Horsepower"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Miles per Gallon"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Number of Gears"}\NormalTok{,}
       \AttributeTok{shape =} \StringTok{"Number of Gears"}\NormalTok{,}
       \AttributeTok{size =} \StringTok{"Number of Gears"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_shape\_manual}\NormalTok{(}\AttributeTok{values =} \FunctionTok{c}\NormalTok{(}\DecValTok{16}\NormalTok{, }\DecValTok{17}\NormalTok{, }\DecValTok{18}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{scale\_color\_brewer}\NormalTok{(}\AttributeTok{palette =} \StringTok{"Set2"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-5-1}

\hypertarget{faceting}{%
\subsection{Faceting}\label{faceting}}

You can create multiple plots based on a categorical variable using the f\texttt{acet\_wrap()} and \texttt{facet\_grid()} functions.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ diamonds }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(carat }\SpecialCharTok{\textless{}} \DecValTok{3}\NormalTok{), }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ carat, }\AttributeTok{y =}\NormalTok{ price)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =}\NormalTok{ clarity), }\AttributeTok{alpha =} \FloatTok{0.5}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Price vs. Carat of Diamonds"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Carat"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Price (USD)"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Clarity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{ cut, }\AttributeTok{ncol =} \DecValTok{2}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-6-1}

\hypertarget{graph-sizing-in-r}{%
\section{Graph Sizing in R}\label{graph-sizing-in-r}}

This worksheet demonstrates how to adjust the size of various plots in R using ggplot2. We will explore different techniques to control the size of the plots and their elements.

\hypertarget{load-the-necessary-libraries-and-data}{%
\subsection{Load the necessary libraries and data}\label{load-the-necessary-libraries-and-data}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{library}\NormalTok{(dplyr)}

\CommentTok{\# Load the built{-}in datasets}
\FunctionTok{data}\NormalTok{(}\StringTok{"mtcars"}\NormalTok{)}
\FunctionTok{data}\NormalTok{(}\StringTok{"diamonds"}\NormalTok{)}
\FunctionTok{data}\NormalTok{(}\StringTok{"iris"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{adjusting-the-overall-size-of-the-plot}{%
\subsection{Adjusting the overall size of the plot}\label{adjusting-the-overall-size-of-the-plot}}

You can control the overall size of the plot using the width and height options within the R Markdown output settings. Another way is to use the ggsave() function when saving the plot as an image file.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{scatter\_plot }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(mtcars, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ hp, }\AttributeTok{y =}\NormalTok{ mpg)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Miles per Gallon vs. Horsepower"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Horsepower"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Miles per Gallon"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{()}

\NormalTok{scatter\_plot}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-8-1}

\hypertarget{adjusting-the-size-of-points-lines-and-bars}{%
\subsection{Adjusting the size of points, lines, and bars}\label{adjusting-the-size-of-points-lines-and-bars}}

Use the size parameter within the geom\_*() functions to control the size of points, lines, and bars.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{scatter\_plot\_large\_points }\OtherTok{\textless{}{-}}\NormalTok{ scatter\_plot }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{3}\NormalTok{)}

\NormalTok{scatter\_plot\_large\_points}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-9-1}

\hypertarget{adjusting-the-size-of-text-elements}{%
\subsection{Adjusting the size of text elements}\label{adjusting-the-size-of-text-elements}}

You can change the size of text elements, such as axis labels and titles, using the theme() function.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{scatter\_plot\_custom\_text }\OtherTok{\textless{}{-}}\NormalTok{ scatter\_plot\_large\_points }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{24}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{),}
        \AttributeTok{axis.title.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{18}\NormalTok{),}
        \AttributeTok{axis.title.y =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{18}\NormalTok{),}
        \AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{14}\NormalTok{),}
        \AttributeTok{axis.text.y =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{14}\NormalTok{))}

\NormalTok{scatter\_plot\_custom\_text}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-10-1}

\hypertarget{adjusting-the-size-of-legend-elements}{%
\subsection{Adjusting the size of legend elements}\label{adjusting-the-size-of-legend-elements}}

You can modify the size of the legend elements using the theme() function along with element\_text() and element\_rect().

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{iris\_scatter\_plot }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(iris, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Sepal.Length, }\AttributeTok{y =}\NormalTok{ Sepal.Width, }\AttributeTok{color =}\NormalTok{ Species)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{size =} \DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Sepal Length vs. Sepal Width"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Sepal Length"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Sepal Width"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Species"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme\_minimal}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{legend.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{18}\NormalTok{),}
        \AttributeTok{legend.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{14}\NormalTok{),}
        \AttributeTok{legend.key.size =} \FunctionTok{unit}\NormalTok{(}\FloatTok{1.5}\NormalTok{, }\StringTok{"cm"}\NormalTok{))}

\NormalTok{iris\_scatter\_plot}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-11-1}

\hypertarget{adjusting-the-size-of-facet-labels}{%
\subsection{Adjusting the size of facet labels}\label{adjusting-the-size-of-facet-labels}}

You can control the size of facet labels using the theme() function along with element\_text().

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{diamonds\_facet\_plot }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ diamonds }\SpecialCharTok{\%\textgreater{}\%} \FunctionTok{filter}\NormalTok{(carat }\SpecialCharTok{\textless{}} \DecValTok{3}\NormalTok{), }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ carat, }\AttributeTok{y =}\NormalTok{ price)) }\SpecialCharTok{+}
\FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{alpha =} \FloatTok{0.5}\NormalTok{) }\SpecialCharTok{+}
\FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{cut) }\SpecialCharTok{+}
\FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Price vs. Carat of Diamonds, Faceted by Cut"}\NormalTok{,}
\AttributeTok{x =} \StringTok{"Carat"}\NormalTok{,}
\AttributeTok{y =} \StringTok{"Price"}\NormalTok{) }\SpecialCharTok{+}
\FunctionTok{theme\_minimal}\NormalTok{() }\SpecialCharTok{+}
\FunctionTok{theme}\NormalTok{(}\AttributeTok{strip.text =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{size =} \DecValTok{18}\NormalTok{, }\AttributeTok{face =} \StringTok{"bold"}\NormalTok{))}

\NormalTok{diamonds\_facet\_plot}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-12-1}

\hypertarget{adjusting-the-size-of-axis-ticks}{%
\subsection{Adjusting the size of axis ticks}\label{adjusting-the-size-of-axis-ticks}}

You can modify the size of axis ticks using the \texttt{theme()} function along with \texttt{element\_line()}.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{scatter\_plot\_custom\_ticks }\OtherTok{\textless{}{-}}\NormalTok{ scatter\_plot }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.ticks =} \FunctionTok{element\_line}\NormalTok{(}\AttributeTok{size =} \FloatTok{1.5}\NormalTok{),}
        \AttributeTok{axis.ticks.length =} \FunctionTok{unit}\NormalTok{(}\FloatTok{0.3}\NormalTok{, }\StringTok{"cm"}\NormalTok{))}

\NormalTok{scatter\_plot\_custom\_ticks}
\end{Highlighting}
\end{Shaded}

\begin{figure}
\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/fig6-1} \caption{Figure 6: Scatterplot of mpg vs. hp with customized axis tick size.}\label{fig:fig6}
\end{figure}

\hypertarget{adding-text-labels-to-points}{%
\subsection{Adding text labels to points}\label{adding-text-labels-to-points}}

Use the geom\_text() or geom\_label() functions to add text labels to points.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mtcars}\SpecialCharTok{$}\NormalTok{car\_name }\OtherTok{\textless{}{-}} \FunctionTok{rownames}\NormalTok{(mtcars)}

\NormalTok{scatter\_plot\_labels }\OtherTok{\textless{}{-}} \FunctionTok{ggplot}\NormalTok{(mtcars, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ wt, }\AttributeTok{y =}\NormalTok{ mpg)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{color =}\NormalTok{ gear)) }\SpecialCharTok{+}
  \FunctionTok{geom\_text}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{label =}\NormalTok{ car\_name), }\AttributeTok{check\_overlap =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{vjust =} \FloatTok{1.5}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Scatter plot of MPG vs Weight with Car Labels"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"Weight"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Miles Per Gallon"}\NormalTok{,}
       \AttributeTok{color =} \StringTok{"Gears"}\NormalTok{)}

\NormalTok{scatter\_plot\_labels}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-13-1}

\hypertarget{modifying-axis-limits-and-scales}{%
\subsection{Modifying axis limits and scales}\label{modifying-axis-limits-and-scales}}

Use scale\_x\_continuous() and scale\_y\_continuous() to modify axis limits and scales.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(}\StringTok{"gapminder"}\NormalTok{, }\AttributeTok{package =} \StringTok{"gapminder"}\NormalTok{)}

\FunctionTok{ggplot}\NormalTok{(gapminder, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ gdpPercap, }\AttributeTok{y =}\NormalTok{ lifeExp, }\AttributeTok{color =}\NormalTok{ continent)) }\SpecialCharTok{+}
  \FunctionTok{geom\_point}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_log10}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{500}\NormalTok{, }\DecValTok{50000}\NormalTok{), }\AttributeTok{breaks =} \FunctionTok{c}\NormalTok{(}\DecValTok{1000}\NormalTok{, }\DecValTok{10000}\NormalTok{, }\DecValTok{30000}\NormalTok{), }\AttributeTok{labels =}\NormalTok{ scales}\SpecialCharTok{::}\FunctionTok{dollar\_format}\NormalTok{()) }\SpecialCharTok{+}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{20}\NormalTok{, }\DecValTok{90}\NormalTok{), }\AttributeTok{breaks =} \FunctionTok{seq}\NormalTok{(}\DecValTok{20}\NormalTok{, }\DecValTok{90}\NormalTok{, }\DecValTok{10}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Life Expectancy vs. GDP per Capita"}\NormalTok{,}
       \AttributeTok{x =} \StringTok{"GDP per Capita (log scale)"}\NormalTok{,}
       \AttributeTok{y =} \StringTok{"Life Expectancy"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{graphformatting_files/figure-latex/unnamed-chunk-14-1}

\hypertarget{table-formatting}{%
\chapter{Table Formatting}\label{table-formatting}}

In this worksheet, we will explore various options for outputting and formatting tables in R using the RMarkdown environment.

\hypertarget{basic-table-formatting-with-kable}{%
\subsection{\texorpdfstring{Basic Table Formatting with \texttt{kable}}{Basic Table Formatting with kable}}\label{basic-table-formatting-with-kable}}

The \texttt{kable()} function from the knitr package provides a simple way to output tables in RMarkdown.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(knitr)}
\FunctionTok{kable}\NormalTok{(mtcars[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{], }\AttributeTok{caption =} \StringTok{"A basic table using kable"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-1}A basic table using kable}
\centering
\begin{tabular}[t]{l|r|r|r|r|r}
\hline
  & mpg & cyl & disp & hp & drat\\
\hline
Mazda RX4 & 21.0 & 6 & 160 & 110 & 3.90\\
\hline
Mazda RX4 Wag & 21.0 & 6 & 160 & 110 & 3.90\\
\hline
Datsun 710 & 22.8 & 4 & 108 & 93 & 3.85\\
\hline
Hornet 4 Drive & 21.4 & 6 & 258 & 110 & 3.08\\
\hline
Hornet Sportabout & 18.7 & 8 & 360 & 175 & 3.15\\
\hline
\end{tabular}
\end{table}

We will also use the \texttt{Gapminder} dataset for our examples. This dataset contains information about life expectancy, GDP per capita, and population size for various countries and years.Here's an example of how to display the first 10 rows of the \texttt{Gapminder} dataset.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{data}\NormalTok{(}\StringTok{"gapminder"}\NormalTok{, }\AttributeTok{package =} \StringTok{"gapminder"}\NormalTok{)}
\NormalTok{knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{(}\FunctionTok{head}\NormalTok{(gapminder, }\DecValTok{10}\NormalTok{), }\AttributeTok{caption =} \StringTok{"Table 1: First 10 rows of the Gapminder dataset."}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-2}Table 1: First 10 rows of the Gapminder dataset.}
\centering
\begin{tabular}[t]{l|l|r|r|r|r}
\hline
country & continent & year & lifeExp & pop & gdpPercap\\
\hline
Afghanistan & Asia & 1952 & 28.801 & 8425333 & 779.4453\\
\hline
Afghanistan & Asia & 1957 & 30.332 & 9240934 & 820.8530\\
\hline
Afghanistan & Asia & 1962 & 31.997 & 10267083 & 853.1007\\
\hline
Afghanistan & Asia & 1967 & 34.020 & 11537966 & 836.1971\\
\hline
Afghanistan & Asia & 1972 & 36.088 & 13079460 & 739.9811\\
\hline
Afghanistan & Asia & 1977 & 38.438 & 14880372 & 786.1134\\
\hline
Afghanistan & Asia & 1982 & 39.854 & 12881816 & 978.0114\\
\hline
Afghanistan & Asia & 1987 & 40.822 & 13867957 & 852.3959\\
\hline
Afghanistan & Asia & 1992 & 41.674 & 16317921 & 649.3414\\
\hline
Afghanistan & Asia & 1997 & 41.763 & 22227415 & 635.3414\\
\hline
\end{tabular}
\end{table}

\hypertarget{formatting-tables-with-kableextra}{%
\subsection{\texorpdfstring{Formatting Tables with \texttt{kableExtra}}{Formatting Tables with kableExtra}}\label{formatting-tables-with-kableextra}}

To further customize the table appearance, we can use the \texttt{kableExtra} package.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("kableExtra") }
\FunctionTok{library}\NormalTok{(kableExtra)}
\FunctionTok{kable}\NormalTok{(mtcars[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{], }\AttributeTok{caption =} \StringTok{"A formatted table with kableExtra"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{kable\_styling}\NormalTok{(}\StringTok{"striped"}\NormalTok{, }\AttributeTok{full\_width =}\NormalTok{ F)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-3}A formatted table with kableExtra}
\centering
\begin{tabular}[t]{l|r|r|r|r|r}
\hline
  & mpg & cyl & disp & hp & drat\\
\hline
Mazda RX4 & 21.0 & 6 & 160 & 110 & 3.90\\
\hline
Mazda RX4 Wag & 21.0 & 6 & 160 & 110 & 3.90\\
\hline
Datsun 710 & 22.8 & 4 & 108 & 93 & 3.85\\
\hline
Hornet 4 Drive & 21.4 & 6 & 258 & 110 & 3.08\\
\hline
Hornet Sportabout & 18.7 & 8 & 360 & 175 & 3.15\\
\hline
\end{tabular}
\end{table}

\hypertarget{customizing-column-formats}{%
\subsection{Customizing column formats}\label{customizing-column-formats}}

Use the \texttt{column\_spec()} function from the \texttt{kableExtra} package to customize the appearance of individual columns.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{gapminder }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{head}\NormalTok{(}\DecValTok{10}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  knitr}\SpecialCharTok{::}\FunctionTok{kable}\NormalTok{(}\AttributeTok{caption =} \StringTok{"Table 3: First 10 rows of the Gapminder dataset with custom column formatting."}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  kableExtra}\SpecialCharTok{::}\FunctionTok{kable\_styling}\NormalTok{(}\StringTok{"striped"}\NormalTok{, }\AttributeTok{full\_width =}\NormalTok{ F) }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  kableExtra}\SpecialCharTok{::}\FunctionTok{column\_spec}\NormalTok{(}\DecValTok{2}\NormalTok{, }\AttributeTok{bold =} \ConstantTok{TRUE}\NormalTok{, }\AttributeTok{color =} \StringTok{"red"}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%}
\NormalTok{  kableExtra}\SpecialCharTok{::}\FunctionTok{column\_spec}\NormalTok{(}\DecValTok{4}\NormalTok{, }\AttributeTok{monospace =} \ConstantTok{TRUE}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{table}

\caption{\label{tab:unnamed-chunk-4}Table 3: First 10 rows of the Gapminder dataset with custom column formatting.}
\centering
\begin{tabular}[t]{l|>{}l|r|>{}r|r|r}
\hline
country & continent & year & lifeExp & pop & gdpPercap\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1952 & \ttfamily{28.801} & 8425333 & 779.4453\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1957 & \ttfamily{30.332} & 9240934 & 820.8530\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1962 & \ttfamily{31.997} & 10267083 & 853.1007\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1967 & \ttfamily{34.020} & 11537966 & 836.1971\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1972 & \ttfamily{36.088} & 13079460 & 739.9811\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1977 & \ttfamily{38.438} & 14880372 & 786.1134\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1982 & \ttfamily{39.854} & 12881816 & 978.0114\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1987 & \ttfamily{40.822} & 13867957 & 852.3959\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1992 & \ttfamily{41.674} & 16317921 & 649.3414\\
\hline
Afghanistan & \textcolor{red}{\textbf{Asia}} & 1997 & \ttfamily{41.763} & 22227415 & 635.3414\\
\hline
\end{tabular}
\end{table}

\hypertarget{formatting-tables-with-flextable}{%
\subsection{Formatting Tables with flextable}\label{formatting-tables-with-flextable}}

Another option for table formatting is the flextable package.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("flextable")}
\FunctionTok{library}\NormalTok{(flextable)}
\NormalTok{ft }\OtherTok{\textless{}{-}} \FunctionTok{flextable}\NormalTok{(mtcars[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{])}
\NormalTok{ft }\OtherTok{\textless{}{-}} \FunctionTok{set\_caption}\NormalTok{(ft, }\AttributeTok{caption =} \StringTok{"A table using flextable"}\NormalTok{)}
\NormalTok{ft}
\end{Highlighting}
\end{Shaded}

\global\setlength{\Oldarrayrulewidth}{\arrayrulewidth}

\global\setlength{\Oldtabcolsep}{\tabcolsep}

\setlength{\tabcolsep}{0pt}

\renewcommand*{\arraystretch}{1.5}



\providecommand{\ascline}[3]{\noalign{\global\arrayrulewidth #1}\arrayrulecolor[HTML]{#2}\cline{#3}}

\begin{longtable}[c]{|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}|p{0.75in}}

\caption{A\ table\ using\ flextable}\label{tab:unnamed-chunk-5}\\

\ascline{1.5pt}{666666}{1-5}

\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{mpg}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{cyl}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{disp}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{hp}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{drat}}}} \\

\ascline{1.5pt}{666666}{1-5}\endhead



\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{21.0}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{6}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{160}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{110}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{3.90}}}} \\





\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{21.0}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{6}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{160}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{110}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{3.90}}}} \\





\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{22.8}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{4}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{108}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{93}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{3.85}}}} \\





\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{21.4}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{6}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{258}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{110}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{3.08}}}} \\





\multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{18.7}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{8}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{360}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{175}}}} & \multicolumn{1}{>{\raggedleft}m{\dimexpr 0.75in+0\tabcolsep}}{\textcolor[HTML]{000000}{\fontsize{11}{11}\selectfont{\global\setmainfont{DejaVu Sans}{3.15}}}} \\

\ascline{1.5pt}{666666}{1-5}



\end{longtable}



\arrayrulecolor[HTML]{000000}

\global\setlength{\arrayrulewidth}{\Oldarrayrulewidth}

\global\setlength{\tabcolsep}{\Oldtabcolsep}

\renewcommand*{\arraystretch}{1}

\hypertarget{formatting-tables-with-gt}{%
\subsection{Formatting Tables with gt}\label{formatting-tables-with-gt}}

The gt package provides another way to create formatted tables in R.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("gt")}
\FunctionTok{library}\NormalTok{(gt)}
\FunctionTok{gt}\NormalTok{(mtcars[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{, }\DecValTok{1}\SpecialCharTok{:}\DecValTok{5}\NormalTok{]) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{tab\_header}\NormalTok{(}\AttributeTok{title =} \StringTok{"A table using gt"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}{rrrrr}
\caption*{
{\large A table using gt}
} \\ 
\toprule
mpg & cyl & disp & hp & drat \\ 
\midrule
21.0 & 6 & 160 & 110 & 3.90 \\ 
21.0 & 6 & 160 & 110 & 3.90 \\ 
22.8 & 4 & 108 & 93 & 3.85 \\ 
21.4 & 6 & 258 & 110 & 3.08 \\ 
18.7 & 8 & 360 & 175 & 3.15 \\ 
\bottomrule
\end{longtable}

\hypertarget{hiding-r-commands-and-r-output}{%
\subsection{Hiding R commands and R output}\label{hiding-r-commands-and-r-output}}

As mentioned in the graph formatting handout, adding the chunk option echo=FALSE will display output (like graphs) produced by a chunk but not show the commands used in the chunk. You can stop both R commands and output from being displayed in a document by adding the chunk option include=FALSE.

As you work through a report analysis, you may initially want to see all of your R results as you are writing your report. But after you've summarized results in paragraphs or in tables, you can then use the include=FALSE argument to hide your R commands and output in your final document. If you ever need to rerun or reevaluate your R work for a report, you can easily recreate and edit your analysis since the R chunks used in your original report are still in your R Markdown .Rmd file.

\hypertarget{summary-statistics-with-pander}{%
\subsection{Summary statistics with pander}\label{summary-statistics-with-pander}}

We can use the pander package to create summary tables.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\#install.packages("pander")}
\FunctionTok{library}\NormalTok{(pander)}
\FunctionTok{pander}\NormalTok{(}\FunctionTok{summary}\NormalTok{(mtcars}\SpecialCharTok{$}\NormalTok{mpg), }\AttributeTok{caption =} \StringTok{"Summary statistics for miles per gallon"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0972}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1389}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1250}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1111}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.1389}}
  >{\centering\arraybackslash}p{(\columnwidth - 10\tabcolsep) * \real{0.0972}}@{}}
\caption{Summary statistics for miles per gallon}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Min.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
1st Qu.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Median
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Mean
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
3rd Qu.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Max.
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Min.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
1st Qu.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Median
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Mean
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
3rd Qu.
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Max.
\end{minipage} \\
\midrule()
\endhead
10.4 & 15.43 & 19.2 & 20.09 & 22.8 & 33.9 \\
\bottomrule()
\end{longtable}

\hypertarget{t-test-results-with-pander}{%
\subsection{t-test results with pander}\label{t-test-results-with-pander}}

Let's perform a t-test comparing the miles per gallon (mpg) for cars with 4 and 6 cylinders.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{t\_test\_result }\OtherTok{\textless{}{-}} \FunctionTok{t.test}\NormalTok{(mpg }\SpecialCharTok{\textasciitilde{}} \FunctionTok{as.factor}\NormalTok{(cyl), }\AttributeTok{data =}\NormalTok{ mtcars, }\AttributeTok{subset =}\NormalTok{ cyl }\SpecialCharTok{\%in\%} \FunctionTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{6}\NormalTok{))}
\FunctionTok{pander}\NormalTok{(t\_test\_result, }\AttributeTok{caption =} \StringTok{"Comparing MPG for 4 and 6 cylinder cars"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2361}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.1111}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 6\tabcolsep) * \real{0.3472}}@{}}
\caption{Comparing MPG for 4 and 6 cylinder cars (continued below)}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Test statistic
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
df
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
P value
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Alternative hypothesis
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Test statistic
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
df
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
P value
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Alternative hypothesis
\end{minipage} \\
\midrule()
\endhead
4.719 & 12.96 & 0.0004048 * * * & two.sided \\
\bottomrule()
\end{longtable}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 2\tabcolsep) * \real{0.2500}}@{}}
\toprule()
\begin{minipage}[b]{\linewidth}\centering
mean in group 4
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
mean in group 6
\end{minipage} \\
\midrule()
\endhead
26.66 & 19.74 \\
\bottomrule()
\end{longtable}

\hypertarget{chi-square-test-results-with-pander}{%
\subsection{Chi-square test results with pander}\label{chi-square-test-results-with-pander}}

Now let's perform a chi-square test to check for an association between the number of cylinders and the type of transmission (automatic or manual).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_table }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(mtcars}\SpecialCharTok{$}\NormalTok{cyl, mtcars}\SpecialCharTok{$}\NormalTok{am)}
\NormalTok{chisq\_test\_result }\OtherTok{\textless{}{-}} \FunctionTok{chisq.test}\NormalTok{(my\_table)}
\FunctionTok{pander}\NormalTok{(chisq\_test\_result, }\AttributeTok{caption =} \StringTok{"Chi{-}square test for cylinders and transmission type"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.2361}}
  >{\centering\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.0694}}
  >{\centering\arraybackslash}p{(\columnwidth - 4\tabcolsep) * \real{0.1667}}@{}}
\caption{Chi-square test for cylinders and transmission type}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Test statistic
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
df
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
P value
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\centering
Test statistic
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
df
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
P value
\end{minipage} \\
\midrule()
\endhead
8.741 & 2 & 0.01265 * \\
\bottomrule()
\end{longtable}

\hypertarget{linear-regression-results-with-pander}{%
\subsection{Linear regression results with pander}\label{linear-regression-results-with-pander}}

Finally, let's fit a linear regression model of miles per gallon (mpg) as a function of weight (wt) and display the results.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{lm\_result }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(mpg }\SpecialCharTok{\textasciitilde{}}\NormalTok{ wt, }\AttributeTok{data =}\NormalTok{ mtcars)}
\FunctionTok{pander}\NormalTok{(lm\_result, }\AttributeTok{caption =} \StringTok{"Linear regression of MPG on weight"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.2500}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1528}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1806}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1389}}
  >{\centering\arraybackslash}p{(\columnwidth - 8\tabcolsep) * \real{0.1667}}@{}}
\caption{Linear regression of MPG on weight}\tabularnewline
\toprule()
\begin{minipage}[b]{\linewidth}\centering
~
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Estimate
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Std. Error
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t value
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Pr(\textgreater\textbar t\textbar)
\end{minipage} \\
\midrule()
\endfirsthead
\toprule()
\begin{minipage}[b]{\linewidth}\centering
~
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Estimate
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Std. Error
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
t value
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Pr(\textgreater\textbar t\textbar)
\end{minipage} \\
\midrule()
\endhead
\textbf{(Intercept)} & 37.29 & 1.878 & 19.86 & 8.242e-19 \\
\textbf{wt} & -5.344 & 0.5591 & -9.559 & 1.294e-10 \\
\bottomrule()
\end{longtable}

\hypertarget{report-guidelines}{%
\chapter{Report Guidelines}\label{report-guidelines}}

The data analysis report that you will be writing for this class will ask two things of you:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  use appropriate statistical methods to answer research questions and
\item
  clearly and concisely communicate the meaning of your statistics and graphs to a \textbf{reader} who has a basic knowledge of statistics.
\end{enumerate}

Your report should be organized, well-written with proper use of grammar, and contain sound reasoning and correct interpretations of statistical evidence. Also include \emph{at least one} graphical display of your data on the body of your report. Be sure to hide the code used to produce it!

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\item
  Your lab reports should be organized into the following sections:

  \begin{itemize}
  \tightlist
  \item
    \textbf{Introduction:} describe the data and your research questions
  \item
    \textbf{Results:} describe your statistical analysis and interpret your graphs and numbers
  \item
    \textbf{Discussion:} summarize your findings and answer your research questions, describe any limitations of
    your analysis
  \item
    \textbf{Technical Appendix:} Staple all relevant R commands and output to the end of your written report. Only including commands without output is not enough. You must appropriately comment your code (telling me what each section of code is doing), and edit your code and output (no typos or errors allowed).
  \end{itemize}
\item
  Type your report in Word/Google doc (or similar software) and use R (not Excel, Statkey or other software) for your analysis. You can also use R Markdown to write up your reports but you need to take care to only include labeled and numbered graphical output from R in the main document. Commands and numerical output should be placed in the Technical Appendix. If you are interested in using Markdown talk to me for hints on its use for reports.
\item
  Carefully decide \textbf{appropriate graphs and numbers} to include. There is no need to show the same data in different forms (e.g.~no need to show both a histogram and boxplot for the same variable). You also don't need to include all numbers given in R output if you only use a few in your analysis. You also don't need to ``show'' (or prove) skewness or outliers using numbers, just use your graphs to display skewness or outliers.
\item
  \textbf{Interpret} and give meaning to \textbf{all} graphs and numbers that you choose to include in your report. Do not include algebraic calculations or too much technical detail.
\item
  \textbf{Including Numbers:} \textbf{Never include R numerical output or commands}. Summarize needed output in a nicely formatted Word table or just integrate numbers into your writing. In you include tables, label them numerically (Table 1, Table 2, etc) and give each a title. Number in order of how they appear in the paper and refer to these tables by their number (``Table 1 displays summary statistics for income.'').
\item
  \textbf{Including Graphs:} Resize all graphs appropriately so they fit nicely into your written report. Large graphs that take up most of a page with no, or very little, writing on the page impede the flow of the report and reduce its readability. Label all graphs numerically (Figure 1, etc.) as they occur in the paper, give each a title and refer to by number. See the stats lab manual chapter 1 if you need help copying plots into a Word/google doc.
\item
  \textbf{Do not explain every step taken in your study.} For example, there is no need to include a statement such as ``I used R to create a histogram of income and observed that the distribution was right skewed''. Instead just say ``The distribution of income is skewed to the right (Figure 1)``.
\item
  Avoid using weak phrases like ``The average height of men is higher than the average for women.'' \textbf{Use numbers to bolster your explanation:} ``The average height of men is three inches more than the average for women (68.5 vs.~65.5 inches).''
\item
  The \textbf{precision} of your data should dictate the precision of your statistics. In general, your statistics can have one to two more significant digits than your data. For example, if height is recorded to the nearest inch then the mean height should be reported as 65.5 (or 65.49) rather than the R value of 65.49268.
\item
  Sometimes a question posed in a study is \textbf{ambiguous} and there may be more than one way to correctly answer to the question. In grading your reports and paper, \textbf{I am most concerned with the logic of your conclusions and how you support your claim using data and statistical evidence.}
\end{enumerate}

\hypertarget{part-class-activity}{%
\part*{Class Activity}\label{part-class-activity}}
\addcontentsline{toc}{part}{Class Activity}

\hypertarget{class-activity-1}{%
\chapter{Class Activity 1}\label{class-activity-1}}

\hypertarget{your-turn-1}{%
\section{Your Turn 1}\label{your-turn-1}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Run the following chunk. Comment on the output.
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{example\_data }\OtherTok{=} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{ID =} \FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{4}\NormalTok{, }\DecValTok{5}\NormalTok{, }\DecValTok{6}\NormalTok{, }\DecValTok{7}\NormalTok{, }\DecValTok{8}\NormalTok{, }\DecValTok{9}\NormalTok{, }\DecValTok{10}\NormalTok{),}
                          \AttributeTok{Greeting =} \FunctionTok{c}\NormalTok{(}\FunctionTok{rep}\NormalTok{(}\StringTok{"Hello"}\NormalTok{, }\DecValTok{5}\NormalTok{), }\FunctionTok{rep}\NormalTok{(}\StringTok{"Goodbye"}\NormalTok{,}\DecValTok{5}\NormalTok{)),}
                          \AttributeTok{Male =} \FunctionTok{rep}\NormalTok{(}\FunctionTok{c}\NormalTok{(}\ConstantTok{TRUE}\NormalTok{, }\ConstantTok{FALSE}\NormalTok{), }\DecValTok{5}\NormalTok{),}
                          \AttributeTok{Weight =} \FunctionTok{runif}\NormalTok{(}\AttributeTok{n=}\DecValTok{10}\NormalTok{, }\DecValTok{50}\NormalTok{, }\DecValTok{300}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{example\_data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   ID Greeting  Male    Weight
1   1    Hello  TRUE 252.62047
2   2    Hello FALSE  80.30435
3   3    Hello  TRUE 244.23281
4   4    Hello FALSE 203.75939
5   5    Hello  TRUE 160.39213
6   6  Goodbye FALSE 136.89868
7   7  Goodbye  TRUE 218.34196
8   8  Goodbye FALSE 116.67753
9   9  Goodbye  TRUE 230.88870
10 10  Goodbye FALSE 181.40428
\end{verbatim}

\emph{Answer:} We see a data frame with four columns, where the first column is an \texttt{identifier} for the cases. We have information on the greeting types, whether male or not, and weight on these cases in the remaining columns.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  What is the dimension of the dataset called `example\_data'?
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(example\_data)}
\NormalTok{[}\DecValTok{1}\NormalTok{] }\DecValTok{10}  \DecValTok{4}
\FunctionTok{nrow}\NormalTok{(example\_data)}
\NormalTok{[}\DecValTok{1}\NormalTok{] }\DecValTok{10}
\FunctionTok{ncol}\NormalTok{(example\_data)}
\NormalTok{[}\DecValTok{1}\NormalTok{] }\DecValTok{4}
\end{Highlighting}
\end{Shaded}

\emph{Answer:} There are 10 rows and 4 columns.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{your-turn-2}{%
\section{Your Turn 2}\label{your-turn-2}}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Read the dataset \texttt{EducationLiteracy} from the \href{https://www.lock5stat.com/datapage2e.html}{Lock5} second edition book.
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# read in the data}
\FunctionTok{library}\NormalTok{(readr)}
\NormalTok{education\_lock5 }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://www.lock5stat.com/datasets2e/EducationLiteracy.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Print the header (i.e.~first 6 cases by default) of the dataset in part a.
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{head}\NormalTok{(education\_lock5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 3
  Country             EducationExpenditure Literacy
  <chr>                              <dbl>    <dbl>
1 Afghanistan                          3.1     31.7
2 Albania                              3.2     96.8
3 Algeria                              4.3     NA  
4 Andorra                              3.2     NA  
5 Angola                               3.5     70.6
6 Antigua and Barbuda                  2.6     99  
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  What is the dimension of the dataset in a?
\end{enumerate}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(education\_lock5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 188   3
\end{verbatim}

\emph{Answer:} There are 188 rows and 3 columns.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  What type of variables are \texttt{Country}, \texttt{EducationExpenditure}, and \texttt{Literacy}?
\end{enumerate}

Click for answer

\emph{Answer:} \texttt{Country} is a categorical variable. \texttt{EducationExpenditure} and \texttt{Literacy} are both quantitative variables.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{4}
\tightlist
\item
  If we would like to use education expenditure to predict the literacy rate of each countries, which variable is the explanatory variable and which one is the response?
\end{enumerate}

Click for answer

\emph{Answer:} The education expenditure is the explanatory variable, and the literacy rate is the response.

\hypertarget{class-activity-2}{%
\chapter{Class Activity 2}\label{class-activity-2}}

\hypertarget{your-turn-1-1}{%
\section{Your Turn 1}\label{your-turn-1-1}}

\hypertarget{summary-of-article-on-it-depends-on-how-you-ask}{%
\subsection{\texorpdfstring{Summary of article on \href{https://jech.bmj.com/content/75/4/387.abstract}{It depends on how you ask!}}{Summary of article on It depends on how you ask!}}\label{summary-of-article-on-it-depends-on-how-you-ask}}

Click for answer

\emph{Answer:}

This study aimed to measure the effects of psychological biases on estimates of compliance with public health guidance regarding COVID-19. Results showed that compliance estimates were reduced when questions were framed negatively and anonymity was increased. Effect sizes were large, with compliance estimates diminishing by up to 17\% points and 10\% points, respectively. These findings suggest that standard tracking surveys pose questions in ways that lead to higher compliance estimates than alternative approaches.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{your-turn-2-1}{%
\section{Your Turn 2}\label{your-turn-2-1}}

\hypertarget{gettysburg-random-sample}{%
\subsection{Gettysburg random sample}\label{gettysburg-random-sample}}

Let's take a simple random sample (SRS) of Gettysburg words. The ``population'' is contained in the
spreadsheet \texttt{GettysburgPopulationCounts.csv}. Carefully load this data into R:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pop }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/GettysbergPopulationCounts.csv"}\NormalTok{)}
\FunctionTok{head}\NormalTok{(pop)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  position size  word
1        1    4  Four
2        2    5 score
3        3    3   and
4        4    5 seven
5        5    5 years
6        6    3  ago,
\end{verbatim}

The \texttt{position} variable enumerates the list of words in the population (address).

(a). Sample

Run the following command to obtain a SRS of 10 words from the 268 that are in the population:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{samp }\OtherTok{\textless{}{-}} \FunctionTok{sample}\NormalTok{(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{268}\NormalTok{, }\AttributeTok{size=}\DecValTok{10}\NormalTok{)}
\NormalTok{samp}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 [1] 146 225  78  39 219 209 198  34   6 246
\end{verbatim}

This tells you the position (row number) of your sampled words. What are your sampled positions? Why are your sampled positions different from other folks in class?

(b). Get words and lengths

We will \emph{subset} the data set \texttt{pop} to obtain only the sampled rows listed in \texttt{samp}. We do this using \textbf{square bracket notation} `dataset{[}row number, column number/name{]}. Run the following command to find your sampled words and sizes:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pop[samp,]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
    position size    word
146      146    4    long
225      225    4    that
78        78    7 resting
39        39    3    war,
219      219    3     the
209      209    4    take
198      198    5   great
34        34    7 engaged
6          6    3    ago,
246      246    1       a
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  Compute your sample mean
\end{enumerate}

The word lengths in part (b) are the data for your sample. You can compute your sample mean using a calculator, or using R. Let's try R (you will find it faster!). First save the quantitative variable \texttt{size} in a new variable called \texttt{mysize}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mysize }\OtherTok{\textless{}{-}}\NormalTok{ pop[samp, }\StringTok{"size"}\NormalTok{]}
\NormalTok{mysize}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 [1] 4 4 7 3 3 4 5 7 3 1
\end{verbatim}

Then find the mean of these values:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(mysize)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 4.1
\end{verbatim}

How does this sample mean (from a truly random sample) compare to your sample mean from the non-random sample?

Click for answer

\emph{Answer:} The true mean is 4.29. Your two means will likely vary. Since the many non-random samples generally overestimated the population mean length, it is possible (but not guaranteed) that \emph{your} one non-random sample gave a mean length that is greater than the random sample's mean length.

\hypertarget{driving-with-a-pet-on-your-lap}{%
\subsection{Driving with a Pet on your Lap}\label{driving-with-a-pet-on-your-lap}}

Over 30,000 people participated in an online poll on \texttt{cnn.com} conducted in April 2012 asking: ``Have you ever driven with a pet on your lap''? We see that 34\% of the participants answered yes and 66\% answered no.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\tightlist
\item
  Can you conclude that a random sample was used from the description given? Explain.
\end{enumerate}

Click for answer

\emph{Answer:} No you can't make this conclusion from the info given. In fact, an online poll at a website like \texttt{cnn.com} is almost always reporting results from a non-random sample. The people who respond are individuals who visit \texttt{cnn.com}, then see the online poll and decide to respond.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{1}
\tightlist
\item
  Explain why it is not appropriate to generalize these results to all drivers, or even to all drivers who visit cnn.com.
\end{enumerate}

Click for answer

\emph{Answer:} This is a volunteer sample, and volunteer samples are often biased and can't be generalized to \emph{all drivers} (the population). It is likely that people who have driven with a pet on their lap are more likely to respond to the poll.

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{2}
\tightlist
\item
  How might we select a sample of people that would give us results that we can generalize to a broader population?
\end{enumerate}

Click for answer

\emph{Answer:} A random sample of individuals from all U.S. drivers would need to be selected and given the poll question. (There are many ways to do this, the most common being a variation of random digit dialing where phone numbers are randomly selected from known area codes.)

\begin{enumerate}
\def\labelenumi{\alph{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  Is the variable measured in this study quantitative or categorical?
\end{enumerate}

Click for answer

\emph{Answer:} Categorical (yes or no answer to the question).

\hypertarget{class-activity-3}{%
\chapter{Class Activity 3}\label{class-activity-3}}

\hypertarget{case-study-1}{%
\section{Case Study 1}\label{case-study-1}}

Consider the following case study:

``Swimming with dolphins can certainly be fun, but is it also therapeutic for patients suffering from clinical depression? To investigate this possibility, researchers recruited 30 subjects aged 18-65 with a clinical diagnosis of mild to moderate depression. Subjects were required to discontinue use of any antidepressant drugs or psychotherapy four weeks prior to the experiment, and throughout the experiment. These 30 subjects went to an island off the coast of Honduras, where they were randomly assigned to one of two treatment groups. Both groups engaged in the same amount of swimming and snorkeling each day, but one group (the animal care program) did so in the presence of bottlenose dolphins and the other group (outdoor nature program) did not. At the end of two weeks, each subjects' level of depression was evaluated, as it had been at the beginning of the study, and it was determined whether they showed substantial improvement (reducing their level of depression) by the end of the study (Antonioli and Reveley, 2005).''

Observed data:

The researchers found that 10 of 15 subjects in the dolphin therapy group showed substantial improvement, compared to 3 of 15 subjects in the control group.

(a). Identify the observational units in this study.

Click for answer

\emph{Answer:} The observational units in this study are the 30 subjects.

(b). Classify each variable as categorical or quantitative.

Click for answer

\emph{Answer:} The variables in this study can be classified as follows:
Categorical: Treatment Group (Dolphin and Control),\\
Quantitative: Age, Depression Score (Beginning and End of Study)

(c). Which variable would you regard as explanatory and which as response?

Click for answer

\emph{Answer:} The explanatory variable would be the Treatment Group and the response variable would be the Level of Depression.

(d). Is this an observational study or an experiment? Justify your answer.

Click for answer

\emph{Answer:} This is an experiment because the researchers randomly assigned the subjects to the two treatment groups, and then observed the effect of the treatment (presence of dolphins) on the response variable (level of depression).

(e). Construct a two-way table based on the results of the experiment.

Click for answer

Two-way table:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Treatment & Improved & Not Improved & Total \\
\midrule()
\endhead
Dolphin Group & 10 & 5 & 15 \\
Control Group & 3 & 12 & 15 \\
Total & 13 & 17 & 30 \\
\bottomrule()
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{case-study-2}{%
\section{Case Study 2}\label{case-study-2}}

Consider the following case study:

``Researchers want to find out how a new diet affects weight gain among underweight subjects. This experiment only has two treatment conditions, the new diet and the standard diet. For this study, the researchers recruited 200 subjects which will be grouped into 100 pairs based on shared characteristics such as age, gender, weight, height, lifestyle, and so on. A 20-year-old female within the weight range of 90-110 pounds and the height range of 60-63 inches will be paired with another 20-year-old female that falls into the same weight and height categories. Once all 100 pairs are made, a subject from each pair will be randomly assigned into the treatment group (will be administered the new diet for 2 months) while the other subject from the pair will be assigned to the control group (will be assigned to follow the standard diet for two months). At the end of the time time period of 2 months, researchers will measure the total weight gain for each subject.''

Observed data:

The researchers found that 60 of 100 subjects in the new diet group showed substantial improvement, compared to 43 of 100 subjects in the standard diet group.

(a). Identify the observational units in this study.

Click for answer

\emph{Answer:} The observational units in this study are the 200 subjects.

(b). Classify each variable as categorical or quantitative.

Click for answer

\emph{Answer:} The variables are: age (quantitative), gender (categorical), weight (quantitative), height (quantitative), lifestyle (categorical), and total weight gain (quantitative).

(c). Which variable would you regard as explanatory and which as response?

Click for answer

\emph{Answer:} The explanatory variable is the type of diet (new or standard) and the response variable is the total weight gain.

(d). Is this an observational study or an experiment? Justify your answer.

Click for answer

\emph{Answer:} This is an experiment because the researchers are manipulating the explanatory variables (type of diet) to observe the effects on the response variables (total weight gain).

(e). If it is an experiment, is it randomized comparative experiment or a matched pairs experiment?

Click for answer

\emph{Answer:} This is a matched pairs experiment because each subject is paired with another subject who has similar characteristics and one subject from each pair is randomly assigned to the treatment group and the other to the control group. More specifically, this is a \(pretest - posttest\) matched pairs design.

(f). Construct a two-way table based on the results of the experiment.

Click for answer

Two-way table:

\begin{longtable}[]{@{}llll@{}}
\toprule()
Outcome & New Diet & Standard Diet & Total \\
\midrule()
\endhead
Improvement & 60 & 43 & 103 \\
No Improvement & 40 & 57 & 97 \\
Total & 100 & 100 & 200 \\
\bottomrule()
\end{longtable}

\hypertarget{class-activity-4}{%
\chapter{Class Activity 4}\label{class-activity-4}}

\hypertarget{your-turn-1-2}{%
\section{Your Turn 1}\label{your-turn-1-2}}

\hypertarget{flowers-v.-mississippi}{%
\subsection{Flowers v. Mississippi}\label{flowers-v.-mississippi}}

The data set \texttt{APM\_DougEvensCases.csv} contains data from 1517 potential black and white jurors for 66 cases that Doug Evans was primary prosecutor for between 1992 and 2017. These jurors were available for Doug Evans to strike using his ``peremptory strikes'' during the jury selection phase.

(a). Inspect data

Read in the data

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jurors }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/APM\_DougEvansCases.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# dimension of dataset}
\FunctionTok{dim}\NormalTok{(jurors)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1517    6
\end{verbatim}

Look at the first \textbf{three rows} of the data set

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jurors[}\FunctionTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{,}\DecValTok{2}\NormalTok{,}\DecValTok{3}\NormalTok{), ]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  trial__id  race        struck_state defendant_race
1         4 Black Not struck by State          White
2         4 Black     Struck by State          White
3         4 White Not struck by State          White
       same_race                     struck_by
1 different race Juror chosen to serve on jury
2 different race           Struck by the state
3      same race Juror chosen to serve on jury
\end{verbatim}

To get the data from one variable, we use the command \texttt{dataset\$variable}. For example, \texttt{jurors\$struck\_state} gives us the data values from the \texttt{struck\_state} variable, which tells us if a juror was struck by the state from the jury pool. Here we can see the first 10 entries in this variable:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jurors}\SpecialCharTok{$}\NormalTok{struck\_state[}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 [1] "Not struck by State" "Struck by State"    
 [3] "Not struck by State" "Not struck by State"
 [5] "Struck by State"     "Not struck by State"
 [7] "Struck by State"     "Not struck by State"
 [9] "Not struck by State" "Not struck by State"
\end{verbatim}

(b). Table of counts and proportions

The \texttt{summary} command used with a data frame gives summaries of each variable

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(jurors)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   trial__id         race           struck_state      
 Min.   :  4.0   Length:1517        Length:1517       
 1st Qu.: 52.0   Class :character   Class :character  
 Median : 82.0   Mode  :character   Mode  :character  
 Mean   :112.6                                        
 3rd Qu.:170.0                                        
 Max.   :301.0                                        
 defendant_race      same_race          struck_by        
 Length:1517        Length:1517        Length:1517       
 Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character  
                                                         
                                                         
                                                         
\end{verbatim}

The \texttt{table} command gives the distribution of counts for a single categorical variable. To obtain the count table for \texttt{struck\_state} you need to

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{counts }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(jurors}\SpecialCharTok{$}\NormalTok{struck\_state)}
\NormalTok{counts}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Not struck by State     Struck by State 
               1084                 433 
\end{verbatim}

We can add the \texttt{prop.table} command to turn these counts into proportions:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(counts)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Not struck by State     Struck by State 
          0.7145682           0.2854318 
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What proportion of eligible jurors were struck by the state from the jury pool?
\end{itemize}

Click for answer

\emph{Answer:} about 28.5\% of eligible jurors were struck by the state.

(c). Bar graph for one variable

We can create a data frame \texttt{count\_data} containing the counts and their corresponding categories.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{count\_data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(counts)}
\NormalTok{count\_data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                 Var1 Freq
1 Not struck by State 1084
2     Struck by State  433
\end{verbatim}

Then, we use \texttt{ggplot2} to create a bar plot with the categories on the x-axis and the counts on the y-axis. The column names of \texttt{count\_data} are automatically assigned to be \texttt{Var1} and \texttt{Freq}. We can change the column names to \texttt{category} and \texttt{count}, for example, as:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(count\_data) }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\StringTok{"category"}\NormalTok{, }\StringTok{"count"}\NormalTok{)}
\NormalTok{count\_data}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
             category count
1 Not struck by State  1084
2     Struck by State   433
\end{verbatim}

The \texttt{geom\_bar(stat\ =\ "identity")} function is used to create the bars, and we set the y-axis label using \texttt{labs()}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create a bar plot using ggplot2}
\FunctionTok{library}\NormalTok{(ggplot2)  }\CommentTok{\# load the package}
\FunctionTok{ggplot}\NormalTok{(count\_data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ category, }\AttributeTok{y =}\NormalTok{ count)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"count"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-10-1}

(d). Two-way tables

First 10 entries of \texttt{race} and \texttt{struck\_state} variable is

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{jurors[(}\DecValTok{1}\SpecialCharTok{:}\DecValTok{10}\NormalTok{),(}\DecValTok{2}\SpecialCharTok{:}\DecValTok{3}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
    race        struck_state
1  Black Not struck by State
2  Black     Struck by State
3  White Not struck by State
4  White Not struck by State
5  Black     Struck by State
6  White Not struck by State
7  Black     Struck by State
8  White Not struck by State
9  White Not struck by State
10 White Not struck by State
\end{verbatim}

The \texttt{table} command also gives two-way tables when two variables are included. Here is the two-way table for juror race and state struck status:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mytable }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(jurors}\SpecialCharTok{$}\NormalTok{race, jurors}\SpecialCharTok{$}\NormalTok{struck\_state)}
\NormalTok{mytable}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
       
        Not struck by State Struck by State
  Black                 225             310
  White                 859             123
\end{verbatim}

\begin{itemize}
\tightlist
\item
  How many jurors were white and were not struck by the state?
\end{itemize}

Click for answer

\emph{answer:} 859

(e). Conditional proportions: state strike status by juror race

The \texttt{prop.table} command gives conditional proportions for a two-way table. We plug our two-way table into \texttt{prop.table} with a \texttt{margin=1} to get proportions grouped by the \textbf{row} variable:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(mytable, }\AttributeTok{margin =} \DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
       
        Not struck by State Struck by State
  Black           0.4205607       0.5794393
  White           0.8747454       0.1252546
\end{verbatim}

Of all eligible black jurors, about 57.9\% were struck by the state.

\begin{itemize}
\tightlist
\item
  What proportion of eligible white jurors were struck by the state?
\end{itemize}

Click for answer

\emph{answer:} about 12.5\%

\begin{itemize}
\tightlist
\item
  Is there evidence of an association between juror race and state strikes?
\end{itemize}

Click for answer

\emph{answer:} Yes, there is an association because the rate of state strikes varies greatly by juror race with
about 60\% of black jurors were struck compared to only 13\% of white jurors

(f). Stacked bar graph for two variables

We can visualize the conditional distribution from part (e) with a stacked bar graph created using the \texttt{ggplot2} graphing package. First, load this package's functions with the \texttt{library} command:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

Now we can use the \texttt{geom\_bar} command in this package. Here we get the conditional distribution of \texttt{struck\_state} given \texttt{race}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(jurors, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ race, }\AttributeTok{fill =}\NormalTok{ struck\_state)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"State strikes by juror race"}\NormalTok{, }\AttributeTok{y =} \StringTok{"proportion"}\NormalTok{, }
       \AttributeTok{x =} \StringTok{"eligible juror race"}\NormalTok{, }\AttributeTok{fill =} \StringTok{"struck by state?"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-15-1}

The basic syntax for this function is to let \texttt{ggplot} know your data set name (\texttt{jurors}), then specify the grouping or conditional variable on the x-axis (\texttt{race}) in the \texttt{aes} (aesthetic) argument. The \texttt{fill} variable is the response variable (\texttt{struck\_state}). We add (\texttt{+}) the \texttt{geom\_bar} geometry to get a bar graph with the \texttt{fill} position specified. Adding an informative label and title complete the graph.

(g). Conditional distribution of race grouped by strike status

We can ``flip'' our response and grouping variables easily (if we think it makes sense to do so). Here we specify the \texttt{margin=2} to get proportions grouped by the \textbf{column} variable:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(mytable, }\AttributeTok{margin =} \DecValTok{2}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
       
        Not struck by State Struck by State
  Black           0.2075646       0.7159353
  White           0.7924354       0.2840647
\end{verbatim}

Notice that the proportions add to one \textbf{down} each column. Of all eligible jurors struck by the state, about 71.6\% were black.

The stacked bar graph for this distribution is

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(jurors, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ struck\_state, }\AttributeTok{fill =}\NormalTok{ race)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Juror race by state strikes"}\NormalTok{, }\AttributeTok{y =} \StringTok{"proportion"}\NormalTok{, }
       \AttributeTok{fill =} \StringTok{"eligible juror race"}\NormalTok{, }\AttributeTok{x =} \StringTok{"struck by state?"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-17-1}

\begin{itemize}
\tightlist
\item
  What proportion of eligible jurors who were not struck by the state were black? were white?
\end{itemize}

Click for answer

\emph{Answer:} Of all jurors not struck by the state, about 20.8\% were black

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{your-turn-2-2}{%
\section{Your Turn 2}\label{your-turn-2-2}}

\hypertarget{graduate-programs-acceptance-and-sex}{%
\subsection{Graduate programs acceptance and sex}\label{graduate-programs-acceptance-and-sex}}

How are grad school program acceptance rates associated with sex? We will look at a classic data set from Berkeley grad school applications from 1973 (\emph{Science}, 1975). The data cases are applicants to four graduate programs at Berkeley during 1973. The variable \texttt{result} tells us if the applicant was accepted to the graduate program, \texttt{sex} tells us the sex of the applicant (male or female), and \texttt{program} tells us program type (programs 1,2,3 or 4).

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{grad }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/BerkeleyGrad.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# dimension of the dataset}
\FunctionTok{dim}\NormalTok{(grad)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3014    3
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# first 6 rows}
\FunctionTok{head}\NormalTok{(grad)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   program  sex result
1 program1 male accept
2 program1 male accept
3 program1 male accept
4 program1 male accept
5 program1 male accept
6 program1 male accept
\end{verbatim}

(a). Table of counts and proportions

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{result))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

   accept    reject 
0.4260119 0.5739881 
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What proportion of applicants were accepted?
\end{itemize}

Click for answer

\emph{Answer:} About 43\% (1284/3014) of applicants were accepted.

(b). Two-way tables

The \texttt{table} command also gives two-way tables when two variables are included. Here is the two-way table for result and sex:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{sex, grad}\SpecialCharTok{$}\NormalTok{result)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
        
         accept reject
  female    262    587
  male     1022   1143
\end{verbatim}

\begin{itemize}
\tightlist
\item
  How many applicants involved females who were accepted?
\end{itemize}

Click for answer

\emph{Answer:} : 262 applicants involved females who were accepted.

(c). Conditional proportions: acceptance given sex

The \texttt{prop.table} command gives conditional proportions for a two-way table. First let's save the two-way table in an object named \texttt{mytable}:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mytable }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{sex, grad}\SpecialCharTok{$}\NormalTok{result)}
\end{Highlighting}
\end{Shaded}

Then use \texttt{prop.table} to get the distribution of result conditioned (grouped) on applicant's sex:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(mytable, }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
        
            accept    reject
  female 0.3085984 0.6914016
  male   0.4720554 0.5279446
\end{verbatim}

The value of \texttt{1} in this command tell's R that you want \emph{row} proportions (the denominator of the proportion is each row total).

\begin{itemize}
\tightlist
\item
  What proportion of female were accepted?
\end{itemize}

Click for answer

\emph{Answer:} about 31\% (262/(262+587))

\begin{itemize}
\tightlist
\item
  What proportion of males were accepted?
\end{itemize}

Click for answer

\emph{Answer:} about 47\% (1022/(1022+1143))

(d). Bar graph for one variable

We can create a data frame \texttt{count\_data1} containing the counts and their corresponding categories.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{counts1 }\OtherTok{\textless{}{-}} \FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{result)}
\NormalTok{count\_data1 }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(counts1)}
\end{Highlighting}
\end{Shaded}

Then, we use \texttt{ggplot2} to create a bar plot with the categories on the x-axis and the counts on the y-axis. The column names of \texttt{count\_data} are automatically assigned to be \texttt{Var1} and \texttt{Freq}. We can change the column names to \texttt{category} and \texttt{count}, for example, as:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{colnames}\NormalTok{(count\_data1) }\OtherTok{=} \FunctionTok{c}\NormalTok{(}\StringTok{"category"}\NormalTok{, }\StringTok{"count"}\NormalTok{)}
\NormalTok{count\_data1}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  category count
1   accept  1284
2   reject  1730
\end{verbatim}

The \texttt{geom\_bar(stat\ =\ "identity")} function is used to create the bars, and we set the y-axis label using \texttt{labs()}.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Create a bar plot using ggplot2}
\FunctionTok{library}\NormalTok{(ggplot2)  }\CommentTok{\# load the package}
\FunctionTok{ggplot}\NormalTok{(count\_data1, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ category, }\AttributeTok{y =}\NormalTok{ count)) }\SpecialCharTok{+}
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{stat =} \StringTok{"identity"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"count"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-27-1}

(e). Stacked bar graph for two variables

Now we can use the \texttt{geom\_bar} command in this package. Here we get the conditional distribution of \texttt{result} given \texttt{sex}:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2) }\CommentTok{\# don\textquotesingle{}t need if you already entered it for example 1}
\FunctionTok{ggplot}\NormalTok{(grad, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sex, }\AttributeTok{fill =}\NormalTok{ result)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y=}\StringTok{"Proportion"}\NormalTok{, }\AttributeTok{title =} \StringTok{"result by sex"}\NormalTok{, }\AttributeTok{fill =} \StringTok{"result?"}\NormalTok{, }\AttributeTok{x =} \StringTok{"sex"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-28-1}

The basic syntax for this function is to let \texttt{ggplot} know your data set name (\texttt{grad}), then specify the grouping or conditional variable on the x-axis (\texttt{sex}) in the \texttt{aes} (aesthetic) argument. The \texttt{fill} variable is the response variable (\texttt{result}). We add (\texttt{+}) the \texttt{geom\_bar} geometry to get a bar graph with the \texttt{fill} position specified. Adding an informative label and title complete the graph.

\begin{itemize}
\tightlist
\item
  Verify that this graph is plotting the conditional proportions from part (c)
\end{itemize}

(f). Subsetting by program type

Finally, we will repeat the previous analysis of result and sex, but this time we will divide (or subset) the data set by program type. To do this we need to know how the values of \texttt{program} are coded:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{program)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

program1 program2 program3 program4 
     933      585      782      714 
\end{verbatim}

Here we use the \texttt{filter} command available from the \texttt{dplyr} package to get only the applicants to program 1:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{grad.p1 }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(grad, program }\SpecialCharTok{==} \StringTok{"program1"}\NormalTok{)  }\CommentTok{\# gets rows where program equal program1}
\FunctionTok{head}\NormalTok{(grad.p1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   program  sex result
1 program1 male accept
2 program1 male accept
3 program1 male accept
4 program1 male accept
5 program1 male accept
6 program1 male accept
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{dim}\NormalTok{(grad.p1)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 933   3
\end{verbatim}

Verify that the number of rows in the subsetted program 1 data set matches the number of program 1 applicants shown in the \texttt{table} of counts above.

\begin{itemize}
\tightlist
\item
  Repeat the \texttt{filter} command to get a data set for program 2 and call the new data set \texttt{grad.p2}. Verify that the number of rows in this dataset matches the number of program 2 applicants in the original data set.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# enter R code for (f) here}
\NormalTok{grad.p2 }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(grad, program }\SpecialCharTok{==} \StringTok{"program2"}\NormalTok{) }\CommentTok{\# gets rows where program equal program1}
\FunctionTok{head}\NormalTok{(grad.p2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   program  sex result
1 program2 male accept
2 program2 male accept
3 program2 male accept
4 program2 male accept
5 program2 male accept
6 program2 male accept
\end{verbatim}

(g). Result by sex for program 1.

\begin{itemize}
\tightlist
\item
  Show the distribution of result conditioned on applicant's sex for the program 1 data set. Get both a table of conditional proportions (or percentages) and a stacked bar graph.
\end{itemize}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# enter R code for (g) here}
\FunctionTok{ggplot}\NormalTok{(grad.p1, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sex, }\AttributeTok{fill =}\NormalTok{ result)) }\SpecialCharTok{+}
 \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+}
 \FunctionTok{labs}\NormalTok{(}\AttributeTok{y=}\StringTok{"Proportion"}\NormalTok{, }\AttributeTok{title =} \StringTok{"result by sex for program 1"}\NormalTok{,}
 \AttributeTok{fill =} \StringTok{"result?"}\NormalTok{, }\AttributeTok{x =} \StringTok{"sex"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-32-1}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(grad.p1}\SpecialCharTok{$}\NormalTok{sex, grad.p1}\SpecialCharTok{$}\NormalTok{result),}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
        
            accept    reject
  female 0.8240741 0.1759259
  male   0.6193939 0.3806061
\end{verbatim}

(h). Result by sex for program 2.

\begin{itemize}
\tightlist
\item
  Repeat part (g) but this time use the program 2 data set. Compare the two bar graphs for (g) and (h) and explain how they show that females have a higher acceptance rate after accounting for program type (1 or 2).
\end{itemize}

Click for answer

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# enter R code for (h) here}
\FunctionTok{ggplot}\NormalTok{(grad.p2, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sex, }\AttributeTok{fill =}\NormalTok{ result)) }\SpecialCharTok{+}
 \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+}
 \FunctionTok{labs}\NormalTok{(}\AttributeTok{y=}\StringTok{"Proportion"}\NormalTok{, }\AttributeTok{title =} \StringTok{"result by sex for program 2"}\NormalTok{,}
 \AttributeTok{fill =} \StringTok{"result?"}\NormalTok{, }\AttributeTok{x =} \StringTok{"sex"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-34-1}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(grad.p2}\SpecialCharTok{$}\NormalTok{sex, grad.p2}\SpecialCharTok{$}\NormalTok{result),}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
        
            accept    reject
  female 0.6800000 0.3200000
  male   0.6285714 0.3714286
\end{verbatim}

\emph{Answer:} For both programs 1 and 2, we see that female applicants have a slightly higher rate of acceptance
than male applicants. After accounting for program type, we now see that black defendants have a higher
rate of death penalty than white defendants. Without accounting for program type, the opposite was true
(see parts (c) and (e)).

Why? the confounding affect of program type which is associated with both result and sex:

Click for answer

\begin{itemize}
\tightlist
\item
  females prefer to apply to programs 3 and 4 while males prefer programs 1 and 2 (more than 3 and
  4).

  \begin{itemize}
  \tightlist
  \item
    44\% of females applied to program 3 and 40\% to program 4
  \item
    38\% of males applied to program 1 and 26\% to program 2
  \end{itemize}
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{sex, grad}\SpecialCharTok{$}\NormalTok{program), }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
        
           program1   program2   program3   program4
  female 0.12720848 0.02944641 0.44169611 0.40164900
  male   0.38106236 0.25866051 0.18799076 0.17228637
\end{verbatim}

-Programs 3 and 4 were much harder to get into than programs 1 and 2
- 64\% of applicants to program 1 were accepted and 63\% of applicants to program 2 were accepted
- 6\% of applicants to program 4 were accepted and 34\% of applicants to program 3 were accepted

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(grad}\SpecialCharTok{$}\NormalTok{program, grad}\SpecialCharTok{$}\NormalTok{result), }\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
          
               accept     reject
  program1 0.64308682 0.35691318
  program2 0.63076923 0.36923077
  program3 0.34398977 0.65601023
  program4 0.06442577 0.93557423
\end{verbatim}

So since the majority of females applied to the toughest programs (as measured by acceptance rates),
there overall rate of acceptance was lower for females compared to males. But when we break down
these rates by program type, we see that females have higher acceptance rates than males (see the
visual in part (i)).

(i). A bar graph with three variables

If we simply want to graph the relationship between result and sex for each type of program, we can avoid subsetting the data by using the \texttt{facet\_wrap} command in \texttt{ggplot2}. It is one simple addition to the stacked bar graph in part (e):

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(grad, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sex, }\AttributeTok{fill =}\NormalTok{ result)) }\SpecialCharTok{+} 
  \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position =} \StringTok{"fill"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y=}\StringTok{"Proportion"}\NormalTok{, }
       \AttributeTok{title =} \StringTok{"result by sex for each program"}\NormalTok{, }
       \AttributeTok{fill =} \StringTok{"result?"}\NormalTok{, }
       \AttributeTok{x =} \StringTok{"sex"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{facet\_wrap}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{program)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_4_files/figure-latex/unnamed-chunk-38-1}

\begin{itemize}
\tightlist
\item
  Verify that this command creates side-by-side stacked bar graphs that match your graphs in parts (g) and (h) for programs 1 and 2.
\end{itemize}

Click for answer

\emph{Answer:} The graphs match.

\hypertarget{class-activity-5}{%
\chapter{Class Activity 5}\label{class-activity-5}}

\hypertarget{example-1-sleep}{%
\section{Example 1: Sleep}\label{example-1-sleep}}

This histogram shows the distribution of hours or sleep per night for a large sample of students.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\NormalTok{sleep }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"http://math.carleton.edu/Stats215/Textbook/SleepStudy.csv"}\NormalTok{)}
\FunctionTok{ggplot}\NormalTok{(sleep, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{AverageSleep)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{fill=}\StringTok{"steelblue"}\NormalTok{, }\AttributeTok{bins =} \DecValTok{30}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Distribution of Sleep Hours"}\NormalTok{, }\AttributeTok{x =} \StringTok{"Hours of Sleep"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_5_files/figure-latex/unnamed-chunk-1-1}

\hypertarget{a-estimate-the-average-hours-of-sleep-per-night.}{%
\subsection{(a) Estimate the average hours of sleep per night.}\label{a-estimate-the-average-hours-of-sleep-per-night.}}

Click for answer

\emph{Answer:} The mean is around 8 hours

\hypertarget{b-use-the-95-rule-to-estimate-the-standard-deviation-for-this-data.}{%
\subsection{(b) Use the 95\% rule to estimate the standard deviation for this data.}\label{b-use-the-95-rule-to-estimate-the-standard-deviation-for-this-data.}}

Click for answer

\emph{Answer:} Most of the data is between about 6 and 10, with a mean around 8 (due to the roughly symmetric
distribution). So two standard deviations is about 2 hours of sleep, making one standard deviation about
1 hours of sleep.

Let's check the rule! Here are the actual mean and SD:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(sleep}\SpecialCharTok{$}\NormalTok{AverageSleep)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 7.965929
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sd}\NormalTok{(sleep}\SpecialCharTok{$}\NormalTok{AverageSleep)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.9648396
\end{verbatim}

\hypertarget{example-2-z-scores-for-test-scores}{%
\section{Example 2: Z-scores for Test Scores}\label{example-2-z-scores-for-test-scores}}

The ACT test has a population mean of 21 and standard deviation of 5. The SAT has a population mean of 1500 and a standard deviation of 325. You earned 28 on the ACT and 2100 on the SAT.

\hypertarget{a-which-test-did-you-do-better-on}{%
\subsection{(a) Which test did you do better on?}\label{a-which-test-did-you-do-better-on}}

Click for answer

\emph{Answer:}

\begin{itemize}
\tightlist
\item
  ACT: The z-score for the score of 28 is z = (28 - 21)/5 = 1.4.
\item
  SAT: The z-score for the score of 2100 is z = (2100 - 1500)/325 = 1.85.
\item
  The SAT score is 1.85 standard deviations above average while the ACT score is only 1.4 standard
  deviations above. You did better on the SAT.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{z\_ACT }\OtherTok{\textless{}{-}}\NormalTok{ (}\DecValTok{28} \SpecialCharTok{{-}} \DecValTok{21}\NormalTok{) }\SpecialCharTok{/} \DecValTok{5}
\NormalTok{z\_SAT }\OtherTok{\textless{}{-}}\NormalTok{ (}\DecValTok{2100} \SpecialCharTok{{-}} \DecValTok{1500}\NormalTok{) }\SpecialCharTok{/} \DecValTok{325}
\NormalTok{z\_ACT}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.4
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{z\_SAT}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.846154
\end{verbatim}

\hypertarget{b-for-each-test-find-the-interval-that-is-likely-to-contain-about-95-of-all-test-scores.}{%
\subsection{(b) For each test, find the interval that is likely to contain about 95\% of all test scores.}\label{b-for-each-test-find-the-interval-that-is-likely-to-contain-about-95-of-all-test-scores.}}

Click for answer

\emph{Answer:}

\begin{itemize}
\tightlist
\item
  ACT: Two standard deviations is 2(5) = 10. About 95\% of ACT scores are between 21 - 10 = 11
  and 21 + 10 = 31. This claim assumes that ACT scores follow a bell-shaped distribution.
\item
  SAT: Two standard deviations is 2(325) = 650. About 95\% of SAT scores are between 1500 - 650 =
  850 and 1500 + 650 = 2150. This claim assumes that SAT scores follow a bell-shaped distribution.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{ACT\_lower }\OtherTok{\textless{}{-}} \DecValTok{21} \SpecialCharTok{{-}} \DecValTok{2} \SpecialCharTok{*} \DecValTok{5}
\NormalTok{ACT\_upper }\OtherTok{\textless{}{-}} \DecValTok{21} \SpecialCharTok{+} \DecValTok{2} \SpecialCharTok{*} \DecValTok{5}
\NormalTok{SAT\_lower }\OtherTok{\textless{}{-}} \DecValTok{1500} \SpecialCharTok{{-}} \DecValTok{2} \SpecialCharTok{*} \DecValTok{325}
\NormalTok{SAT\_upper }\OtherTok{\textless{}{-}} \DecValTok{1500} \SpecialCharTok{+} \DecValTok{2} \SpecialCharTok{*} \DecValTok{325}
\FunctionTok{c}\NormalTok{(ACT\_lower, ACT\_upper)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 11 31
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{c}\NormalTok{(SAT\_lower, SAT\_upper)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1]  850 2150
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{example-3-5-number-summaries}{%
\section{Example 3: 5 number summaries}\label{example-3-5-number-summaries}}

For the given vector of observations indicate whether the resulting data appear to be symmetric, skewed to the right, or skewed to the left.

(2, 10, 15, 20, 69, 34, 23, 2, 45)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{my\_vector }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{2}\NormalTok{, }\DecValTok{10}\NormalTok{, }\DecValTok{15}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{69}\NormalTok{, }\DecValTok{34}\NormalTok{, }\DecValTok{23}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{45}\NormalTok{)}
\FunctionTok{summary}\NormalTok{(my\_vector)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2.00   10.00   20.00   24.44   34.00   69.00 
\end{verbatim}

Click for answer

\emph{Answer:} Skewed right. It has a longer right tail than left since max -Q3 \textgreater\textgreater{} Q1 - min

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x=}\NormalTok{my\_vector), }\FunctionTok{aes}\NormalTok{(x)) }\SpecialCharTok{+} \FunctionTok{geom\_boxplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_5_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{example-4-hot-dog}{%
\section{Example 4: Hot dog}\label{example-4-hot-dog}}

This boxplot shows the number of hot dogs eaten by the winners of Nathan's Famous hot dog eating contests from 2002-2011.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hotdogs }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/HotDogs.csv"}\NormalTok{)}
\FunctionTok{ggplot}\NormalTok{(hotdogs, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \StringTok{""}\NormalTok{, }\AttributeTok{y =}\NormalTok{ HotDogs)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Number of Hot Dogs Consumed"}\NormalTok{, }\AttributeTok{y =} \StringTok{"Number of Hot Dogs"}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_5_files/figure-latex/unnamed-chunk-8-1}

\hypertarget{a-use-the-boxplot-to-estimate-the-5-number-summary-and-iqr-for-this-data.-verify-that-there-are-no-outliers-in-this-data.}{%
\subsection{(a) Use the boxplot to estimate the 5 number summary and IQR for this data. Verify that there are no outliers in this data.}\label{a-use-the-boxplot-to-estimate-the-5-number-summary-and-iqr-for-this-data.-verify-that-there-are-no-outliers-in-this-data.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hotdog\_q1 }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(hotdogs}\SpecialCharTok{$}\NormalTok{HotDogs, }\FloatTok{0.25}\NormalTok{)}
\NormalTok{hotdog\_q3 }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(hotdogs}\SpecialCharTok{$}\NormalTok{HotDogs, }\FloatTok{0.75}\NormalTok{)}
\NormalTok{hotdog\_iqr }\OtherTok{\textless{}{-}} \FunctionTok{IQR}\NormalTok{(hotdogs}\SpecialCharTok{$}\NormalTok{HotDogs)}
\NormalTok{lower\_fence }\OtherTok{\textless{}{-}}\NormalTok{ hotdog\_q1 }\SpecialCharTok{{-}} \FloatTok{1.5} \SpecialCharTok{*}\NormalTok{ hotdog\_iqr}
\NormalTok{upper\_fence }\OtherTok{\textless{}{-}}\NormalTok{ hotdog\_q3 }\SpecialCharTok{+} \FloatTok{1.5} \SpecialCharTok{*}\NormalTok{ hotdog\_iqr}

\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{outliers }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(hotdogs, HotDogs }\SpecialCharTok{\textless{}}\NormalTok{ lower\_fence }\SpecialCharTok{|}\NormalTok{ HotDogs }\SpecialCharTok{\textgreater{}}\NormalTok{ upper\_fence)}
\NormalTok{outliers}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] Year    HotDogs
<0 rows> (or 0-length row.names)
\end{verbatim}

\hypertarget{example-5-hollywood-movies-world-gross}{%
\section{Example 5: Hollywood Movies World Gross}\label{example-5-hollywood-movies-world-gross}}

Let's visit the \texttt{WorldGross} analysis from the Hollywood movies data set:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{movies }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/HollywoodMovies2011.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a-draw-a-boxplot-of-worldgross.}{%
\subsection{\texorpdfstring{(a) Draw a boxplot of \texttt{WorldGross}.}{(a) Draw a boxplot of WorldGross.}}\label{a-draw-a-boxplot-of-worldgross.}}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(movies, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ WorldGross, }\AttributeTok{y =} \StringTok{""}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"World Gross of Hollywood Movies"}\NormalTok{, }\AttributeTok{x =} \StringTok{"World Gross (in millions)"}\NormalTok{, }\AttributeTok{y =}\StringTok{""}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_5_files/figure-latex/unnamed-chunk-11-1}

How many movies are identified as outliers for world gross?

\hypertarget{b-calculating-boxplot-values}{%
\subsection{(b) Calculating boxplot values}\label{b-calculating-boxplot-values}}

Use the boxplot outlier rule to find the ``fence'' (cutoff) between an outlier and non-outlier for \texttt{WorldGross}. Then determine the value (of \texttt{WorldGross}) that the upper ``whisker'' (non-outlier) extends to.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(tidyr)}
\NormalTok{movies\_no\_na }\OtherTok{\textless{}{-}} \FunctionTok{drop\_na}\NormalTok{(movies) }
\NormalTok{q1\_world\_gross }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(movies\_no\_na}\SpecialCharTok{$}\NormalTok{WorldGross, }\FloatTok{0.25}\NormalTok{)}
\NormalTok{q3\_world\_gross }\OtherTok{\textless{}{-}} \FunctionTok{quantile}\NormalTok{(movies\_no\_na}\SpecialCharTok{$}\NormalTok{WorldGross, }\FloatTok{0.75}\NormalTok{)}
\NormalTok{iqr\_world\_gross }\OtherTok{\textless{}{-}} \FunctionTok{IQR}\NormalTok{(movies\_no\_na}\SpecialCharTok{$}\NormalTok{WorldGross)}
\NormalTok{lower\_fence\_world\_gross }\OtherTok{\textless{}{-}}\NormalTok{ q1\_world\_gross }\SpecialCharTok{{-}} \FloatTok{1.5} \SpecialCharTok{*}\NormalTok{ iqr\_world\_gross}
\NormalTok{upper\_fence\_world\_gross }\OtherTok{\textless{}{-}}\NormalTok{ q3\_world\_gross }\SpecialCharTok{+} \FloatTok{1.5} \SpecialCharTok{*}\NormalTok{ iqr\_world\_gross}

\NormalTok{outliers }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(movies\_no\_na, WorldGross }\SpecialCharTok{\textless{}}\NormalTok{ lower\_fence\_world\_gross }\SpecialCharTok{|}\NormalTok{ WorldGross }\SpecialCharTok{\textgreater{}}\NormalTok{ upper\_fence\_world\_gross)}
\NormalTok{outliers}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
                                          Movie
1   Harry Potter and the Deathly Hallows Part 2
2                          The Hangover Part II
3                       Twilight: Breaking Dawn
4                Transformers: Dark of the Moon
5                                           Rio
6                Rise of the Planet of the Apes
7                                    The Smurfs
8                               Kung Fu Panda 2
9  Pirates of the Caribbean:\nOn Stranger Tides
10                           Mission Impossible
11                            Sherlock Holmes 2
12                                         Thor
13                                       Cars 2
                LeadStudio RottenTomatoes AudienceScore
1              Warner Bros             96            92
2       Legendary Pictures             35            58
3              Independent             26            68
4      DreamWorks Pictures             35            67
5         20th Century Fox             71            73
6         20th Century Fox             83            87
7  Sony Pictures Animation             23            50
8     DreamWorks Animation             82            80
9                   Disney             34            61
10               Paramount             93            86
11             Warner Bros             60            79
12                  Disney             77            80
13                   Pixar             38            56
               Story     Genre TheatersOpenWeek
1            Rivalry   Fantasy             4375
2             Comedy    Comedy             3615
3               Love   Romance             4061
4              Quest    Action             4088
5              Quest Animation             3826
6            Revenge    Action             3648
7  Fish Out Of Water Animation             3395
8            Rivalry Animation             3925
9              Quest    Action             4155
10           Pursuit    Action             3448
11           Pursuit    Action             3703
12     Monster Force    Action             3955
13 Fish Out Of Water Animation             4115
   BOAverageOpenWeek DomesticGross ForeignGross WorldGross
1              38672        381.01       947.10   1328.111
2              23775        254.46       327.00    581.464
3              34012        260.80       374.00    634.800
4              23937        352.39       770.81   1123.195
5              10252        143.62       341.02    484.634
6              15024        176.70       304.52    481.226
7              10489        142.61       419.54    562.158
8              12142        165.25       497.78    663.024
9              21697        241.07       802.80   1043.871
10              8672        197.80       336.70    534.500
11             10704        179.04       261.00    440.040
12             16618        181.03       267.48    448.512
13             16072        191.45       360.40    551.850
   Budget Profitability OpeningWeekend
1     125     10.624888         169.19
2      80      7.268300          85.95
3     110      5.770909         138.12
4     195      5.759974          97.85
5      90      5.384822          39.23
6      93      5.174473          54.81
7     110      5.110527          35.61
8     150      4.420160          47.66
9     250      4.175484          90.15
10    145      3.686207          29.55
11    125      3.520320          39.63
12    150      2.990080          65.72
13    200      2.759250          66.14
\end{verbatim}

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Create a new dataset called \texttt{movies\_no\_outliers} that contains only the rows from \texttt{movies\_no\_na} where the W\texttt{orldGross} values are within the range defined by the lower and upper fences.
\end{enumerate}

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(dplyr)}
\NormalTok{movies\_no\_outliers }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(movies\_no\_na, WorldGross }\SpecialCharTok{\textgreater{}=}\NormalTok{ lower\_fence\_world\_gross }\SpecialCharTok{\&}\NormalTok{ WorldGross }\SpecialCharTok{\textless{}=}\NormalTok{ upper\_fence\_world\_gross)}
\end{Highlighting}
\end{Shaded}

\hypertarget{d-side-by-side-boxplot}{%
\subsection{(d) Side-by-side boxplot}\label{d-side-by-side-boxplot}}

We can compare boxplots of \texttt{WorldGross} across \texttt{Genre} categories:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(movies, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Genre, }\AttributeTok{y =}\NormalTok{ WorldGross)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"World Gross by Genre"}\NormalTok{, }\AttributeTok{x =} \StringTok{"Genre"}\NormalTok{, }\AttributeTok{y =} \StringTok{"World Gross (in millions)"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{hjust =} \DecValTok{1}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_5_files/figure-latex/unnamed-chunk-14-1}

\begin{itemize}
\tightlist
\item
  What does this type of graph illustrate well about the relationship between \texttt{WorldGross} and \texttt{Genre}?
\end{itemize}

Click for answer

\emph{Answer:} Does a good job comparing median values and extremes

\begin{itemize}
\tightlist
\item
  What does this type of graph not illustrate well about the relationship between \texttt{WorldGross} and \texttt{Genre}?
\end{itemize}

Click for answer

\emph{Answer:} It doesn't illustrate sample sizes well, e.g.~the fantasy genre only has 2 movies in it

\hypertarget{class-activity-6}{%
\chapter{Class Activity 6}\label{class-activity-6}}

\hypertarget{your-turn-1-3}{%
\section{Your Turn 1}\label{your-turn-1-3}}

\hypertarget{beer-example}{%
\subsection{Beer Example}\label{beer-example}}

A study of 16 Ohio State University students looked at the relationship between the number of beers a student consumes and their blood alcohol content (BAC) 30 minutes after their last beer. The regression information from R to predict BAC from number of beers consumed is given below.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(readr)}
\NormalTok{bac }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/BAC.csv"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a-always-start-with-a-visual}{%
\subsection{(a) Always start with a visual!!!!}\label{a-always-start-with-a-visual}}

Plot the response (BAC) on the y-axis and the explanatory (``predictor'') on the x-axis.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ BAC)) }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_6_files/figure-latex/unnamed-chunk-2-1}

You can modify this basic graph by adding a title and axes labels.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ BAC)) }\SpecialCharTok{+} 
     \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{shape =} \DecValTok{19}\NormalTok{) }\SpecialCharTok{+}
     \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Beer and BAC"}\NormalTok{,}
          \AttributeTok{x =} \StringTok{"Number of beers drank"}\NormalTok{,}
          \AttributeTok{y =} \StringTok{"Blood Alcohol Content"}\NormalTok{) }\SpecialCharTok{+}
     \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_6_files/figure-latex/unnamed-chunk-3-1}

\begin{itemize}
\tightlist
\item
  Is there a relationship?

  \begin{itemize}
  \tightlist
  \item
    direction?
  \item
    strength?
  \item
    form?
  \end{itemize}
\end{itemize}

\hypertarget{b-computing-correlation}{%
\subsection{(b) Computing correlation}\label{b-computing-correlation}}

Since the \emph{form} of the relationship is linear, we can use \textbf{correlation} to measure its strength:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cor}\NormalTok{(bac}\SpecialCharTok{$}\NormalTok{BAC, bac}\SpecialCharTok{$}\NormalTok{Beers)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.8943381
\end{verbatim}

If there are any missing values (\texttt{NA}'s) on either of the variables involved in the correlation calculation, use \texttt{use\ =\ "complete.obs"} as an extra argument to the \texttt{cor} function.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{cor}\NormalTok{(bac}\SpecialCharTok{$}\NormalTok{BAC, bac}\SpecialCharTok{$}\NormalTok{Beers, }\AttributeTok{use =} \StringTok{"complete.obs"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.8943381
\end{verbatim}

\hypertarget{c-fitting-a-regression-line}{%
\subsection{(c) Fitting a regression line}\label{c-fitting-a-regression-line}}

We use the \texttt{lm(y\ \textasciitilde{}\ x,\ data=mydata)} function to fit a \textbf{l}inear (regression) \textbf{m}odel for a response y given an explanatory variable x. This command creates a \textbf{linear model object} that needs to be assigned a name, here we call it \texttt{bac.lm}. You can get the slope and intercept by typing out the object name:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{bac.lm }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data=}\NormalTok{bac)}
\NormalTok{bac.lm}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac)

Coefficients:
(Intercept)        Beers  
   -0.01270      0.01796  
\end{verbatim}

\begin{itemize}
\tightlist
\item
  After running the \texttt{lm} command above in your R console, check the \textbf{Environment} tab to see that the object \texttt{bac.lm} is now one of the objects stored in R's memory (for this session of Rstudio).
\item
  Write down the fitted regression equation to predict BAC from number of beers.
\end{itemize}

Click for answer

\emph{Answer:} \(\hat{y} = \ldots\)

\begin{itemize}
\tightlist
\item
  You can add this regression line to your scatterplot from part (a) by creating the plot and using the \texttt{abline} command:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Customized scatter plot with regression line}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ BAC)) }\SpecialCharTok{+} 
     \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{shape =} \DecValTok{19}\NormalTok{) }\SpecialCharTok{+}
     \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{method =} \StringTok{"lm"}\NormalTok{, }\AttributeTok{se =} \ConstantTok{FALSE}\NormalTok{, }\AttributeTok{color =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
     \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Beer and BAC"}\NormalTok{,}
          \AttributeTok{x =} \StringTok{"Number of beers drank"}\NormalTok{,}
          \AttributeTok{y =} \StringTok{"Blood Alcohol Content"}\NormalTok{) }\SpecialCharTok{+}
     \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_6_files/figure-latex/unnamed-chunk-7-1}

\hypertarget{d-interpret-the-slope-in-context.}{%
\subsection{(d) Interpret the slope in context.}\label{d-interpret-the-slope-in-context.}}

Click for answer

\emph{Answer:} Drinking one more beer is associated with a 0.0180 unit increase in predicted BAC.

\hypertarget{e-interpret-the-intercept-in-context-if-it-makes-sense-to-do-so.}{%
\subsection{(e) Interpret the intercept in context, if it makes sense to do so.}\label{e-interpret-the-intercept-in-context-if-it-makes-sense-to-do-so.}}

Click for answer

\emph{Answer:} The intercept is -0.0127. A student who drinks 0 beers would be predicted to have a negative blood alcohol content. This is not possible so the intercept does not make sense in this context, but the intercept is included in the model to get the best fit line for the data collected.

\hypertarget{f-if-your-friend-at-ohio-state-drank-2-beers-what-would-you-predict-their-bac-to-be}{%
\subsection{(f) If your friend at Ohio State drank 2 beers, what would you predict their BAC to be?}\label{f-if-your-friend-at-ohio-state-drank-2-beers-what-would-you-predict-their-bac-to-be}}

Click for answer

\emph{Answer:} The predicted BAC is

\[
\widehat{BAC} = -0.0127 + 0.0180(2) = 0.0233.
\]

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{y.hat }\OtherTok{\textless{}{-}} \SpecialCharTok{{-}}\FloatTok{0.0127} \SpecialCharTok{+} \FloatTok{0.0180}\SpecialCharTok{*}\NormalTok{(}\DecValTok{2}\NormalTok{) }
\NormalTok{y.hat}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.0233
\end{verbatim}

\hypertarget{g-find-the-residual-for-the-student-in-the-dataset-who-drank-2-beers-and-had-a-bac-of-0.03.}{%
\subsection{(g) Find the residual for the student in the dataset who drank 2 beers and had a BAC of 0.03.}\label{g-find-the-residual-for-the-student-in-the-dataset-who-drank-2-beers-and-had-a-bac-of-0.03.}}

Click for answer

\emph{Answer:} The residual is

\[
BAC - \widehat{BAC} = .03 - .0233=0.0067
\]

\begin{Shaded}
\begin{Highlighting}[]
\FloatTok{0.03} \SpecialCharTok{{-}}\NormalTok{ (}\SpecialCharTok{{-}}\FloatTok{0.0127} \SpecialCharTok{+} \FloatTok{0.0180}\SpecialCharTok{*}\NormalTok{(}\DecValTok{2}\NormalTok{)) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.0067
\end{verbatim}

\hypertarget{h-getting-residuals-in-r}{%
\subsection{(h) Getting residuals in R}\label{h-getting-residuals-in-r}}

We can use the \texttt{resid} command to get the residuals for each case in the data set:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Residuals }
\NormalTok{residuals }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{Beers =}\NormalTok{ bac}\SpecialCharTok{$}\NormalTok{Beers, }\AttributeTok{Residuals =} \FunctionTok{resid}\NormalTok{(bac.lm))}
\NormalTok{residuals}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   Beers    Residuals
1      5  0.022881795
2      2  0.006773080
3      9  0.041026747
4      8 -0.011009491
5      3 -0.001190682
6      7 -0.018045729
7      3  0.028809318
8      5 -0.017118205
9      3 -0.021190682
10     5 -0.027118205
11     4  0.010845557
12     6  0.004918033
13     5  0.007881795
14     7 -0.023045729
15     1  0.004736842
16     4 -0.009154443
\end{verbatim}

\hypertarget{i-getting-r2-value}{%
\subsection{\texorpdfstring{(i) Getting \(R^2\) value}{(i) Getting R\^{}2 value}}\label{i-getting-r2-value}}

You can use the \texttt{summary} command on an \texttt{lm} object to get a more detailed print out of your linear model, along with the \(R^2\) value for your model:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(bac.lm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.027118 -0.017350  0.001773  0.008623  0.041027 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept) -0.012701   0.012638  -1.005    0.332    
Beers        0.017964   0.002402   7.480 2.97e-06 ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.02044 on 14 degrees of freedom
Multiple R-squared:  0.7998,    Adjusted R-squared:  0.7855 
F-statistic: 55.94 on 1 and 14 DF,  p-value: 2.969e-06
\end{verbatim}

\hypertarget{j-making-a-residuals-plot}{%
\subsection{(j) Making a residuals plot}\label{j-making-a-residuals-plot}}

The regression of \texttt{BAC} on \texttt{Beers} has a residuals plot that plots the model's residuals on the y-axis and the explanatory (``predictor'') on the x-axis. We add a horizontal reference line (the detrended regression line) with the \texttt{geom\_hline()} command:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# code for residual plot}
\FunctionTok{ggplot}\NormalTok{(}\AttributeTok{data =}\NormalTok{ residuals, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Beers, }\AttributeTok{y =}\NormalTok{ Residuals)) }\SpecialCharTok{+}
           \FunctionTok{geom\_point}\NormalTok{(}\AttributeTok{shape =} \DecValTok{19}\NormalTok{) }\SpecialCharTok{+}
           \FunctionTok{geom\_hline}\NormalTok{(}\AttributeTok{yintercept =} \DecValTok{0}\NormalTok{, }\AttributeTok{color =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
           \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Residuals Plot"}\NormalTok{,}
                \AttributeTok{x =} \StringTok{"Number of beers drank"}\NormalTok{,}
                \AttributeTok{y =} \StringTok{"Residuals"}\NormalTok{) }\SpecialCharTok{+}
           \FunctionTok{theme\_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_6_files/figure-latex/unnamed-chunk-12-1}

\textbf{Interpret:} There is one case of 9 beers with a large residual (much higher BAC than predicted), but since there is no clear pattern (trend) in this plot it looks like our regression model adequately describes the relationship between number of beers and BAC.

\begin{itemize}
\tightlist
\item
  Is the magnitude of the scatter around the horizontal 0-line in the residuals plot greater than, less than, or the same as the magnitude of the scatter around the regression line in the scatterplot?
\end{itemize}

Click for answer

\emph{Answer:} The same! The residuals plot is only a ``detrended'' scatterplot, meaning the vertical distances between a point and the regression line on the scatterplot or a point and the 0-line on the residuals plot are exactly the same. The residual plot looks more scattered because the trend is removed and the scale of the y-axis compressed.

\hypertarget{k-identifying-points}{%
\subsection{(k) Identifying points}\label{k-identifying-points}}

We can use the functions \texttt{filter} and \texttt{row\_number} from the \texttt{dplyr} package to find the index of Beers equal to 9.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Use \textasciigrave{}which\textasciigrave{} to find the index of Beers equal to 9}
\NormalTok{index }\OtherTok{\textless{}{-}} \FunctionTok{which}\NormalTok{(bac}\SpecialCharTok{$}\NormalTok{Beers }\SpecialCharTok{==} \DecValTok{9}\NormalTok{)}
\NormalTok{index}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 3
\end{verbatim}

Click for answer

\emph{Answer:} Row 3.

What is the row number of the case with the most negative residual? We could eyeball the graph to see that the most negative residual is less than -0.02:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Find residuals less than {-}0.02}
\NormalTok{resid\_less\_than\_neg\_002 }\OtherTok{\textless{}{-}} \FunctionTok{resid}\NormalTok{(bac.lm) }\SpecialCharTok{\textless{}} \SpecialCharTok{{-}}\FloatTok{0.02}
\FunctionTok{resid}\NormalTok{(bac.lm)[resid\_less\_than\_neg\_002]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
          9          10          14 
-0.02119068 -0.02711821 -0.02304573 
\end{verbatim}

But this identifies 3 cases. We also can see that the lowest residual drank 5 beers. We can add this statement to the original one using the ``and'' sign \texttt{\&}:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# which case had resid less than {-}0.02 AND drank 5 beers}
\FunctionTok{resid}\NormalTok{(bac.lm)[}\FunctionTok{which}\NormalTok{(}\FunctionTok{resid}\NormalTok{(bac.lm) }\SpecialCharTok{\textless{}} \SpecialCharTok{{-}}\FloatTok{0.02} \SpecialCharTok{\&}\NormalTok{ bac}\SpecialCharTok{$}\NormalTok{Beers }\SpecialCharTok{==} \DecValTok{5}\NormalTok{)]}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
         10 
-0.02711821 
\end{verbatim}

\hypertarget{l-checking-outlier-influence}{%
\subsection{(l) Checking outlier influence}\label{l-checking-outlier-influence}}

Will the regression line slope increase, decrease or stay the same if we remove case 3, the 9 beer case, from our model?

Check your answer by adding \texttt{subset\ =\ -3} to the \texttt{lm} command (this removes row 3):

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# define a different linear model with row 3 removed }
\NormalTok{bac.lm2 }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data=}\NormalTok{bac, }\AttributeTok{subset =} \SpecialCharTok{{-}}\DecValTok{3}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Compare the two models}
\FunctionTok{summary}\NormalTok{(bac.lm2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac, subset = -3)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.023685 -0.010068 -0.003685  0.011985  0.027208 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept) 2.481e-05  1.088e-02   0.002    0.998    
Beers       1.455e-02  2.216e-03   6.568  1.8e-05 ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.01624 on 13 degrees of freedom
Multiple R-squared:  0.7684,    Adjusted R-squared:  0.7506 
F-statistic: 43.14 on 1 and 13 DF,  p-value: 1.802e-05
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(bac.lm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.027118 -0.017350  0.001773  0.008623  0.041027 

Coefficients:
             Estimate Std. Error t value Pr(>|t|)    
(Intercept) -0.012701   0.012638  -1.005    0.332    
Beers        0.017964   0.002402   7.480 2.97e-06 ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.02044 on 14 degrees of freedom
Multiple R-squared:  0.7998,    Adjusted R-squared:  0.7855 
F-statistic: 55.94 on 1 and 14 DF,  p-value: 2.969e-06
\end{verbatim}

\begin{itemize}
\tightlist
\item
  After removing case 3, how has the slope changed? Explain the why the change occurred.
\end{itemize}

Click for answer

\emph{Answer:} The slope drops from 0.0180 to 0.0146. Explanation given above.

\begin{itemize}
\tightlist
\item
  After removing case 3, how has the \(R^2\) changed? Explain the why the change occurred.
\end{itemize}

Click for answer

\emph{Answer:} The \(R^2\) descreases from 79.9\% to 76.8\%. This small decrease happens because case 3 actually enhances the overall linear trend and removing it results is a slight decrease to correlation and \(R^2\).

\hypertarget{m-adding-a-categorical-variable-to-your-plot}{%
\subsection{(m) Adding a categorical variable to your plot}\label{m-adding-a-categorical-variable-to-your-plot}}

We can create a scatterplot with plotting symbols color coded by a categorical grouping variable using \texttt{ggplot2} package. We use the \texttt{geom\_point()} plot geometry to get a scatterplot with the \texttt{x}, \texttt{y}, and \texttt{color} aesthetics specified. Here we look at the \texttt{BAC} vs.~\texttt{Beers} plot with \texttt{Gender} added:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(bac, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{Beers, }\AttributeTok{y=}\NormalTok{BAC, }\AttributeTok{color=}\NormalTok{Gender)) }\SpecialCharTok{+} \FunctionTok{geom\_point}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_6_files/figure-latex/unnamed-chunk-18-1}

\begin{itemize}
\tightlist
\item
  Are the associations similiar? (form, strength, direction)
\end{itemize}

Click for answer

\emph{Answer:} Both females and males have similar strong, positive linear associations.

\hypertarget{n-regression-lines-by-groups}{%
\subsection{(n) Regression lines by groups}\label{n-regression-lines-by-groups}}

A quick way to get the male and female regression line formulas for part (c) is to add a \texttt{subset} argument to the \texttt{lm} command:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Fit linear regression model for female}
\NormalTok{bac.lm.female }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac, }\AttributeTok{subset =}\NormalTok{ Gender }\SpecialCharTok{==} \StringTok{"female"}\NormalTok{)}
\NormalTok{bac.lm.female}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac, subset = Gender == "female")

Coefficients:
(Intercept)        Beers  
   -0.01567      0.02067  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Fit linear regression model for male}
\NormalTok{bac.lm.male }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac, }\AttributeTok{subset =}\NormalTok{ Gender }\SpecialCharTok{==} \StringTok{"male"}\NormalTok{)}
\NormalTok{bac.lm.male}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac, subset = Gender == "male")

Coefficients:
(Intercept)        Beers  
  -0.009785     0.015341  
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What is the regression line for females? for males?
\end{itemize}

Click for answer

\emph{Answer:} For females: \(\widehat{BAC} = -0.016 +0.021(BAC)\) and for males: \(\widehat{BAC} = -0.01 +0.015(BAC)\)

\begin{itemize}
\tightlist
\item
  Which gender has the largest slope? What does this suggest about the relationship between number of beers and BAC for this gender?
\end{itemize}

Click for answer

\emph{Answer:} The slope for females is slightly higher. This shows that the effect of one more beer on predicted BAC in females is larger than males (a 0.021 increase vs.~a 0.015 increase).

Another way to obtain regression models by \texttt{Gender} is to split the data set in a female and male data set, then run your \texttt{lm} on these two data sets. The benefit of this method is you can then create a residuals plot for your model much easier than the quicker method above:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filter data for female}
\NormalTok{bac\_female }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(bac, Gender }\SpecialCharTok{==} \StringTok{"female"}\NormalTok{)}

\CommentTok{\# Fit linear regression model for female}
\NormalTok{bac\_lm\_female }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac\_female)}
\NormalTok{bac\_lm\_female}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac_female)

Coefficients:
(Intercept)        Beers  
   -0.01567      0.02067  
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Filter data for male}
\NormalTok{bac\_male }\OtherTok{\textless{}{-}} \FunctionTok{filter}\NormalTok{(bac, Gender }\SpecialCharTok{==} \StringTok{"male"}\NormalTok{)}

\CommentTok{\# Fit linear regression model for male}
\NormalTok{bac\_lm\_male }\OtherTok{\textless{}{-}} \FunctionTok{lm}\NormalTok{(BAC }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Beers, }\AttributeTok{data =}\NormalTok{ bac\_male)}
\NormalTok{bac\_lm\_male}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

Call:
lm(formula = BAC ~ Beers, data = bac_male)

Coefficients:
(Intercept)        Beers  
  -0.009785     0.015341  
\end{verbatim}

\hypertarget{class-activity-7}{%
\chapter{Class Activity 7}\label{class-activity-7}}

\hypertarget{your-turn-1-4}{%
\section{Your Turn 1}\label{your-turn-1-4}}

\hypertarget{example-1-using-search-engines-on-the-internet}{%
\section{Example 1: Using Search Engines on the Internet}\label{example-1-using-search-engines-on-the-internet}}

A 2012 survey of a random sample of 2253 US adults found that 1,329 of them reported using a search engine (such as Google) every day to find information on the Internet.

\hypertarget{a.-find-the-relevant-proportion-and-give-the-correct-notation-with-it.}{%
\subsection{a). Find the relevant proportion and give the correct notation with it.}\label{a.-find-the-relevant-proportion-and-give-the-correct-notation-with-it.}}

Click for answer

\emph{Answer:} \(\hat{p} = 1329/2253\)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{p.hat }\OtherTok{\textless{}{-}} \DecValTok{1329}\SpecialCharTok{/}\DecValTok{2253}
\NormalTok{p.hat}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.5898802
\end{verbatim}

\hypertarget{b.-is-your-answer-to-part-a-a-parameter-or-a-statistic}{%
\subsection{b). Is your answer to part (a) a parameter or a statistic?}\label{b.-is-your-answer-to-part-a-a-parameter-or-a-statistic}}

Click for answer

\emph{Answer:} Statistic

\hypertarget{c.-give-notation-for-and-define-the-population-parameter-that-we-estimate-using-the-result-of-part-a.}{%
\subsection{c). Give notation for and define the population parameter that we estimate using the result of part (a).}\label{c.-give-notation-for-and-define-the-population-parameter-that-we-estimate-using-the-result-of-part-a.}}

Click for answer

\emph{Answer:} p = the proportion of all US adults that would report that they use an Internet search engine every day

\hypertarget{example-2-bootstrapping-mean}{%
\section{Example 2: Bootstrapping mean}\label{example-2-bootstrapping-mean}}

Let's use R to perform bootstrapping and visualize the distribution of the sample mean. We need to load the purrr library to do more effective simulation. Create a vector X containing the data points:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{X }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{20}\NormalTok{, }\DecValTok{24}\NormalTok{, }\DecValTok{19}\NormalTok{, }\DecValTok{23}\NormalTok{, }\DecValTok{22}\NormalTok{, }\DecValTok{16}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{a.-generate-500-bootstrapped-samples-of-the-data-calculate-the-mean-for-each-sample-and-store-the-results-in-a-tibble}{%
\subsection{a. Generate 500 bootstrapped samples of the data, calculate the mean for each sample, and store the results in a tibble:}\label{a.-generate-500-bootstrapped-samples-of-the-data-calculate-the-mean-for-each-sample-and-store-the-results-in-a-tibble}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{bootstrapped\_means }\OtherTok{\textless{}{-}} \FunctionTok{tibble}\NormalTok{(}
  \AttributeTok{iteration =} \DecValTok{1}\SpecialCharTok{:}\DecValTok{500}\NormalTok{,}
  \AttributeTok{mean =} \FunctionTok{map\_dbl}\NormalTok{(iteration, }
                 \SpecialCharTok{\textasciitilde{}}\FunctionTok{mean}\NormalTok{(}\FunctionTok{sample}\NormalTok{(X, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{)))}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{b.-create-a-dot-plot-to-visualize-the-distribution-of-the-bootstrapped-sample-means}{%
\subsection{b. Create a dot plot to visualize the distribution of the bootstrapped sample means:}\label{b.-create-a-dot-plot-to-visualize-the-distribution-of-the-bootstrapped-sample-means}}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{ggplot}\NormalTok{(bootstrapped\_means, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ mean)) }\SpecialCharTok{+}
  \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.7}\NormalTok{, }
               \AttributeTok{stackratio =} \FloatTok{0.9}\NormalTok{, }
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{13}\NormalTok{, }
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{, }
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{xlab}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{17}\NormalTok{, }\DecValTok{24}\NormalTok{), }
                     \AttributeTok{expand =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{0}\NormalTok{), }
                     \AttributeTok{breaks =} \FunctionTok{seq}\NormalTok{(}\DecValTok{17}\NormalTok{, }\DecValTok{24}\NormalTok{, }\DecValTok{1}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Bootstrap distribution of sample mean"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-4-1}

\emph{Question:} What does each dot represent?

Click for answer

\emph{Answer:} One sample mean from the bootstrapped sample.

\emph{Question:} What is the shape of your sampling distribution?

Click for answer

\emph{Answer:} Roughly symmetric.

\emph{Question:} Where is your distribution centered?

Click for answer

\emph{Answer:} About 20.5

\emph{Question:} The distribution should be centered at the original sample mean. Verify it. Do we know the population mean? If not, what does it tell us about the center of this distribution.

Click for answer

\emph{Answer:} It is close to the original sample mean. We do not know the population mean, so the bootstrap distribution will carry the bias of the original sample mean.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# r{-}code}
\FunctionTok{mean}\NormalTok{(bootstrapped\_means}\SpecialCharTok{$}\NormalTok{mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 20.65
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(X)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 20.66667
\end{verbatim}

\emph{Question:} What is the standard deviation of this distribution? (Hint: use the 95\% rule.)

Click for answer

\emph{Answer:} About 1.25, it looks like most of the bootstrapped sample means are between 18 to 23 so 2 standard deviations is about 2.5. This makes the SD about 1.25.

\emph{Question:} The standard deviation of sampling distribution has a separate name. It is called the \textbf{Standard Error}. Verify the standard deviation of this distribution using R-code.

Click for answer

\emph{Answer:} It's close.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# r{-}code}
\FunctionTok{sd}\NormalTok{(bootstrapped\_means}\SpecialCharTok{$}\NormalTok{mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 1.154098
\end{verbatim}

\hypertarget{example-3-simulation-of-a-sample-proportion}{%
\section{Example 3: Simulation of a Sample Proportion}\label{example-3-simulation-of-a-sample-proportion}}

According to a PEW survey, \(66\%\) of U.S. adult citizens casted a ballot in the 2020 election. Suppose we take a random sample of \(n=100\) eligible U.S. voters and computed the sample proportion who voted.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Call the library}
\FunctionTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Define parameters}
\NormalTok{pop.prop }\OtherTok{\textless{}{-}}\NormalTok{ .}\DecValTok{66} \CommentTok{\# Population proportion}
\NormalTok{n.size }\OtherTok{\textless{}{-}} \DecValTok{100}  \CommentTok{\# sample size}
\end{Highlighting}
\end{Shaded}

\hypertarget{a-generate-a-random-sample-of-size-n-100-and-plot-its-sample-proportion.}{%
\subsection{\texorpdfstring{(a) Generate a random sample of size \(n= 100\) and plot its sample proportion.}{(a) Generate a random sample of size n= 100 and plot its sample proportion.}}\label{a-generate-a-random-sample-of-size-n-100-and-plot-its-sample-proportion.}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Generate 1 sample}
\NormalTok{sample1 }\OtherTok{\textless{}{-}} \FunctionTok{rbinom}\NormalTok{(}\AttributeTok{n =} \DecValTok{1}\NormalTok{, }\AttributeTok{size =}\NormalTok{ n.size, }\AttributeTok{p =}\NormalTok{ pop.prop) }\CommentTok{\# R simulates the samples}
\NormalTok{sample.prop1 }\OtherTok{\textless{}{-}}\NormalTok{ sample1}\SpecialCharTok{/}\NormalTok{n.size }\CommentTok{\#  Proportion = No. of Success / Sample Size}
\end{Highlighting}
\end{Shaded}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# define a data frame}
\NormalTok{mydata }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sample.prop1)}

\CommentTok{\# Plot a dot plot of the sample proportion}
\FunctionTok{ggplot}\NormalTok{(mydata, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
   \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.25}\NormalTok{,}
               \AttributeTok{stackratio =} \FloatTok{0.75}\NormalTok{,}
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{025}\NormalTok{,}
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{,}
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{"A single sample proportion"}\NormalTok{) }\SpecialCharTok{+}  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Proportion"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{"Count"}\NormalTok{)}\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-10-1}

\hypertarget{b-generate-5-random-samples-of-size-n-100-and-plot-the-sample-proportions.}{%
\subsection{\texorpdfstring{(b) Generate 5 random samples of size \(n= 100\) and plot the sample proportions.}{(b) Generate 5 random samples of size n= 100 and plot the sample proportions.}}\label{b-generate-5-random-samples-of-size-n-100-and-plot-the-sample-proportions.}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# generate 5 random samples of size 100}
\NormalTok{sample5 }\OtherTok{\textless{}{-}} \FunctionTok{rbinom}\NormalTok{(}\AttributeTok{n =} \DecValTok{5}\NormalTok{, }\AttributeTok{size =}\NormalTok{ n.size, }\AttributeTok{p =}\NormalTok{ pop.prop)  }
\NormalTok{sample.prop5 }\OtherTok{\textless{}{-}}\NormalTok{ sample5}\SpecialCharTok{/}\NormalTok{n.size }

\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sample.prop5)}

\FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
   \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.25}\NormalTok{,}
               \AttributeTok{stackratio =} \FloatTok{0.75}\NormalTok{,}
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{025}\NormalTok{,}
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{,}
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+}  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Proportion"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{"Count"}\NormalTok{)}\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-11-1}

\hypertarget{c-generate-500-random-samples-of-size-n-100-and-plot-the-sample-proportions.}{%
\subsection{\texorpdfstring{(c) Generate 500 random samples of size \(n= 100\) and plot the sample proportions.}{(c) Generate 500 random samples of size n= 100 and plot the sample proportions.}}\label{c-generate-500-random-samples-of-size-n-100-and-plot-the-sample-proportions.}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Generate 500 samples}
\FunctionTok{set.seed}\NormalTok{(}\DecValTok{143}\NormalTok{)}
\NormalTok{sample500 }\OtherTok{\textless{}{-}} \FunctionTok{rbinom}\NormalTok{(}\AttributeTok{n =} \DecValTok{500}\NormalTok{, }\AttributeTok{size =}\NormalTok{ n.size, }\AttributeTok{p =}\NormalTok{ pop.prop)  }
\NormalTok{sample.prop500 }\OtherTok{\textless{}{-}}\NormalTok{ sample500}\SpecialCharTok{/}\NormalTok{n.size }

\NormalTok{data }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sample.prop500)}

\FunctionTok{ggplot}\NormalTok{(data, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
  \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.25}\NormalTok{,}
               \AttributeTok{stackratio =} \FloatTok{0.75}\NormalTok{,}
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{025}\NormalTok{,}
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{,}
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+}  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Proportion"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-12-1}

\emph{Question:} What does each dot represent?

Click for answer

\emph{Answer:} One sample proportion from a sample of n=100 eligible voters.

\emph{Question:} What is the shape of your sampling distribution?

Click for answer

\emph{Answer:} Roughly symmetric.

\emph{Question:} Where is your distribution centered?

Click for answer

\emph{Answer:} About 0.66, which is the population proportion.

\emph{Question:} The distribution should be centered at the population proportion. Verify that the distribution is centered around the population proportion, \(p = 0.66\).

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# r{-}code}
\FunctionTok{mean}\NormalTok{(sample.prop500)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.66298
\end{verbatim}

\emph{Question:} What is the standard deviation of this distribution? (Hint: use the 95\% rule.)

Click for answer

\emph{Answer:} About 0.05, it looks like most sample proportions are between 0.55 to 0.75 so 2 standard deviations is about 0.10. This makes the SD about 0.05.

\emph{Question:} The standard deviation of sampling distribution has a separate name. It is called the \textbf{Standard Error}. Verify the standard deviation of this distribution using R-code.

Click for answer

\emph{Answer:}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# r{-}code}
\FunctionTok{sd}\NormalTok{(sample.prop500)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.0494673
\end{verbatim}

\#\#\# (d) Repeat part(c) with sample size 20 instead of 100. Generate 500 samples.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{n.size }\OtherTok{\textless{}{-}} \DecValTok{10}
\NormalTok{pop.prop }\OtherTok{\textless{}{-}}\NormalTok{ .}\DecValTok{66} \CommentTok{\# Population proportion}

\NormalTok{sample500\_size10 }\OtherTok{\textless{}{-}} \FunctionTok{rbinom}\NormalTok{(}\AttributeTok{n =} \DecValTok{500}\NormalTok{, }\AttributeTok{size =}\NormalTok{ n.size, }\AttributeTok{p =}\NormalTok{ pop.prop)  }
\NormalTok{sample.prop500\_size10 }\OtherTok{\textless{}{-}}\NormalTok{ sample500\_size10}\SpecialCharTok{/}\NormalTok{n.size }

\NormalTok{data\_size10 }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sample.prop500\_size10)}

\FunctionTok{ggplot}\NormalTok{(data\_size10, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
 \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.25}\NormalTok{,}
               \AttributeTok{stackratio =} \FloatTok{0.75}\NormalTok{,}
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{015}\NormalTok{,}
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{,}
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+}  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Proportion"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-15-1}

\emph{Question:} How has the sampling distribution changed? (Shape? Center? Variability?)

Click for answer

\emph{Answer:} The shape is slightly left skewed, still centered at 0.66 but with more variability that before (SD of about 0.10). This distribution is more discrete looking because there are just a few sample proportions possible with n=20 (e.g.~20/20, 19/20, 18/20, etc).

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(sample.prop500\_size10)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.6618
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sd}\NormalTok{(sample.prop500\_size10)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.1415657
\end{verbatim}

\#\#\# (d) Now suppose the population proportion is \(p=0.90\) instead of \(p=0.66\) in part (e). Keep n.size=10.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pop.prop.large }\OtherTok{\textless{}{-}} \FloatTok{0.90}
\NormalTok{n.size }\OtherTok{\textless{}{-}} \DecValTok{10}

\NormalTok{sample500\_size10\_large\_p }\OtherTok{\textless{}{-}} \FunctionTok{rbinom}\NormalTok{(}\AttributeTok{n =} \DecValTok{500}\NormalTok{, }\AttributeTok{size =}\NormalTok{ n.size, }\AttributeTok{p =}\NormalTok{ pop.prop.large)  }
\NormalTok{sample.prop500\_size10\_large\_p }\OtherTok{\textless{}{-}}\NormalTok{ sample500\_size10\_large\_p}\SpecialCharTok{/}\NormalTok{n.size }

\NormalTok{data\_size10\_large\_p }\OtherTok{\textless{}{-}} \FunctionTok{data.frame}\NormalTok{(}\AttributeTok{x =}\NormalTok{ sample.prop500\_size10\_large\_p)}

\FunctionTok{ggplot}\NormalTok{(data\_size10\_large\_p, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ x)) }\SpecialCharTok{+}
 \FunctionTok{geom\_dotplot}\NormalTok{(}\AttributeTok{dotsize =} \FloatTok{0.25}\NormalTok{,}
               \AttributeTok{stackratio =} \FloatTok{0.75}\NormalTok{,}
               \AttributeTok{binwidth =}\NormalTok{ .}\DecValTok{015}\NormalTok{,}
               \AttributeTok{color =} \StringTok{"gold"}\NormalTok{,}
               \AttributeTok{fill =} \StringTok{"blue"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{ggtitle}\NormalTok{(}\StringTok{""}\NormalTok{) }\SpecialCharTok{+}  \FunctionTok{xlab}\NormalTok{(}\StringTok{"Proportion"}\NormalTok{) }\SpecialCharTok{+} \FunctionTok{ylab}\NormalTok{(}\StringTok{"Count"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_continuous}\NormalTok{(}\AttributeTok{limits =} \FunctionTok{c}\NormalTok{(}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{))}\SpecialCharTok{+} 
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{plot.title =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{hjust =} \FloatTok{0.5}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_7_files/figure-latex/unnamed-chunk-17-1}

\emph{Question:} How has the sampling distribution changed? (Shape? Center? Variability?)

Click for answer

\emph{Answer:} The shape is much more left skewed than when p=0.66. Center is around 0.90 and SD is around 0.07. Note that increasing the population proportion closer to 1 results in a decrease in the SD because most samples give proportion near 1.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(sample.prop500\_size10\_large\_p)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.9
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{sd}\NormalTok{(sample.prop500\_size10\_large\_p)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.09261293
\end{verbatim}

\hypertarget{class-activity-8}{%
\chapter{Class Activity 8}\label{class-activity-8}}

\hypertarget{example-1-textbook-prices}{%
\section{Example 1: Textbook Prices}\label{example-1-textbook-prices}}

Prices of a random sample of 10 textbooks (rounded to the nearest dollar) are shown:

\[ \$132 \quad \$87 \quad \$185 \quad \$52 \quad \$23 \quad \$147 \quad \$125 \quad \$93 \quad \$85 \quad \$72 \]

\hypertarget{a.-what-is-the-sample-mean-verify-using-r-code.}{%
\subsection{(a). What is the sample mean? Verify using r-code.}\label{a.-what-is-the-sample-mean-verify-using-r-code.}}

Click for answer

\emph{Answer:} The sample mean is \(\bar{x} = 100.1\)

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{prices }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\DecValTok{132}\NormalTok{,}\DecValTok{87}\NormalTok{, }\DecValTok{185}\NormalTok{, }\DecValTok{52}\NormalTok{, }\DecValTok{23}\NormalTok{, }\DecValTok{147}\NormalTok{, }\DecValTok{125}\NormalTok{, }\DecValTok{93}\NormalTok{, }\DecValTok{85}\NormalTok{, }\DecValTok{72}\NormalTok{)}
\FunctionTok{mean}\NormalTok{(prices)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 100.1
\end{verbatim}

\hypertarget{b.-describe-carefully-how-we-could-use-cards-to-create-one-bootstrap-statistic-from-this-sample.-be-specific.}{%
\subsection{(b). Describe carefully how we could use cards to create one bootstrap statistic from this sample. Be specific.}\label{b.-describe-carefully-how-we-could-use-cards-to-create-one-bootstrap-statistic-from-this-sample.-be-specific.}}

Click for answer

\emph{Answer:} We use 10 cards and write the 10 sample values on the cards. We then mix them up and draw one and record the value on it and put it back. Mix them up again, draw another, record the value, and put it back. Do this 10 times to get a ``with replacement'' sample of size 10. Then compute the sample mean of this bootstrap sample.

\hypertarget{c.-we-can-easily-instruct-r-to-do-this-with-a-simple-code-as-follows}{%
\subsection{(c). We can easily instruct R to do this with a simple code as follows:}\label{c.-we-can-easily-instruct-r-to-do-this-with-a-simple-code-as-follows}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{resample }\OtherTok{\textless{}{-}} \FunctionTok{sample}\NormalTok{(prices, }\AttributeTok{replace =} \ConstantTok{TRUE}\NormalTok{)}
\NormalTok{resample}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
 [1]  85  93  85 185 125  93  23 185  93  87
\end{verbatim}

\hypertarget{d.-where-will-be-bootstrap-distribution-be-centered-what-shape-do-we-expect-it-to-have}{%
\subsection{(d). Where will be bootstrap distribution be centered? What shape do we expect it to have?}\label{d.-where-will-be-bootstrap-distribution-be-centered-what-shape-do-we-expect-it-to-have}}

Click for answer

\emph{Answer:} It will be centered approximately at the sample mean of 100.1 and we expect it to be roughly bellshaped (it may be a bit skewed since the sample size of 10 is smallish).

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{example-2-statkey-atlanta-commute-distance}{%
\section{Example 2: Statkey Atlanta Commute Distance}\label{example-2-statkey-atlanta-commute-distance}}

Go to the website at \href{http://www.lock5stat.com/StatKey/}{Lock5Statkey}. Under the ``Bootstrap Confidence Intervals'' column, select the ``CI for Single Mean, Median, St.Dev''. Change the data set to Atlanta Commute (Distance). This data set gives a random sample of 500 worker commute distances (miles) for metropolitan Atlanta

\hypertarget{a.-use-the-original-sample-pane-to-determine-the-shape-of-these-500-commuter-distances-along-with-their-mean-and-standard-deviation.-write-down-these-stats-using-correct-notation.}{%
\subsection{(a). Use the ``Original Sample'' pane to determine the shape of these 500 commuter distances, along with their mean and standard deviation. Write down these stats using correct notation.}\label{a.-use-the-original-sample-pane-to-determine-the-shape-of-these-500-commuter-distances-along-with-their-mean-and-standard-deviation.-write-down-these-stats-using-correct-notation.}}

Click for answer

\emph{Answer:} The sample mean is \(\bar{x} = 18.16\) and the sample standard deviation is \(s = 13.798\).

\hypertarget{b.-click-generate-1-sample-to-create-one-bootstrap-sample-from-this-data.-explain-how-this-sample-was-generated.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}{%
\subsection{(b). Click ``Generate 1 Sample'' to create one bootstrap sample from this data. Explain how this sample was generated. Use the ``Bootstrap Sample'' pane to find the bootstrap statistic that was computed from this sample. What value is this bootstrap statistic? Repeat this a couple times.}\label{b.-click-generate-1-sample-to-create-one-bootstrap-sample-from-this-data.-explain-how-this-sample-was-generated.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}}

Click for answer

\emph{Answer:} The bootstrap sample was obtained by resampling from the 500 observed commute distances with
replacement. Basically we randomly select 500 distances from the data (with replacement).

The value of the bootstrap mean will vary.

\hypertarget{c.-now-click-the-generate-1000-samples-to-get-1000-bootstrap-sample-means.-is-the-bootstrap-distribution-centered-at-the-population-or-sample-mean-commute-distance}{%
\subsection{(c). Now click the ``Generate 1000 Samples'' to get 1000 bootstrap sample means. Is the bootstrap distribution centered at the population or sample mean commute distance?}\label{c.-now-click-the-generate-1000-samples-to-get-1000-bootstrap-sample-means.-is-the-bootstrap-distribution-centered-at-the-population-or-sample-mean-commute-distance}}

Click for answer

\emph{Answer:} The bootstrap distribution is always centered around the statistic that is being bootstrapped. Here it will be centered around the sample mean commute distance of about 18.16 miles. The population mean
commute distance is unknown!

\hypertarget{d.-what-is-the-bootstrap-se-for-the-sample-mean}{%
\subsection{(d). What is the bootstrap SE for the sample mean?}\label{d.-what-is-the-bootstrap-se-for-the-sample-mean}}

Click for answer

\emph{Answer:} The standard error from the bootstrap distribution is about 0.628.

\hypertarget{e.-compute-a-95-confidence-interval-for-the-average-commute-distance-in-metropolitan-atlanta.}{%
\subsection{(e). Compute a 95\% confidence interval for the average commute distance in metropolitan Atlanta.}\label{e.-compute-a-95-confidence-interval-for-the-average-commute-distance-in-metropolitan-atlanta.}}

Click for answer

\emph{Answer:} The sample mean is \(\bar{x} = 18.16\) and the standard error from the bootstrap distribution is about 0.618 so we compute the \(95\%\) confidence interval using \(18.16 \pm 2(0.628)\), giving an interval of 16.90 to 19.42 miles.

\hypertarget{f.-interpret-your-answer-to-e-in-context.}{%
\subsection{(f). Interpret your answer to (e) in context.}\label{f.-interpret-your-answer-to-e-in-context.}}

Click for answer

\emph{Answer:} We are 95\% confident that the average commuting distance in metropolitan Atlanta is between 16.90 and 19.42 miles.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{example-3-statkey-global-warming}{%
\section{Example 3: Statkey Global Warming}\label{example-3-statkey-global-warming}}

What percentage of Americans believe in global warming? A survey on 2,251 randomly selected individuals
conducted in October 2010 found that 1,328 answered Yes to the question ``Is there solid evidence of global
warming?'' To compute a bootstrap confidence interval for the proportion of all Americans who believe in
global warming, go to the website at \href{http://www.lock5stat.com/StatKey/}{Lock5Statkey}. Under the ``Bootstrap Confidence Intervals'' column, select the ``CI for Single Proportion''.

\hypertarget{a.-enter-the-data-for-this-survey-by-clicking-the-edit-data-button.-enter-2251-as-the-sample-size-and-1328-as-the-count.-what-is-the-sample-proportion-of-people-who-believe-in-global-warming-use-correct-notation}{%
\subsection{(a). Enter the data for this survey by clicking the ``Edit Data'' button. Enter 2251 as the sample size and 1328 as the count. What is the sample proportion of people who believe in global warming? Use correct notation!}\label{a.-enter-the-data-for-this-survey-by-clicking-the-edit-data-button.-enter-2251-as-the-sample-size-and-1328-as-the-count.-what-is-the-sample-proportion-of-people-who-believe-in-global-warming-use-correct-notation}}

Click for answer

\emph{Answer:} The sample proportion is \(\hat{p} = 0.59\).

\hypertarget{b.-generate-1-bootstrap-sample.-explain-how-this-sample-was-generated.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}{%
\subsection{(b). Generate 1 bootstrap sample. Explain how this sample was generated. Use the ``Bootstrap Sample'' pane to find the bootstrap statistic that was computed from this sample. What value is this bootstrap statistic? Repeat this a couple times.}\label{b.-generate-1-bootstrap-sample.-explain-how-this-sample-was-generated.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}}

Click for answer

\emph{Answer:} The bootstrap sample was obtained by resampling the observed answers (``yes'' and ``no'') to the global warming question with replacement. Answers will vary for the bootstrap statistic (proportion)

\hypertarget{c.-generate-1000-samples-to-get-1000-bootstrap-sample-proportions.-is-the-bootstrap-distribution-centered-at-the-population-or-sample-proportion-describe-the-shape-and-center-of-this-bootstrap-distribution}{%
\subsection{(c). Generate 1000 samples to get 1000 bootstrap sample proportions. Is the bootstrap distribution centered at the population or sample proportion? Describe the shape and center of this bootstrap distribution}\label{c.-generate-1000-samples-to-get-1000-bootstrap-sample-proportions.-is-the-bootstrap-distribution-centered-at-the-population-or-sample-proportion-describe-the-shape-and-center-of-this-bootstrap-distribution}}

Click for answer

\emph{Answer:} The shape is symmetric around a center value of about 0.59, which is the sample proportion not the population proportion (which is unknown).

\hypertarget{d.-compute-a-95-confidence-interval-for-the-proportion-of-americans-who-believe-in-global-warming}{%
\subsection{(d). Compute a 95\% confidence interval for the proportion of Americans who believe in global warming}\label{d.-compute-a-95-confidence-interval-for-the-proportion-of-americans-who-believe-in-global-warming}}

Click for answer

\emph{Answer:} The sample proportion is \(\hat{p} = 0.59\) and the standard error from the bootstrap distribution is 0.010 so we compute the 95\% confidence interval using \(0.590 \pm 2(0.010),\) giving an interval of 0.57 to 0.61.

\hypertarget{e.-interpret-your-interval-from-part-d.}{%
\subsection{(e). Interpret your interval from part (d).}\label{e.-interpret-your-interval-from-part-d.}}

Click for answer

\emph{Answer:} We are 95\% confident that the proportion of Americans who believe there is solid evidence of global warming is between 0.57 and 0.61.

\hypertarget{f.-does-this-data-support-a-claim-that-a-majority-of-americans-believe-there-is-solid-evidence-of-global-warming-explain.}{%
\subsection{(f). Does this data support a claim that a majority of Americans believe there is solid evidence of global warming? Explain.}\label{f.-does-this-data-support-a-claim-that-a-majority-of-americans-believe-there-is-solid-evidence-of-global-warming-explain.}}

Click for answer

\emph{Answer:} Yes, the data does support this claim since we are confident that at least 50\% of Americans believe in global warming since the lower bound on the CI is 57\%.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{example-4.-statkey-global-warming-by-political-party}{%
\section{Example 4. Statkey Global Warming by Political Party}\label{example-4.-statkey-global-warming-by-political-party}}

Does belief in global warming differ by political party? When the question ``Is there solid evidence of global warming?'' was asked, the sample proportion answering ``yes'' was 79\% among Democrats and 38\% among
Republicans. To compute a bootstrap confidence interval for the difference in the proportion of Democrats
and Republicans who believe in global warming, go to the website at \href{http://www.lock5stat.com/StatKey/}{Lock5Statkey}. Under the ``Bootstrap Confidence Intervals'' column, select the ``CI for Difference in Proportions''.

\hypertarget{a.-enter-the-data-for-this-survey-by-clicking-the-edit-data-button.-one-big-assumption-we-will-make-is-that-the-sample-sizes-for-both-groups-dems-and-reps-were-each-1000.-enter-the-democrat-data-into-the-group-1-boxes-count-of-790-and-size-of-1000-and-the-republican-data-into-the-group-2-boxes-count-of-380-and-size-of-1000.-verify-that-the-sample-proportions-for-the-two-groups-are-79-and-38.-what-is-the-difference-in-the-two-sample-proportions-use-correct-notation.}{%
\subsection{(a). Enter the data for this survey by clicking the ``Edit Data'' button. One big assumption we will make is that the sample sizes for both groups (Dems and Reps) were each 1000. Enter the Democrat data into the ``Group 1'' boxes (count of 790 and size of 1000) and the Republican data into the ``Group 2'' boxes (count of 380 and size of 1000). Verify that the sample proportions for the two groups are 79\% and 38\%. What is the difference in the two sample proportions? Use correct notation.}\label{a.-enter-the-data-for-this-survey-by-clicking-the-edit-data-button.-one-big-assumption-we-will-make-is-that-the-sample-sizes-for-both-groups-dems-and-reps-were-each-1000.-enter-the-democrat-data-into-the-group-1-boxes-count-of-790-and-size-of-1000-and-the-republican-data-into-the-group-2-boxes-count-of-380-and-size-of-1000.-verify-that-the-sample-proportions-for-the-two-groups-are-79-and-38.-what-is-the-difference-in-the-two-sample-proportions-use-correct-notation.}}

Click for answer

\emph{Answer:} The sample difference in proportions is \(\hat{p}_{Dem} - \hat{p}_{Rep} = 0.79 - 0.38 = 0.41\)

\hypertarget{b.-generate-1-bootstrap-sample.-explain-how-this-sample-was-generated-give-this-some-thought-now-that-you-have-two-samples-of-data.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}{%
\subsection{(b). Generate 1 bootstrap sample. Explain how this sample was generated (give this some thought now that you have two samples of data). Use the ``Bootstrap Sample'' pane to find the bootstrap statistic that was computed from this sample. What value is this bootstrap statistic? Repeat this a couple times.}\label{b.-generate-1-bootstrap-sample.-explain-how-this-sample-was-generated-give-this-some-thought-now-that-you-have-two-samples-of-data.-use-the-bootstrap-sample-pane-to-find-the-bootstrap-statistic-that-was-computed-from-this-sample.-what-value-is-this-bootstrap-statistic-repeat-this-a-couple-times.}}

Click for answer

\emph{Answer:} One bootstrap sample was obtained from the group 1 sample (resampling the observed ``believe/not believe'' responses with replacement) and a separate bootstrap sample was obtained from the group 2 sample. The difference in the bootstrap proportions for each group was computed for the bootstrap difference statistic.

For individual bootstrap samples: answers will vary.

\hypertarget{c.-generate-1000-samples-to-get-1000-bootstrap-sample-proportion-differences.-describe-the-shape-and-center-of-this-bootstrap-distribution}{%
\subsection{(c). Generate 1000 samples to get 1000 bootstrap sample proportion differences. Describe the shape and center of this bootstrap distribution}\label{c.-generate-1000-samples-to-get-1000-bootstrap-sample-proportion-differences.-describe-the-shape-and-center-of-this-bootstrap-distribution}}

Click for answer

\emph{Answer:} The shape is symmetric around a center value of about 0.41 (the sample difference in proportions).

\hypertarget{d.-compute-a-95-confidence-interval-for-the-difference-between-the-proportion-of-democrats-and-republicans-who-believe-in-global-warming.}{%
\subsection{(d). Compute a 95\% confidence interval for the difference between the proportion of Democrats and Republicans who believe in global warming.}\label{d.-compute-a-95-confidence-interval-for-the-difference-between-the-proportion-of-democrats-and-republicans-who-believe-in-global-warming.}}

Click for answer

\emph{Answer:}
The sample difference in proportions is \(\hat{p}_{Dem} - \hat{p}_{Rep} = 0.79 - 0.38 = 0.41\), the standard error from the bootstrap distribution is 0.020 so we compute the 95\% confidence interval using \(0.41 \pm 2(0.020)\) giving an interval of 0.37 to 0.45.

\hypertarget{e.-interpret-your-interval-from-part-d-in-context-and-without-using-the-word-difference-i.e.-give-a-directional-claim-that-uses-words-like-more-or-less}{%
\subsection{(e). Interpret your interval from part (d) in context and without using the word difference!! (i.e.~give a directional claim that uses words like ``more'' or ``less'')}\label{e.-interpret-your-interval-from-part-d-in-context-and-without-using-the-word-difference-i.e.-give-a-directional-claim-that-uses-words-like-more-or-less}}

Click for answer

\emph{Answer:} We are 95\% confident that the percent of Democrats who believe there is solid evidence of global warming is between 37 and 45 percentage points higher than the percent of Republicans who believe this.

\hypertarget{f.-to-compute-this-interval-we-assumed-that-1000-people-were-sampled-from-each-subpopulation-dems-and-reps.-suppose-this-sample-size-was-just-500-people-for-each-group.-would-your-95-confidence-interval-be-wider-or-shorter-than-the-one-computed-in-part-d-explain.}{%
\subsection{(f). To compute this interval, we assumed that 1000 people were sampled from each subpopulation (Dems and Reps). Suppose this sample size was just 500 people for each group. Would your 95\% confidence interval be wider or shorter than the one computed in part (d)? Explain.}\label{f.-to-compute-this-interval-we-assumed-that-1000-people-were-sampled-from-each-subpopulation-dems-and-reps.-suppose-this-sample-size-was-just-500-people-for-each-group.-would-your-95-confidence-interval-be-wider-or-shorter-than-the-one-computed-in-part-d-explain.}}

Click for answer

\emph{Answer:} With fewer people in each group, we will get a larger bootstrap SE and hence a larger margin of error for the CI. Remember that the SE of a sampling distribution gets smaller as the sample size increases, the same behavior is seen in a bootstrap distribution.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\hypertarget{example-5-credit-loan-data}{%
\section{Example 5: Credit Loan Data}\label{example-5-credit-loan-data}}

The data set \texttt{CreditData.csv} contains records for 1000 loans that either defaulted (BadLoan) or did not default (GoodLoan). There are 300 loans that defaulted and 700 that did not. Let's consider that the 300 loans that defaulted are random sample of loans that default and the 700 non-defaulting loans are a random sample of loans that don't default.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{credit }\OtherTok{\textless{}{-}} \FunctionTok{read.csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/CreditData.csv"}\NormalTok{)}
\FunctionTok{table}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Good.Loan)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

 BadLoan GoodLoan 
     300      700 
\end{verbatim}

\hypertarget{a-visualize-age-vs.-default}{%
\subsection{(a) Visualize age vs.~default}\label{a-visualize-age-vs.-default}}

The variable \texttt{Age.in.years} gives the age of the person who received the loan. Construct a side-by-side boxplot of age by \texttt{Good.Loan} and compute the sample means for each group.

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Boxplot using ggplot2}
\FunctionTok{ggplot}\NormalTok{(credit, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Good.Loan, }\AttributeTok{y =}\NormalTok{ Age.in.years)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_8_files/figure-latex/unnamed-chunk-4-1}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Mean age for each Good.Loan category using dplyr}
\NormalTok{credit }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(Good.Loan) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarize}\NormalTok{(}\AttributeTok{mean\_age =} \FunctionTok{mean}\NormalTok{(Age.in.years))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 2
  Good.Loan mean_age
  <chr>        <dbl>
1 BadLoan       34.0
2 GoodLoan      36.2
\end{verbatim}

\begin{itemize}
\tightlist
\item
  What are the mean ages in each group?

  Click for answer

  \emph{Answer:} 34.0 years for the bad loan group and 36.2 years for the good loan group.
\item
  Describe the distribution of ages in each group. Are there any outliers that could be overly influential on the value(s) of the sample mean(s)?

  Click for answer

  \emph{Answer:} Both age distributions are somewhat right skewed with a few outliers identified by the boxplot rule. But there aren't any extremely unusual cases.
\end{itemize}

\hypertarget{b-bootstrap-ci-for-a-difference-in-means}{%
\subsubsection{(b) Bootstrap CI for a difference in means}\label{b-bootstrap-ci-for-a-difference-in-means}}

The \texttt{boot(y\ \textasciitilde{}\ x,\ data=)} command generates 10000 bootstrap samples for the true difference in means of \texttt{y} for each of the two groups in \texttt{x}. The command is contained in the \texttt{CarletonStats} package. Here we use it to compute the bootstrap distribution for the difference in mean ages of the two default groups:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(CarletonStats)}
\FunctionTok{boot}\NormalTok{(Age.in.years }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Good.Loan, }\AttributeTok{data=}\NormalTok{credit)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    ** Bootstrap interval for difference of statistic

 Observed difference of statistic:  BadLoan - GoodLoan =  -2.26095 
 Mean of bootstrap distribution: -2.26722 
 Standard error of bootstrap distribution: 0.77764 

 Bootstrap percentile interval
      2.5%      97.5% 
-3.7962143 -0.7390119 

        *--------------*
\end{verbatim}

\includegraphics[width=1\linewidth]{Class_Activity_8_files/figure-latex/unnamed-chunk-5-1}

\begin{itemize}
\tightlist
\item
  Give the difference in sample mean ages reported by the output. Use correct notation.

  Click for answer

  \emph{Answer:} The average age of people with a bad loan is about 2.3 years less than the average age of people with a good loan.
\item
  Give the 95\% confidence interval for the difference in mean ages using the percentile method

  Click for answer

  \emph{Answer:} The percentile interval is -3.8 to -0.7 years.
\item
  Compute the 95\% confidence interval for the difference in mean ages using the bootstrap SE. Is it similar to the CI from the percentile method?
\end{itemize}

Click for answer

\emph{Answer:} The CI using the SE is -3.8 to -0.7. The intervals are very similar.

\[
-2.26095 \pm 2(0.77852) = (-3.81799,  -0.70391)
\]

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\FloatTok{2.26095} \SpecialCharTok{{-}} \DecValTok{2}\SpecialCharTok{*}\NormalTok{(}\FloatTok{0.77852}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -3.81799
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\FloatTok{2.26095} \SpecialCharTok{+} \DecValTok{2}\SpecialCharTok{*}\NormalTok{(}\FloatTok{0.77852}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -0.70391
\end{verbatim}

\hypertarget{c-interpret}{%
\subsubsection{(c) Interpret}\label{c-interpret}}

Interpret your percentile interval in context using a directional statement. Does this interval suggest that the mean ages differ in the population of all good and bad loan holders?

Click for answer

\emph{Answer:} We are 95\% confident that the mean age of people who default on a loan for this population is about 0.7 to 3.8 years less than the mean age of people who do not default. This interval does support the notation that there is a difference in mean ages of these two groups in the population. It suggests that the average age of people who default is less than the average age of those who don't.

\hypertarget{example-6-credit-data-continued}{%
\section{Example 6 : Credit data continued}\label{example-6-credit-data-continued}}

The variable \texttt{Telephone} tells us if the individual has a phone number on their loan file. Let's look at the proportion of individuals who have a phone number for each type of loan (default or not).

\hypertarget{a-data-clean-up}{%
\subsubsection{(a) Data clean up}\label{a-data-clean-up}}

The entries in the \texttt{Telephone} column are either \texttt{none} or \texttt{yes,\ registered\ under\ the\ customers\ name}.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

                                    none 
                                     596 
yes, registered under the customers name 
                                     404 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Modify the Telephone variable levels using dplyr and forcats}
\NormalTok{credit }\OtherTok{\textless{}{-}}\NormalTok{ credit }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{Telephone =} \FunctionTok{recode}\NormalTok{(Telephone,}
                            \StringTok{"none"} \OtherTok{=} \StringTok{"no"}\NormalTok{,}
                            \StringTok{"yes, registered under the customers name"} \OtherTok{=} \StringTok{"yes"}\NormalTok{))}
\CommentTok{\# Convert the Telephone variable to a factor}
\NormalTok{credit}\SpecialCharTok{$}\NormalTok{Telephone }\OtherTok{\textless{}{-}} \FunctionTok{as.factor}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone)}
\CommentTok{\# Display the levels of the modified Telephone variable}
\FunctionTok{levels}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] "no"  "yes"
\end{verbatim}

\hypertarget{b-phone-rate-by-default-type}{%
\subsubsection{(b) Phone rate by default type}\label{b-phone-rate-by-default-type}}

Here we get the distribution of phone numbers (yes or no) by default type (good vs bad loan):

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{prop.table}\NormalTok{(}\FunctionTok{table}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Good.Loan, credit}\SpecialCharTok{$}\NormalTok{Telephone),}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
          
                  no       yes
  BadLoan  0.6233333 0.3766667
  GoodLoan 0.5842857 0.4157143
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(ggplot2)}
\FunctionTok{ggplot}\NormalTok{(credit, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x=}\NormalTok{Good.Loan, }\AttributeTok{fill=}\NormalTok{Telephone)) }\SpecialCharTok{+} \FunctionTok{geom\_bar}\NormalTok{(}\AttributeTok{position=}\StringTok{"fill"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_8_files/figure-latex/unnamed-chunk-9-1}

\begin{itemize}
\tightlist
\item
  What proportion of bad loans have a phone number on the account?

  Click for answer

  \emph{Answer:} About 37.7\% of bad loans have a phone number.
\item
  What proportion of good loans have a phone number on the account?

  Click for answer

  \emph{Answer:} About 41.6\% of good loans have a phone number.
\item
  What is the sample difference in the proportion of good loans and bad loans that have a phone number? Use correct notation for this number.

  Click for answer

  \emph{Answer:} Here we get \(\hat{p}_{good} - \hat{p}_{bad} =0.4157143 - 0.3766667 = 0.0390476\).
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FloatTok{0.4157143} \SpecialCharTok{{-}} \FloatTok{0.3766667}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.0390476
\end{verbatim}

\hypertarget{c-using-the-boot-command-with-a-categorical-response}{%
\subsubsection{\texorpdfstring{(c) Using the \texttt{boot} command with a categorical response}{(c) Using the boot command with a categorical response}}\label{c-using-the-boot-command-with-a-categorical-response}}

In order to get the bootstrap distribution for the sample difference in proportions, we need to recode the ``response'' variable \texttt{Telephone} to have a 1 indicating a ``yes'' response and 0 indicating a ``no'' response. This is done with an \texttt{ifelse} command:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{credit}\SpecialCharTok{$}\NormalTok{Telephone\_binary}\OtherTok{\textless{}{-}} \FunctionTok{ifelse}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone }\SpecialCharTok{==} \StringTok{"yes"}\NormalTok{, }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\FunctionTok{head}\NormalTok{(credit[,}\FunctionTok{c}\NormalTok{(}\StringTok{"Telephone"}\NormalTok{, }\StringTok{"Telephone\_binary"}\NormalTok{)])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
  Telephone Telephone_binary
1       yes                1
2        no                0
3        no                0
4        no                0
5        no                0
6       yes                1
\end{verbatim}

which reads ``if \texttt{Telephone} equals \texttt{yes} than assign a \texttt{1}, else assign a 0''. These 0's and 1's are assigned to a variable called \texttt{Telephone\_binary} that is now in your data frame (checked this with the \texttt{View(credit)} command).

Check your work to make sure \texttt{Telephone\_binary} records what you want it to record

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

 no yes 
596 404 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{table}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone\_binary)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

  0   1 
596 404 
\end{verbatim}

The mean of the 0/1 coded variable computes the proportion of ``yes'' responses:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{mean}\NormalTok{(credit}\SpecialCharTok{$}\NormalTok{Telephone\_binary)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.404
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\DecValTok{404}\SpecialCharTok{/}\DecValTok{1000}  \CommentTok{\# proportion of yes}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] 0.404
\end{verbatim}

Note: All examples in your \textbf{Lab Manual} already have this 0/1 recoding done in the lab manual data sets. But I thought you might want to learn how to do this recoding in case you plan to use this command with other, non-lab manual data sets!

\hypertarget{d-95-confidence-interval-for-the-difference-in-phone}{%
\subsubsection{(d) 95\% confidence interval for the difference in phone}\label{d-95-confidence-interval-for-the-difference-in-phone}}

We can now use the 0/1 version of telephone in the \texttt{boot} command (like example 1) to compute a 95\% bootstrap confidence interval for the difference in the population proportion of good loans and bad loans that have a phone number.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{boot}\NormalTok{(Telephone\_binary }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Good.Loan, }\AttributeTok{data=}\NormalTok{credit)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}

    ** Bootstrap interval for difference of statistic

 Observed difference of statistic:  BadLoan - GoodLoan =  -0.03905 
 Mean of bootstrap distribution: -0.03844 
 Standard error of bootstrap distribution: 0.03371 

 Bootstrap percentile interval
       2.5%       97.5% 
-0.10428571  0.02857143 

        *--------------*
\end{verbatim}

\includegraphics[width=1\linewidth]{Class_Activity_8_files/figure-latex/unnamed-chunk-14-1}

\textbf{Even though the language used in the output says ``statistic'' we are computing a difference in ``proportions''!!}

\begin{itemize}
\tightlist
\item
  Give the 95\% confidence interval for the difference in the population proportion of bad loans and good loans that have a phone number using the percentile method

  Click for answer

  \emph{Answer:} The percentile interval for Bad \(-\) Good is -0.105 to 0.028.
\item
  Give the 95\% confidence interval for the difference in the population proportion of bad loans and good loans that have a phone number using the bootstrap SE. Is it similar to the CI from the percentile method?

  Click for answer

  \emph{Answer:} The SE method gives an interval for Bad \(-\) Good of -0.107 to 0.028 which is very similar to the percentile interval.
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\FloatTok{0.03905} \SpecialCharTok{{-}} \DecValTok{2}\SpecialCharTok{*} \FloatTok{0.03373} 
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -0.10651
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\SpecialCharTok{{-}}\FloatTok{0.03905} \SpecialCharTok{+} \DecValTok{2}\SpecialCharTok{*} \FloatTok{0.}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
[1] -0.03905
\end{verbatim}

\hypertarget{e-interpret}{%
\subsubsection{(e) Interpret}\label{e-interpret}}

Interpret your percentile interval in context using a directional statement. Does this interval suggest that there is a difference in the percentage of bad loan holders who provided a phone number comapared to the percetage of good loan holders who gave a number? Explain.

Click for answer

\emph{Answer:} We are 95\% confident that the percentage of good loan accounts with a phone number is anywhere from 10.7 percentage points higher than to 2.8 percentage points less than the percentage of bad loans with a phone number.

\hypertarget{class-activity-9}{%
\chapter{Class Activity 9}\label{class-activity-9}}

\hypertarget{example-1-a-muslim-president}{%
\subsection{Example 1: A Muslim president?}\label{example-1-a-muslim-president}}

A survey of 1,527 American adults conducted in June 2015 stated that 60\% would vote for a qualified Muslim presidential candidate. The survey goes on to say that ``\ldots{} the margin of sampling error is +/- 3 percentage points at the 95\% confidence level.''

(a). What is the relevant sample statistic? Give appropriate notation and the value of the statistic.

Click for answer

\emph{Answer:} \(\hat{p} = 0.60\)

(b). What population parameter are we estimating with this sample statistic?\\

Click for answer

\emph{Answer:} p = the proportion of all American adults who vote for a qualified Muslim candidate

(c). Use the margin of error to give a confidence interval for the population parameter and interpret this interval in context.

Click for answer

\emph{Answer:} \(0.60 \pm .03\) gives an interval from 0.57 to 0.63
I am 95\% confident that the proportion of American adults who would vote for a Muslim presidential candidate is between 57\% and 63\%.

(d). Is it reasonable to say that a majority of American adults would vote for a qualified presidential candidate? (Is 0.50 a plausible value?)

Click for answer

\emph{Answer:} The proportion of all Americans who would vote for a Muslim presidential candidate is likely between 57\% and 63\%, so we could say that majority (\textgreater50\%) would vote for a Muslim candidate.

(e). Explain what ``95\% confidence'' mean for this example. (Don't just repeat your answer to 1c.)

Click for answer

\emph{Answer:} About 95\% of all samples of 1527 American adults will give us a sample proportion who would vote for a Muslim presidential candidate that is within 3\% of the population proportion who would vote for a Muslim presidential candidate.

\hypertarget{example-2-biomass-in-tropical-forests}{%
\subsection{Example 2: Biomass in Tropical Forests}\label{example-2-biomass-in-tropical-forests}}

Using a random sample of 4079 inventory plots, scientists found a sample average of 11,600 tons of carbon per square kilometer with a standard error of 1000 tons. Give a 95\% confidence interval for the mean amount of carbon per square kilometer in tropical forests. Clearly interpret the meaning of this confidence interval.

Click for answer

\emph{Answer:} \(11,600 \pm 2(1000)\) gives an interval from 9,600 to 13,600. We are 95\% sure that the mean amount of carbon per square kilometer in all tropical forests is between 9,600 and 13,600 tons.

\hypertarget{example-3-change-in-gun-ownership}{%
\subsection{Example 3: Change in gun ownership?}\label{example-3-change-in-gun-ownership}}

A 2016 study described in The Guardian found that a random sample of US adults in 1994 found a female rate of gun ownership of 9\%. A similar random sample in 2015 found the rate of female gun ownership rose to 12\%. Though not given in the article, let's assume that the SE for the difference in these two sample proportions is 2\%.

(a). Use correct notation to describe our parameter of interest: the difference in the proportion of female gun owners in 1994 and 2015.

Click for answer

\emph{Answer:} \(\hat{p}_{1994} - \hat{p}_{2015}\)

(b). Use the data collected to estimate your parameter in (a) and use correct notation for this statistic.

Click for answer

\emph{Answer:} \(\hat{p}_{1994} - \hat{p}_{2015}\) = 0.09 - 0.12 = -0.03

(c). Compute a 95\% confidence interval for the parameter in a.

Click for answer

\emph{Answer:} \((0.09 - 0.12) \pm (.02) = -0.03 \pm 0.04 = -0.07 \text{ to } 0.01, or -7\% \text{ to } 1\%\)

(d). Interpret your interval in c and explain why this support the authors claim that ``the increase {[}in female gun ownership{]} was not meaningful.''

Click for answer

\emph{Answer:} We are 95\% confident that the female gun owner rate in 1994 could be 7 percentage point lower to 1 percentage point higher than the rate in 2015. We can say that the observed increase from 1994 to 2015 of 3\% is not ``statistically significant'' because it is within the margin of error (4\%) for this study.

\hypertarget{example-4-interpreting-a-confidence-interval}{%
\subsection{Example 4: Interpreting a Confidence Interval}\label{example-4-interpreting-a-confidence-interval}}

Using a sample of 24 deliveries described in ``Diary of a Pizza Girl'' on the Slice website, we find a 95\% confidence interval for the mean tip given for a pizza delivery to be \$2.18 to \$3.90. Which of the following is a correct interpretation of this interval? Indicate all that are correct interpretations.

(a). I am 95\% sure that all pizza delivery tips will be between \$2.18 and \$3.90.

Click for answer

\emph{Answer:} Incorrect. The interval is about the mean, not individual tips..

(b). 95\% of all pizza delivery tips will be between \$2.18 and \$3.90.

Click for answer

\emph{Answer:} I am 95\% sure that the mean pizza delivery tip for this sample will be between \$2.18 and \$3.90.

(c). I am 95\% sure that the mean tip for all pizza deliveries in this area will be between \$2.18 and \$3.90.

Click for answer

\emph{Answer:} Correct!

(d). I am 95\% sure that the confidence interval for the mean pizza delivery tip will be between \$2.18 and \$3.90.

Click for answer

\emph{Answer:} Incorrect. The confidence is in where the population mean is, not where the interval itself is.

\hypertarget{class-activity-10}{%
\chapter{Class Activity 10}\label{class-activity-10}}

\hypertarget{example-1-extrasensory-perception-esp}{%
\subsection{Example 1: Extrasensory Perception (ESP)}\label{example-1-extrasensory-perception-esp}}

In an ESP test, one person writes down one of the letters A, B, C, D, or E and tries to telepathically communicate the choice to a partner. The partner then tries to guess what letter was selected.

(a). Repeat this a couple of times, then switch roles with your partner. How often did you guess correctly?

Click for answer

\emph{Answer:} Answers will vary!

(b). If there is no ESP and people are just randomly guessing from among the five choices, what proportion of guesses would we expect to be correct? If no ESP, we expect p = \(\ldots\)

Click for answer

\emph{Answer:} \(p = 0.2\) (since there are five choices and they are randomly guessing)

(c). Which sample proportion correct would provide the greatest evidence that people have ESP: (If we assume the sample size is the same in every case.)

Click for answer

\emph{Answer:}
\(\hat{p} = 3/4\) since this means more correct.

(d). Write down the null and alternative hypotheses for testing whether people have ESP:

Click for answer

\emph{Answer:}
\[H_0: p = 0.2\]
\[H_a: p > 0.2\]
where \(p\) is the proportion correct for all people's guesses. Since we are looking for evidence that the proportion is significantly above 0.2 (random guesses), the alternate hypothesis is larger than.

\hypertarget{example-2}{%
\subsection{Example 2}\label{example-2}}

In an experiment, students were given words to memorize, then were randomly assigned to either take a 90 minute nap or take a caffeine pill. A couple hours later, they were tested on their recall ability. We wish to test to see if the sample provides evidence that there is a difference in mean number of words people can recall depending on whether they take a nap or have some caffeine.

(a). What is the explanatory variable? Is it categorical or quantitative?

Click for answer

\emph{Answer:} Explanatory = nap or caffeine (categorical)

(b). What is the response variable? Is it categorical or quantitative?

Click for answer

\emph{Answer:} Response = number of words recalled (quantitative)

(c). What is the parameter of interest for this experiment? Use correct notation.

Click for answer

\emph{Answer:}
Quantitative = mean responses, where \(\mu_1\) and \(\mu_2\) are the mean words recalled in the two different conditions

(d). What are the null and alternative hypotheses for this test? Use correct notation.

Click for answer

\emph{Answer:}

\[H_0: \mu_1 = \mu_2\]
\[H_a: \mu_1 \neq \mu_2\]

The alternate hypothesis is not equals to since we are looking for evidence that the means are different (We do not know which one is larger!)

\hypertarget{example-1-revisited}{%
\subsection{Example 1 Revisited:}\label{example-1-revisited}}

(a). If the results of a test for ESP are statistically significant, what does that mean in terms of ESP?

Click for answer

\emph{Answer:}

It means we can conclude that \(p > 0.2\) and that the sample results were so strong that we can conclude that ESP does exist and get more right than would be expected by random chance.

(b). If the results are not statistically significant, what does that mean in terms of ESP?

Click for answer

\emph{Answer:}

The sample results are inconclusive. People may or may not have ESP. Sample results could be just random chance.

\hypertarget{class-activity-11}{%
\chapter{Class Activity 11}\label{class-activity-11}}

Midterm !!

\hypertarget{class-activity-12}{%
\chapter{Class Activity 12}\label{class-activity-12}}

\hypertarget{example-1-sleep-or-caffeine-for-memory}{%
\section{Example 1: Sleep or Caffeine for Memory}\label{example-1-sleep-or-caffeine-for-memory}}

In an experiment, 24 students were given words to memorize, then were randomly assigned to take a 90 minute nap or take a caffeine pill (12 in each group). They were then tested on their recall ability. We test to see if the sample provides evidence that there is a difference in mean number of words people can recall depending on whether they take a nap or have some caffeine. The hypotheses are:

\[
H_0: \mu_S - \mu_C = 0 \ \ H_A: \mu_S - \mu_C \neq 0
\]

The sample mean difference is \(\bar{x}_S - \bar{x}_C = 3\). We want to know if this difference in sample means is statistically significant.

\hypertarget{a-explain-how-to-generate-a-randomization-distribution-for-barx_s---barx_c-that-is-consistent-with-h_0-mu_s---mu_c-0.}{%
\subsubsection{\texorpdfstring{(a) Explain how to generate a randomization distribution for \(\bar{x}_S - \bar{x}_C\) that is consistent with \(H_0: \mu_S - \mu_C = 0\).}{(a) Explain how to generate a randomization distribution for \textbackslash bar\{x\}\_S - \textbackslash bar\{x\}\_C that is consistent with H\_0: \textbackslash mu\_S - \textbackslash mu\_C = 0.}}\label{a-explain-how-to-generate-a-randomization-distribution-for-barx_s---barx_c-that-is-consistent-with-h_0-mu_s---mu_c-0.}}

Click for answer

\emph{Answer:} We could randomly reassign the treatment to the study participants since, under the null, their recall abilities would be the same under either treatment. For each reassignment, we recomputed the sample mean difference and plot it in the dotplot shown below

\hypertarget{b-navigate-to-the-statkey-website.}{%
\subsubsection{(b) Navigate to the Statkey website.}\label{b-navigate-to-the-statkey-website.}}

Select the \textbf{Test for Difference in Means} option under \textbf{Randomization Hypothesis Tests}. Change the data set from \textbf{Leniency and Smiles} to \textbf{Sleep Caffeine Words}. Note that the original sample data has a sample mean difference of 3 words.

\begin{itemize}
\tightlist
\item
  \textbf{Generate 1 Sample} from this null randomization distribution. What is the difference in the average word recall of the two groups in this sample? Repeat this a couple of times.
\item
  \textbf{Generate 1000 Samples} a few of times (get at least 3000 resamples). How unusual is getting a difference in means of 3 or more words?
\end{itemize}

\vspace*{.5in}

\hypertarget{c-compute-the-randomization-p-value}{%
\subsubsection{(c) Compute the randomization p-value}\label{c-compute-the-randomization-p-value}}

Select the \textbf{Two-Tail} button at the top of the plot. Change the positive x-axis value to the observed difference of 3.0. The p-value is 2 times the proportion of resamples that have a difference of 3 or above. What is the p-value?

\begin{figure}
\centering
\includegraphics{data/wordRand.png}
\caption{Example 1}
\end{figure}

Click for answer

\emph{Answer:} We see in the image that the proportion in the tail beyond the sample statistic of 3.0 is 0.022. Because this is a two-tail test, we have to account for both tails, so the p-value is 2(0.022) = 0.044.

\hypertarget{d-interpret-conclusion}{%
\subsubsection{(d) Interpret + Conclusion}\label{d-interpret-conclusion}}

Interpret the p-value. Does the p-value support the alternative hypothesis (do you think difference of means of 3 is statistically significant) or is it inconclusive? Explain.

Click for answer

\emph{Answer:} We would see a difference of at least 3 words recalled, on average, in about 4.4\% of all possible samples if the influence of sleep and caffeine on recall was the same The results show some evidence of statistical significance, meaning that the caffeine and sleep may have some difference effects on word recall ability.

\hypertarget{e-redo-in-rstudio}{%
\subsubsection{(e) Redo in Rstudio}\label{e-redo-in-rstudio}}

First get the data from the Lock website and check important summary stats:

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(readr)}
\NormalTok{wordData }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"http://math.carleton.edu/Stats215/Textbook/SleepCaffeine.csv"}\NormalTok{)}
\CommentTok{\# Create a boxplot using ggplot2}
\FunctionTok{ggplot}\NormalTok{(wordData, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ Group, }\AttributeTok{y =}\NormalTok{ Words)) }\SpecialCharTok{+}
  \FunctionTok{geom\_boxplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Boxplot of Words by Group"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_12_files/figure-latex/unnamed-chunk-1-1}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Summary statistics using dplyr}
\NormalTok{wordData }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(Group) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{summarise\_all}\NormalTok{(}\FunctionTok{list}\NormalTok{(min, }\AttributeTok{q1 =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{quantile}\NormalTok{(., }\FloatTok{0.25}\NormalTok{), median, mean, }\AttributeTok{q3 =} \SpecialCharTok{\textasciitilde{}}\FunctionTok{quantile}\NormalTok{(., }\FloatTok{0.75}\NormalTok{), max))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 2 x 7
  Group      fn1    q1   fn2   fn3    q3   fn4
  <chr>    <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>
1 Caffeine     6  10    12.5  12.2  14.2    18
2 Sleep        9  13.8  15.5  15.2  17.2    21
\end{verbatim}

Then load the \texttt{CarletonStats} package and run the \texttt{permTest(y\ \textasciitilde{}\ x,\ data=)} command where \texttt{y} is your quantitative (or 0/1 coded) response and \texttt{x} defines the two groups you are comparing.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(CarletonStats)}
\FunctionTok{permTest}\NormalTok{(Words }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Group, }\AttributeTok{data=}\NormalTok{wordData)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_12_files/figure-latex/unnamed-chunk-3-1}

\begin{verbatim}

    ** Permutation test **

 Permutation test with alternative: two.sided 
 Observed statistic
  Caffeine :  12.25      Sleep :  15.25 
 Observed difference: -3 

 Mean of permutation distribution: -0.01472 
 Standard error of permutation distribution: 1.49619 
 P-value:  0.0476 

    *-------------*
\end{verbatim}

\begin{itemize}
\tightlist
\item
  Why is the observed difference reported as -3?
\end{itemize}

Click for answer

\emph{Answer:} The difference is computed alphabetically: Caffeine minus Sleep so the difference in now -3 instead of +3.

\begin{itemize}
\tightlist
\item
  What is the p-value? Is it the same as the Statkey p-value? The same as your neighbors p-value? Why not?
\end{itemize}

Click for answer

\emph{Answer:} The p-value is around 5\%. Any difference between Statkey, neighbors or different runs of the \texttt{permTest} command stem from the fact that different resamples are obtained each time a randomization distribution is generated. There may be some small (inconsequential) difference in p-values due to this.

\hypertarget{example-2-resident-vs-non-resident-tuition}{%
\section{Example 2: Resident vs Non-resident Tuition}\label{example-2-resident-vs-non-resident-tuition}}

The lab manual data set \texttt{Tuition2006} is a random sample of state colleges and universities in the U.S. We want to know if the average tuition charged to non-residents is higher than residents for all state colleges and universities:

\[
H_0: \mu_{Non-res} - \mu_{Res} = 0 \ \ H_A: \mu_{Non-res} - \mu_{Res} > 0
\]

\hypertarget{a-paired-data}{%
\subsubsection{(a) Paired Data}\label{a-paired-data}}

Read in the data. Note that each case (school) has a response value for the resident and non-resident tuition variables. This makes this a paired data example. Contrast this with the word recall example in which each case (student) only had one response (word recall) and treatment (caffeine/sleep).

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(readr)}
\NormalTok{tuition }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"http://math.carleton.edu/Stats215/RLabManual/Tuition2006.csv"}\NormalTok{)}
\FunctionTok{head}\NormalTok{(tuition)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
# A tibble: 6 x 5
   ...1 Institution          Res NonRes  Diff
  <dbl> <chr>              <dbl>  <dbl> <dbl>
1     1 Univ of Akron (OH)  4200   8800 -4600
2     2 Athens State (AL)   1900   3600 -1700
3     3 Ball State (IN)     3400   8600 -5200
4     4 Bloomsburg U (PA)   3200   7000 -3800
5     5 UC Irvine (CA)      3400  12700 -9300
6     6 Central State (OH)  2600   5700 -3100
\end{verbatim}

\hypertarget{b-permutation-test-for-paired-data}{%
\subsubsection{(b) Permutation test for paired data}\label{b-permutation-test-for-paired-data}}

Let's compute the difference of non-resident and resident tuitions (NR minus R):

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{diff }\OtherTok{\textless{}{-}}\NormalTok{ tuition}\SpecialCharTok{$}\NormalTok{NonRes }\SpecialCharTok{{-}}\NormalTok{ tuition}\SpecialCharTok{$}\NormalTok{Res}
\FunctionTok{summary}\NormalTok{(diff)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    200    2650    3100    3584    4500    9300 
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Histogram of differences using ggplot2}
\NormalTok{tuition }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{diff =}\NormalTok{ NonRes }\SpecialCharTok{{-}}\NormalTok{ Res) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ diff)) }\SpecialCharTok{+}
  \FunctionTok{geom\_histogram}\NormalTok{(}\AttributeTok{binwidth =} \DecValTok{1000}\NormalTok{, }\AttributeTok{color =} \StringTok{"black"}\NormalTok{, }\AttributeTok{fill =} \StringTok{"white"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{title =} \StringTok{"Histogram of Differences Between NonRes and Res Tuition"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_12_files/figure-latex/unnamed-chunk-6-1}

\begin{itemize}
\tightlist
\item
  What is the average difference in tuition costs?
\end{itemize}

Click for answer

\emph{Answer:} The observed mean difference is \$3584

\begin{itemize}
\tightlist
\item
  Is this observed mean difference statistically significant? To test use the command \texttt{permTestPaired}:
\end{itemize}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{permTestPaired}\NormalTok{(NonRes }\SpecialCharTok{\textasciitilde{}}\NormalTok{ Res,}\AttributeTok{data =}\NormalTok{ tuition, }\AttributeTok{alt =} \StringTok{"greater"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_12_files/figure-latex/unnamed-chunk-7-1}

\begin{verbatim}

    ** Permutation test for mean of paired difference **

 Permutation test with alternative: greater 
 Observed mean
  NonRes :  6405.263     Res :  2821.053 
 Observed difference  NonRes - Res : 3584.211 

 Mean of permutation distribution: -3.72406 
 Standard error of permutation distribution: 940.816 
 P-value:  1e-04 

    *-------------*
\end{verbatim}

The \texttt{alt} of \texttt{greater} was used because the function \texttt{permTestPaired(A\ \textasciitilde{}\ B)} computes paired differences as ``A'' minus ``B''.

\begin{itemize}
\tightlist
\item
  What is the p-value for this test?
\end{itemize}

Click for answer

\emph{Answer:} Less than 0.0001

\begin{itemize}
\tightlist
\item
  Is this observed mean difference statistically significant?
\end{itemize}

Click for answer

\emph{Answer:} Yes, an observed mean difference of at least \$3584 would rarely occur just by chance which provides us strong evidence that the mean tuition amount of non-residents is higher than residents in the population of state colleges and universities (in 2006).

\hypertarget{class-activity-13}{%
\chapter{Class Activity 13}\label{class-activity-13}}

\hypertarget{example-1-effect-of-exercise-on-heart-rate}{%
\section{Example 1: Effect of Exercise on Heart Rate}\label{example-1-effect-of-exercise-on-heart-rate}}

In a study, 30 participants were randomly assigned to engage in either aerobic exercise or resistance training (15 in each group). Their resting heart rate was measured before and after a 6-week exercise program. We want to test if there is a difference in the mean decrease in resting heart rate between aerobic exercise and resistance training. The hypotheses are:

\[H_0: \mu_A-\mu_R=0 \quad\quad H_A: \mu_A-\mu_R \neq 0\]

The sample mean difference is \(\bar{x}_A - \bar{x}_R = 5\). We want to know if this difference in sample means is statistically significant.

\hypertarget{a-randomization-distribution}{%
\subsection{(a) Randomization Distribution}\label{a-randomization-distribution}}

Describe how you could generate a randomization distribution for \(\bar{x}_A - \bar{x}_R\) that is consistent with \(H_0: \mu_A - \mu_R = 0\).

Click for answer

\emph{Answer:} To generate a randomization distribution for the sample mean difference, we would randomly reassign the treatment (aerobic exercise or resistance training) to the study participants. Under the null hypothesis, the mean decrease in resting heart rate would be the same under either treatment. For each reassignment, we would compute the sample mean difference and plot it in the dotplot.

\hypertarget{b-calculating-the-p-value}{%
\subsection{(b) Calculating the p-value}\label{b-calculating-the-p-value}}

Using a statistical software, generate a randomization distribution for the difference in means and calculate the p-value for the two-tailed test. Is the observed difference of 5 bpm statistically significant?

Click for answer

\emph{Answer:} We can use the \texttt{permTest} function from the \texttt{CarletonStats} package to generate a randomization distribution for the difference in means and calculate the p-value for the two-tailed test. We can compare the p-value of \(2e^{-4}\) to a chosen significance level (e.g., 0.05) to determine if the observed difference of 5 bpm is statistically significant. Since the p-value is less than the significance level, the observed difference is statistically significant.

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{library}\NormalTok{(CarletonStats)}
\FunctionTok{library}\NormalTok{(readr)}
\NormalTok{exercise }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/exercise.csv"}\NormalTok{)}
\FunctionTok{permTest}\NormalTok{(Decrease\_in\_Resting\_Heart\_Rate}\SpecialCharTok{\textasciitilde{}}\NormalTok{Group, }\AttributeTok{data=}\NormalTok{ exercise)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_13_files/figure-latex/unnamed-chunk-1-1}

\begin{verbatim}

    ** Permutation test **

 Permutation test with alternative: two.sided 
 Observed statistic
  Aerobic_Exercise :  9.2    Resistance_Training :  3 
 Observed difference: 6.2 

 Mean of permutation distribution: 0.0043 
 Standard error of permutation distribution: 1.19712 
 P-value:  2e-04 

    *-------------*
\end{verbatim}

\hypertarget{c-interpretation-and-conclusion}{%
\subsection{(c) Interpretation and Conclusion}\label{c-interpretation-and-conclusion}}

Interpret the p-value and state your conclusion regarding the difference in mean decrease in resting heart rate between aerobic exercise and resistance training.

Click for answer

\emph{Answer:} Since the p-value is less than the significance level, it means that the observed difference of 5 bpm is highly unlikely to occur just by random chance under the null hypothesis. In this case, we would reject the null hypothesis and conclude that there is a statistically significant difference in the mean decrease in resting heart rate between aerobic exercise and resistance training.

\hypertarget{example-2-job-interview-success}{%
\section{Example 2: Job Interview Success}\label{example-2-job-interview-success}}

A study investigated the success rate of job applicants who used a career coaching service (CCS) compared to those who didn't (NCCS). Out of 120 applicants, 60 used the CCS and 60 did not. We want to test if there is a difference in the proportion of successful applicants between CCS and NCCS groups. out of the 60 applicants who used the career coaching service (CCS), 42 were successful and 18 were unsuccessful. Out of the 60 applicants who did not use the career coaching service (NCCS), 30 were successful and 30 were unsuccessful. The hypotheses are:

\[H_0: p_{C C S}-p_{N C C S}=0 H_A: p_{C C S}-p_{N C C S} \neq 0\]
The sample proportion difference is \(\hat{p}{CCS} - \hat{p}{NCCS} = 0.20\). We want to know if this difference in sample proportions is statistically significant.

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\tightlist
\item
  Randomization Distribution
  Describe how you could generate a randomization distribution for \(\hat{p}_{CCS} - \hat{p}_{NCCS}\) that is consistent with \(H_0: p_{CCS} - p_{NCCS} = 0\).
\end{enumerate}

Click for answer

\emph{Answer:} To generate a randomization distribution for the sample proportion difference, we would randomly reassign the group (CCS or NCCS) to the job applicants. Under the null hypothesis, the proportion of successful applicants would be the same for both groups. For each reassignment, we would compute the sample proportion difference and plot it in the dotplot.

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Calculating the p-value
\end{enumerate}

Using a statistical software, generate a randomization distribution for the difference in proportions and calculate the p-value for the two-tailed test. Is the observed difference of 0.12 statistically significant?

Click for answer

\emph{Answer:} Using \emph{Statkey} to generate a randomization distribution for the difference in proportions and observing the p-value for the two-tailed test, we can compare the p-value to a chosen significance level (e.g., 0.05) to determine if the observed difference of 0.20 is statistically significant. If the p-value is less than the significance level, the observed difference is statistically significant; otherwise, it is not. The p-value based on this randomization distribution under null hypothesis is \(2 \times 0.018 = 0.036\). So, the observed difference of 0.020 is statistically significant.

\begin{enumerate}
\def\labelenumi{(\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Interpretation and Conclusion
  Interpret the p-value and state your conclusion regarding the difference in the proportion of successful job applicants between CCS and NCCS groups.
\end{enumerate}

Click for answer

\emph{Answer:} Since the p-value is less than the significance level, it means that the observed difference of 0.20 would occur with low chance under the null hypothesis. In this case, we would reject the null hypothesis and conclude that there is a statistically significant difference in the proportion of successful job applicants between CCS and NCCS groups.

\hypertarget{example-3-new-teaching-method-effectiveness}{%
\section{Example 3: New Teaching Method Effectiveness}\label{example-3-new-teaching-method-effectiveness}}

A school is testing a new teaching method for math. They randomly assign 40 students to either the new method (NM) or the traditional method (TM), 20 in each group. After 3 months, the students take a standardized math test. We want to test if there is a difference in the mean test scores between NM and TM groups. The hypotheses are:

\[H_0: \mu_{N M}-\mu_{T M}=0 \mathrm{H}_A: \mu_{NM} - \mu_{TM} \neq 0\]
The sample mean difference is \(\bar{x}_{NM} - \bar{x}_{TM} = 8.9\). We want to know if this difference in sample means is statistically significant.

\hypertarget{a-randomization-distribution-1}{%
\subsection{(a) Randomization Distribution}\label{a-randomization-distribution-1}}

Describe how you could generate a randomization distribution for \(\bar{x}_{NM} - \bar{x}_{TM}\) that is consistent with \(H_0: \mu_{NM} - \mu_{TM} = 0\).

Click for answer

\emph{Answer:} To generate a randomization distribution for the sample proportion difference, we would randomly reassign the teaching method (new or traditional) to the classes. Under the null hypothesis, the proportion of students passing would be the same under either teaching method. For each reassignment, we would compute the sample proportion difference and plot it in the dotplot.

\hypertarget{b-calculating-the-p-value-1}{%
\subsubsection{(b) Calculating the p-value}\label{b-calculating-the-p-value-1}}

Using a statistical software, generate a randomization distribution for the difference in means and calculate the p-value for the two-tailed test. Is the observed difference of 8.9 points statistically significant?

Click for answer

\emph{Answer:} The p-value is the proportion of resamples that have a difference of 8.9 or above. Depending on the generated randomization distribution, the p-value is 0.0002. This means is interpreted in terms of how likely it is to observe a difference of 8.9 or greater under the null hypothesis, which is 0.02\%.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{teaching }\OtherTok{\textless{}{-}} \FunctionTok{read\_csv}\NormalTok{(}\StringTok{"https://raw.githubusercontent.com/deepbas/statdatasets/main/teaching\_method.csv"}\NormalTok{)}
\FunctionTok{permTest}\NormalTok{(Math\_Test\_Score}\SpecialCharTok{\textasciitilde{}}\NormalTok{Group, }\AttributeTok{data=}\NormalTok{ teaching)}
\end{Highlighting}
\end{Shaded}

\includegraphics[width=1\linewidth]{Class_Activity_13_files/figure-latex/unnamed-chunk-2-1}

\begin{verbatim}

    ** Permutation test **

 Permutation test with alternative: two.sided 
 Observed statistic
  New_Method :  91.05    Traditional_Method :  82.15 
 Observed difference: 8.9 

 Mean of permutation distribution: -0.0079 
 Standard error of permutation distribution: 1.75358 
 P-value:  2e-04 

    *-------------*
\end{verbatim}

\hypertarget{c-interpretation-and-conclusion-1}{%
\subsubsection{(c) Interpretation and Conclusion}\label{c-interpretation-and-conclusion-1}}

Interpret the p-value and state your conclusion regarding the difference in the mean test scores between the new teaching method and the traditional teaching method groups.

Click for answer

\emph{Answer:} Since the p-value is less than the chosen significance level (e.g., 0.05), the results are statistically significant, and we would reject the null hypothesis in favor of the alternative. This would indicate that there is evidence suggesting the new teaching method is more effective than the traditional method.

\hypertarget{example-4-type-i-and-type-ii-error-rates}{%
\section{Example 4: Type I and Type II Error Rates}\label{example-4-type-i-and-type-ii-error-rates}}

Consider the previous example of a new teaching method compared to a traditional teaching method. Suppose that the school administration wants to minimize the chances of making Type I and Type II errors when deciding whether to adopt the new teaching method.

\hypertarget{a-type-i-error}{%
\subsection{(a) Type I Error}\label{a-type-i-error}}

Explain what a Type I error is in the context of this example, and describe the consequences of making such an error.

Click for answer

\emph{Answer:} A Type I error occurs when we reject the null hypothesis when it's actually true. In this context, it means that we conclude the new teaching method is more effective than the traditional method when, in reality, there is no difference. The consequences of making a Type I error could include investing time and resources into a new teaching method that isn't actually more effective, leading to inefficient allocation of resources.

\hypertarget{b-type-ii-error}{%
\subsection{(b) Type II Error}\label{b-type-ii-error}}

Explain what a Type II error is in the context of this example, and describe the consequences of making such an error.

Click for answer

\emph{Answer:} A Type II error occurs when we fail to reject the null hypothesis when it's actually false. In this context, it means that we conclude that there is no difference between the new teaching method and the traditional method when, in reality, the new method is more effective. The consequences of making a Type II error could include missing out on the opportunity to improve students' learning outcomes by not adopting the more effective teaching method.

\hypertarget{c-adjusting-the-significance-level}{%
\subsection{(c) Adjusting the Significance Level}\label{c-adjusting-the-significance-level}}

If the school administration believes that making a Type I error is much worse than making a Type II error, what adjustments could be made to the significance level to account for this? Explain your reasoning.

Click for answer

\emph{Answer:} To decrease the chance of making a Type I error, the school administration could choose a smaller significance level, such as 0.01 instead of the typical 0.05. By using a smaller significance level, we require stronger evidence (smaller p-value) to reject the null hypothesis, thus reducing the probability of making a Type I error.

\hypertarget{d-factors-influencing-type-ii-error-rate}{%
\subsection{(d) Factors Influencing Type II Error Rate}\label{d-factors-influencing-type-ii-error-rate}}

List the factors that influence the probability of making a Type II error and briefly describe how they affect the error rate in this context.

Click for answer

Answer: Factors that influence the probability of making a Type II error include:

\emph{Effect size:} The true difference between the new teaching method and the traditional method. A larger effect size makes it easier to detect a difference, reducing the Type II error rate.
\emph{Sample size:} The number of students involved in the study. A larger sample size increases the power of the test, making it more likely to detect a true difference and reducing the Type II error rate.
\emph{Variability:} The amount of variation in the students' learning outcomes. Higher variability makes it more difficult to detect a true difference, increasing the Type II error rate.
\emph{Significance level:} The chosen significance level (alpha) also affects the Type II error rate. A larger significance level (e.g., 0.10) decreases the Type II error rate but increases the Type I error rate.

\hypertarget{e-balancing-error-rates}{%
\subsection{(e) Balancing Error Rates}\label{e-balancing-error-rates}}

Discuss how the school administration could balance the Type I and Type II error rates when evaluating the effectiveness of the new teaching method. What factors should they consider?

Click for answer

\emph{Answer:} Balancing the Type I and Type II error rates involves considering the consequences of each type of error and the desired level of confidence in the results. The administration should weigh the risks and benefits of adopting a new teaching method versus maintaining the traditional method. They should also consider factors such as the cost and feasibility of implementing the new method, as well as the potential impact on student learning outcomes. Ultimately, the administration should choose a significance level and sample size that balance the risks associated with Type I and Type II errors while taking into account practical constraints and priorities.

  \bibliography{book.bib,packages.bib}

\end{document}
